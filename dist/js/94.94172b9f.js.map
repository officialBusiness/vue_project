{"version":3,"file":"js/94.94172b9f.js","mappings":"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","sources":["webpack://vue_project/./src/views/paper/paper.vue","webpack://vue_project/./src/views/paper/view_editor/view_editor.vue","webpack://vue_project/./src/tools/simple_editor/base_api/node.js","webpack://vue_project/./src/tools/simple_editor/base_api/range.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/paragraph/event/delete_forward.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/paragraph/event/delete_forward_on_start.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/paragraph/event/delete_fragment.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/paragraph/event/enter.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/paragraph/event/enter_fragment.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/paragraph/event/paragraph_event.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/paragraph/paragraph.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/header/header.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/image/event/delete_forward.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/image/event/delete_fragment.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/image/event/enter.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/image/event/enter_fragment.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/image/event/image_event.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/image/image.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/code/code.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/list/event/delete_forward_on_start.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/list/event/delete_fragment.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/list/event/enter.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/list/event/enter_fragment.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/list/event/list_event.js","webpack://vue_project/./src/tools/simple_editor/component/template/block/list/list.js","webpack://vue_project/./src/tools/simple_editor/component/template/text.js","webpack://vue_project/./src/tools/simple_editor/component/template/mathjax.js","webpack://vue_project/./src/tools/simple_editor/component/component.js","webpack://vue_project/./src/tools/simple_editor/event/native/keydown.js","webpack://vue_project/./src/tools/simple_editor/event/native/composition.js","webpack://vue_project/./src/tools/simple_editor/event/native/paste.js","webpack://vue_project/./src/tools/simple_editor/event/event.js","webpack://vue_project/./src/tools/simple_editor/editor.js","webpack://vue_project/./src/views/paper/view_editor/tooltip/tooltip.vue","webpack://vue_project/./src/views/paper/view_editor/tooltip/header_and_paragraph.js","webpack://vue_project/./src/views/paper/view_editor/tooltip/list_operation.js","webpack://vue_project/./src/views/paper/view_editor/tooltip/image_operation.vue","webpack://vue_project/src/views/paper/view_editor/tooltip/image_operation.vue","webpack://vue_project/./src/views/paper/view_editor/tooltip/image_operation.vue?e37f","webpack://vue_project/./src/views/paper/view_editor/tooltip/image_operation.vue?40e5","webpack://vue_project/./src/views/paper/view_editor/tooltip/mathjax_operation.vue","webpack://vue_project/src/views/paper/view_editor/tooltip/mathjax_operation.vue","webpack://vue_project/./src/views/paper/view_editor/tooltip/mathjax_operation.vue?80b3","webpack://vue_project/./src/views/paper/view_editor/tooltip/mathjax_operation.vue?2d4e","webpack://vue_project/src/views/paper/view_editor/tooltip/tooltip.vue","webpack://vue_project/./src/views/paper/view_editor/tooltip/tooltip.vue?be58","webpack://vue_project/./src/views/paper/view_editor/tooltip/tooltip.vue?4911","webpack://vue_project/src/views/paper/view_editor/view_editor.vue","webpack://vue_project/./src/views/paper/view_editor/view_editor.vue?6160","webpack://vue_project/./src/views/paper/view_editor/view_editor.vue?178a","webpack://vue_project/./src/views/paper/view_pdf/view_pdf.vue","webpack://vue_project/src/views/paper/view_pdf/view_pdf.vue","webpack://vue_project/./src/views/paper/view_pdf/view_pdf.vue?696e","webpack://vue_project/./src/views/paper/view_pdf/view_pdf.vue?f253","webpack://vue_project/src/views/paper/paper.vue","webpack://vue_project/./src/views/paper/paper.vue?dbe9","webpack://vue_project/./src/views/paper/paper.vue?0e4a","webpack://vue_project/./node_modules/core-js/internals/a-possible-prototype.js","webpack://vue_project/./node_modules/core-js/internals/an-instance.js","webpack://vue_project/./node_modules/core-js/internals/classof.js","webpack://vue_project/./node_modules/core-js/internals/dom-exception-constants.js","webpack://vue_project/./node_modules/core-js/internals/error-stack-clear.js","webpack://vue_project/./node_modules/core-js/internals/inherit-if-required.js","webpack://vue_project/./node_modules/core-js/internals/normalize-string-argument.js","webpack://vue_project/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://vue_project/./node_modules/core-js/internals/to-string-tag-support.js","webpack://vue_project/./node_modules/core-js/internals/to-string.js","webpack://vue_project/./node_modules/core-js/modules/web.dom-exception.stack.js","webpack://vue_project/./src/utils/timer/basic/now.js","webpack://vue_project/./src/utils/timer/debounce.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"paper\"}},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"iconfont icon-paper\"}),_c('div',{staticClass:\"text\"},[_vm._v(\"论文解析\")]),_c('div',{staticClass:\"text\",attrs:{\"v-if\":_vm.selectedPaper}},[_vm._v(_vm._s(_vm.selectedPaper))])])]),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"bar\"},[_c('div',{staticClass:\"item-btn\",attrs:{\"data-selected\":_vm.paperListVisible,\"title\":\"论文列表\"},on:{\"mousedown\":function($event){return _vm.setPaperListVisible()}}},[_vm._v(\"列\")]),_c('div',{staticClass:\"item-btn editor_layout\",attrs:{\"data-show\":!!_vm.paperList[_vm.selectedPaperIndex],\"title\":\"视图布局\"}},[_vm._v(\" 视 \"),_c('div',{staticClass:\"layout\"},_vm._l((_vm.layoutTypes),function(layout,index){return _c('div',{staticClass:\"layout_button\",attrs:{\"title\":layout.title,\"data-selected\":_vm.layoutType === index},on:{\"mousedown\":function($event){return _vm.setLayoutType(index)}}},[_vm._v(_vm._s(layout.type))])}),0)]),_c('div',{staticClass:\"item-btn editable\",attrs:{\"data-selected\":_vm.editable,\"data-show\":!!_vm.paperList[_vm.selectedPaperIndex] && _vm.paperList[_vm.selectedPaperIndex].allowChange,\"title\":\"编辑\"},on:{\"mousedown\":function($event){return _vm.setEditable()}}},[_vm._v(\"编\")])]),_c('div',{staticClass:\"items\"},[(!_vm.selectedPaper)?_c('div',{staticClass:\"noSelectedPaper\"},[_vm._v(\"还未选择论文\")]):_vm._e(),_c('div',{staticClass:\"item list\",attrs:{\"data-show\":_vm.paperListVisible},on:{\"mousedown\":function($event){return _vm.setPaperListVisible(false)}}},_vm._l((_vm.paperList),function(paper,index){return _c('div',{staticClass:\"paper-name\",attrs:{\"data-selected\":_vm.selectedPaperIndex === index},on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.setPaper(index)}}},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(paper.name))])])}),0),_c('div',{ref:\"pdf\",staticClass:\"item pdf\"},[_c('v-viewPdf',{attrs:{\"paper\":_vm.selectedPaper}})],1),_c('div',{ref:\"editor\",staticClass:\"item editor\"},[_c('v-viewEditor',{attrs:{\"layoutType\":_vm.layoutType,\"editable\":_vm.editable,\"paper\":_vm.selectedPaper}})],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"paper_view-editor\"},[_c('div',{staticClass:\"editor_tooltip\",attrs:{\"data-show\":_vm.editable}},[_c('v-tooltip',{attrs:{\"editor\":_vm.editing,\"anotherEditor\":_vm.anotherEditor,\"allEditors\":_vm.allEditors}})],1),_c('div',{staticClass:\"editors\"},[_c('div',{ref:\"originalEditorContainer\",staticClass:\"editor_container\",attrs:{\"data-selected\":_vm.editing && _vm.editing === _vm.originalEditor},on:{\"mousedown\":function($event){return _vm.setEditing(_vm.originalEditor, _vm.translationEditor)}}},[_c('div',{ref:\"originalEditor\",staticClass:\"editorDom\"})]),_c('div',{ref:\"translationEditorContainer\",staticClass:\"editor_container\",attrs:{\"data-selected\":_vm.editing && _vm.editing === _vm.translationEditor},on:{\"mousedown\":function($event){return _vm.setEditing(_vm.translationEditor, _vm.originalEditor)}}},[_c('div',{ref:\"translationEditor\",staticClass:\"editorDom\"})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nexport const nodeLabel = {\n\tblock: 'block',\n\tcontainer: 'container',\n\n\tallowLine: 'allow-line',\n}\n// \t判断\n\nexport function isBlock(dom){\n\treturn dom.nodeType === Node.ELEMENT_NODE && !!dom.getAttribute('block');\n}\n\nexport function isNotBlock(dom){\n\treturn dom.nodeType !== Node.ELEMENT_NODE || !dom.getAttribute('block');\n}\n\nexport function isContainer(dom){\n\treturn dom.nodeType === Node.ELEMENT_NODE && !!dom.getAttribute('container');\n}\n\nexport function isNotContainer(dom){\n\treturn dom.nodeType !== Node.ELEMENT_NODE || !dom.getAttribute('container');\n}\n\nexport function isEmpty(node){\n\treturn node.childNodes.length === 0\n}\n\nexport function allowLine(dom){\n\treturn dom.nodeType === Node.ELEMENT_NODE && !!dom.getAttribute('allow-line');\n}\n\n// 单个元素是否相同, 不考虑子节点\nexport function isElementEqual(a, b) {\n\t// 判断两个对象是否指向同一内存，指向同一内存返回true\n\tif (a === b) {\n\t\treturn true;\n\t}\n\t// 获取两个对象键值数组\n\tlet aProps = Object.getOwnPropertyNames(a)\n\tlet bProps = Object.getOwnPropertyNames(b)\n\n\t// 遍历对象的键值\n\tif( a.nodeType !== b.nodeType ){\n\t\tconsole.log('node 类型不同', 'a:', a, 'b:', b);\n\t\treturn false;\n\t}\n\n\tif( a.nodeType === Node.ELEMENT_NODE ){\n\t\tif( a.nodeName !== b.nodeName ){\n\t\t\tconsole.log('标签 nodeName 不一样');\n\t\t\tconsole.log('a:', a);\n\t\t\tconsole.log('b:', b);\n\t\t\treturn false;\n\t\t}\n\n\t\tif( a.attributes.length !== b.attributes.length ){\n\t\t\tconsole.log('attributes 长度不一样');\n\t\t\tconsole.log('a:', a, 'attribute', a.attributes);\n\t\t\tconsole.log('b:', b, 'attribute', b.attributes);\n\t\t\treturn false;\n\t\t}\n\n\t\tfor(let i = 0; i < a.attributes.length; i++){\n\t\t\tlet aAttribute = a.attributes.item(i),\n\t\t\t\t\tbAttribute = b.attributes.item(i);\n\n\t\t\tif( aAttribute.name !== bAttribute.name || \n\t\t\t\t\taAttribute.value  !== bAttribute.value ){\n\t\t\t\tconsole.log('attributes 属性不一样');\n\t\t\t\tconsole.log('a:', a, 'attribute', a.attributes.item(i));\n\t\t\t\tconsole.log('b:', b, 'attribute', b.attributes.item(i));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif( a.style.length !== b.style.length ){\n\t\t\tconsole.log('style 长度不一样');\n\t\t\tconsole.log('a:', a, 'style', a.style);\n\t\t\tconsole.log('b:', b, 'style', b.style);\n\t\t\treturn false;\n\t\t}\n\n\t\tfor(let i = 0; i < a.style.length; i++){\n\t\t\tlet aStyle = a.style[i],\n\t\t\t\t\tbStyle = b.style[i];\n\t\t\tif( aStyle !== bStyle ){\n\t\t\t\tconsole.log('style 属性不一样');\n\t\t\t\tconsole.log('a:', a, 'style', a.style[i]);\n\t\t\t\tconsole.log('b:', b, 'style', b.style[i]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif( a.style[aStyle] !== b.style[bStyle] ){\n\t\t\t\tconsole.log('style 属性不一样');\n\t\t\t\tconsole.log('a:', a, `a.style[${aStyle}]`, a.style[aStyle]);\n\t\t\t\tconsole.log('b:', b, `b.style[${bStyle}]`, b.style[bStyle]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true;\n}\n\n// 判断 node 是否是 container 的第一个的节点\nexport function isStartInContainer(node){\n\tlet parentNode = node.parentNode;\n\twhile( isNotContainer(node) ){\n\t\tif( parentNode.childNodes[0] !== node ){\n\t\t\treturn false;\n\t\t}\n\t\tnode = parentNode;\n\t\tparentNode = node.parentNode;\n\t}\n\treturn true;\n}\n\n// \t增\n\nexport function insertBefore(newNode, nextNode){\n\tnextNode.parentNode.insertBefore(newNode, nextNode);\n}\n\nexport function insertAfter(newNode, preNode){\n\tlet parentNode = preNode.parentNode;\n\tif( preNode.nextSibling ){\n\t\tparentNode.insertBefore(newNode, preNode.nextSibling);\n\t}else{\n\t\tparentNode.appendChild(newNode);\n\t}\n}\n\nexport function appendChild(parentNode, newNode){\n\tparentNode.appendChild(newNode);\n}\n\nexport function appendChildren(parentNode, childrenNodes){\n\tif( NodeList.prototype.isPrototypeOf(childrenNodes)){\n\t\tfor( let i = 0, len = childrenNodes.length; i < len; i++ ){\n\t\t\tparentNode.appendChild(childrenNodes[0]);\n\t\t}\n\t}else if(Array.prototype.isPrototypeOf(childrenNodes)){\n\t\tfor( let i = 0, len = childrenNodes.length; i < len; i++ ){\n\t\t\tparentNode.appendChild(childrenNodes[i]);\n\t\t}\n\t}else{\n\t\tconsole.error('childrenNodes:', childrenNodes);\n\t\tthrow new Error('appendChildren 传参错误, childrenNodes 类型未知');\n\t}\n}\n\nexport function createTextNode(text){\n\treturn document.createTextNode(text);\n}\n\nexport function createDom(obj){\n\tif( obj.if !== void 0 && !obj.if ){\n\t\treturn ;\n\t}\n\tif( typeof obj === 'string' ){\n\t\treturn document.createTextNode(text);\n\t}else if( typeof obj === 'object' ){\n\t\tlet\n\t\t\t{ nodeName, attributes, on, style, children, created } = obj,\n\t\t\telement = document.createElement(nodeName);\n\n\t\tif( attributes ){\n\t\t\tif(typeof attributes === 'object'){\n\t\t\t\tObject.keys(attributes).forEach((key)=>{\n\t\t\t\t\tif( attributes[key] !== void 0 && attributes[key] !== null){\n\t\t\t\t\t\telement.setAttribute(key, attributes[key]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.error(attributes);\n\t\t\t\tthrow new Error('创建组件 dom 时遇到情况外的 attributes 类型');\n\t\t\t}\n\t\t}\n\t\tif( style ){\n\t\t\tif(typeof style === 'object'){\n\t\t\t\tObject.keys(style).forEach((key)=>{\n\t\t\t\t\tif( style[key] !== void 0 && style[key] !== null && style[key] !== ''){\n\t\t\t\t\t\telement.style[key] = style[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.error(style);\n\t\t\t\tthrow new Error('创建组件 dom 时遇到情况外的 style 类型');\n\t\t\t}\n\t\t}\n\t\tif( children ){\n\t\t\tif( Array.isArray(children) ){\n\t\t\t\tchildren.forEach((child)=>{\n\t\t\t\t\tlet dom = createDom(child);\n\t\t\t\t\tif( dom ){\n\t\t\t\t\t\telement.appendChild(dom);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else if( typeof children === 'object' ){\n\t\t\t\tlet dom = createDom(children);\n\t\t\t\tif( dom ){\n\t\t\t\t\telement.appendChild(dom);\n\t\t\t\t}\n\t\t\t}else if( typeof children === 'string' ){\n\t\t\t\telement.appendChild(document.createTextNode(children));\n\t\t\t}else{\n\t\t\t\tconsole.error(children);\n\t\t\t\tthrow new Error('创建组件 dom 时遇到情况外的 children 类型');\n\t\t\t}\n\t\t}\n\t\tif( created ){\n\t\t\tif( typeof created === 'function'){\n\t\t\t\tcreated(element);\n\t\t\t}else{\n\t\t\t\tconsole.error(created);\n\t\t\t\tthrow new Error('创建组件 dom 时遇到情况外的 created 类型');\n\t\t\t}\n\t\t}\n\t\treturn element;\n\t}else{\n\t\tconsole.error(obj);\n\t\tthrow new Error('创建组件 dom 时遇到情况外的 obj 类型');\n\t}\n}\n\n// \t删\n\nexport function emptyAllChild(node){\n\tfor( let i = node.childNodes.length - 1; i >=0; i-- ){\n\t\tnode.removeChild(node.childNodes[i]);\n\t}\n}\n\nexport function removeChild(parentNode, node){\n\tparentNode.removeChild(newNode);\n}\n\nexport function removeNode(node){\n\tnode.parentNode.removeChild(node);\n}\n\n// 改\n\nexport function mergeTwoNodes(pre, next){\n\tconsole.log('%c合并两个节点 node mergeTwoNodes', 'color: #000000; background-color: #ffffff');\n\tconsole.log('pre:', pre, '\\nnext:', next);\n\tif( pre.nodeType === Node.TEXT_NODE &&\n\t\t\tnext.nodeType === Node.TEXT_NODE ){//\t前后节点都是text\n\t\tconsole.log('节点都是 text');\n\t\tpre.parentNode.normalize();//\t合并前后 text\n\t}else if( isElementEqual( pre, next ) ){// \t前后节点一样，可以合并\n\t\tconsole.log('节点元素信息一致，可以合并');\n\t\tif( pre.childNodes.length > 0 && next.childNodes.length > 0 ){\n\t\t\tlet preEnd = pre.childNodes[pre.childNodes.length - 1],\n\t\t\t\t\tnextStart = next.childNodes[0];\n\t\t\tappendChildren(pre, next.childNodes);\n\t\t\tremoveNode(next);\n\t\t\tmergeTwoNodes( preEnd, nextStart);\n\t\t}else if( pre.childNodes.length === 0 && next.childNodes.length > 0){\n\t\t\tappendChildren(pre, next.childNodes);\n\t\t\tremoveNode(next);\n\t\t}\n\t}\n}\n\nexport function splitFromNodeOffsetStillTop(node, offset, topNode){\n\t// console.log('%cnode splitFromNodeOffsetStillTop', 'color: #000000; background-color: #ffffff');\n\t// console.log('node:', node, '\\noffset:', offset, '\\ntopNode:', topNode);\n\tif( !topNode.contains(node) ){\n\t\tconsole.error('node:', node, 'topNode:', topNode);\n\t\tthrow new Error('splitFromNodeOffsetInContainer 传参错误, node 不包含在 topNode 中');\n\t}\n\tlet startNode;\n\tif( node.nodeType === Node.TEXT_NODE ){\n\t\tif( offset === node.length ){\n\t\t\t// console.log('在 text 末端');\n\t\t\tstartNode = getNextNodeInTopNode(node, topNode);\n\t\t}else if( offset === 0 ){\n\t\t\tstartNode = node;\n\t\t}else{\n\t\t\tnode.splitText(offset);\n\t\t\tstartNode = node.nextSibling;\n\t\t}\n\t}else if( node.nodeType === Node.ELEMENT_NODE ){\n\t\tif( offset === 0 ){\n\t\t\t// console.log('offset 为 0');\n\t\t\tstartNode = node;\n\t\t}else if( offset === node.childNodes.length ){\n\t\t\t// console.log('offset 为 节点的子节点末尾');\n\t\t\tstartNode = getNextNodeInTopNode(node.childNodes[offset - 1], topNode);\n\t\t}else{\n\t\t\tstartNode = node.childNodes[offset];\n\t\t}\n\t}\n\t// console.log('拆分起点节点 startNode:', startNode);\n\tif( startNode ){\n\t\t// console.log('开始拆分 startNode:', startNode);\n\t}else{\n\t\t// console.log('startNode 不存在, 在最末端, 不需要拆分');\n\t\treturn topNode.cloneNode();\n\t} \n\tlet\tstartNodeParent,\n\t\tstartNodeParentClone,\n\t\trememberStartNodeParentClone;\n\n\twhile( startNode.parentNode && startNode !== topNode ){\n\t\tlet\t\n\t\t\tnextSibling = startNode.nextSibling,\n\t\t\trememberNextSibling;\n\n\t\tstartNodeParent = startNode.parentNode;\n\t\tstartNodeParentClone = startNodeParent.cloneNode(false);\n\n\t\tif( rememberStartNodeParentClone ){\n\t\t\tstartNodeParentClone.appendChild(rememberStartNodeParentClone);\n\t\t}else{\n\t\t\tstartNodeParentClone.appendChild(startNode);\n\t\t}\n\t\trememberStartNodeParentClone = startNodeParentClone;\n\n\t\twhile( nextSibling ){\n\t\t\trememberNextSibling = nextSibling.nextSibling;\n\t\t\tstartNodeParentClone.appendChild( nextSibling );\n\t\t\tnextSibling = rememberNextSibling;\n\t\t}\n\n\t\tstartNode = startNodeParent;\n\t}\n\treturn startNodeParentClone;\n}\n\n// \t查\n\nexport function getNodeIndexOf(node){\n\tlet childNodes = node.parentNode.childNodes;\n\tfor(let i = 0, len = childNodes.length; i < len; i++){\n\t\tif(node === childNodes[i]){\n\t\t\treturn i;\n\t\t}\n\t}\n}\n\nexport function getNodeStyle(node){\n\tlet style ;\n\tif( node.style.length > 0 ){\n\t\tstyle = {};\n\t\tfor( let i = 0; i < node.style.length; i++ ){\n\t\t\tlet key = node.style[i];\n\t\t\tstyle[key] = node.style[key];\n\t\t}\n\t}\n\treturn style;\n}\n\n\nexport function getBlock(node){\n\tif( !node || !node.nodeType || !node.parentNode){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('getBlock 传参错误');\n\t}\n\tlet root = node,\n\t\t\tparentNode = node.parentNode;\n\twhile( isNotBlock(root) ){\n\t\troot = parentNode;\n\t\tparentNode = root.parentNode;\n\t}\n\treturn root;\n}\n\nexport function getPreBlock(node){\n\tif( !node || !node.nodeType || !node.parentNode){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('getPreBlock 传参错误');\n\t}\n\tif( isBlock(node) ){\n\t\treturn node.previousSibling;\n\t}else{\n\t\tlet root = node,\n\t\t\t\tparentNode = node.parentNode;\n\t\twhile( isNotBlock(root) ){\n\t\t\troot = parentNode;\n\t\t\tparentNode = root.parentNode;\n\t\t}\n\t\treturn root.previousSibling;\n\t}\n}\n\nexport function getNextBlock(node){\n\tif( !node || !node.nodeType || !node.parentNode){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('getNextBlock 传参错误');\n\t}\n\tif( isBlock(node) ){\n\t\treturn node.nextSibling;\n\t}else{\n\t\tlet root = node,\n\t\t\t\tparentNode = node.parentNode;\n\t\twhile( isNotBlock(root) ){\n\t\t\troot = parentNode;\n\t\t\tparentNode = root.parentNode;\n\t\t}\n\t\treturn root.nextSibling;\n\t}\n}\n\nexport function getContainer(node){\n\tif( !node || !node.nodeType || !node.parentNode){\n\t\tconsole.error('node:', node, '\\nnode.nodeType:', node.nodeType, '\\nnode.parentNode:', node.parentNode);\n\t\tthrow new Error('getContainer 传参错误');\n\t}\n\tlet root = node,\n\t\t\tparentNode = node.parentNode;\n\twhile( isNotContainer(root) ){\n\t\troot = parentNode;\n\t\tparentNode = root.parentNode;\n\t}\n\treturn root;\n}\n\nexport function getContainerChildNode(node){\n\tif( !node || !node.nodeType || !node.parentNode || \n\t\t\tisContainer(node)){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('getContainerChildNode 传参错误');\n\t}\n\tlet root = node,\n\t\t\tparentNode = node.parentNode;\n\twhile( isNotContainer(parentNode) ){\n\t\troot = parentNode;\n\t\tparentNode = root.parentNode;\n\t}\n\treturn root;\n}\n\nexport function getSingleNodeInContainer(node){\n\tif( !node || !node.nodeType || !node.parentNode || \n\t\t\tisContainer(node)){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('getSingleNodeInContainer 传参错误');\n\t}\n\tlet root = node,\n\t\t\tparentNode = node.parentNode;\n\twhile( parentNode.childNodes.length === 1\n\t\t\t&& isNotContainer(parentNode) ){\n\t\troot = parentNode;\n\t\tparentNode = root.parentNode;\n\t}\n\treturn root;\n}\n\nexport function getPreNodeInContainer(node){\n\tif( !node || !node.nodeType || !node.parentNode || \n\t\t\tisContainer(node)){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('getPreNodeInContainer 传参错误');\n\t}\n\twhile( !node.previousSibling ){\n\t\tnode = node.parentNode;\n\t\tif( isContainer(node) ){\n\t\t\treturn null;\n\t\t} \n\t}\n\treturn node.previousSibling;\n}\n\nexport function getPreLeafNodeInContainer(node){\n\tlet preNode = getPreNodeInContainer(node);\n\tif( preNode ){\n\t\twhile( preNode.childNodes.length > 0 ){\n\t\t\tpreNode = preNode.childNodes[preNode.childNodes.length - 1];\n\t\t}\n\t\treturn preNode;\n\t}else{\n\t\treturn null;\n\t}\n}\n\nexport function getEndLeafNode(node){\n\twhile( node.childNodes.length > 0 ){\n\t\tnode = node.childNodes[node.childNodes.length - 1];\n\t}\n\treturn node;\n}\n\nexport function getNextNodeInContainer(node){\n\tif( !node || !node.nodeType || !node.parentNode || \n\t\t\tisContainer(node)){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('getNextNodeInContainer 传参错误');\n\t}\n\twhile( !node.nextSibling ){\n\t\tnode = node.parentNode;\n\t\tif( isContainer(node) ){\n\t\t\treturn null;\n\t\t} \n\t}\n\treturn node.nextSibling;\n}\n\nexport function getNextNodeInTopNode(node, topNode){\n\tif( !node || !node.nodeType || !node.parentNode || !topNode.contains(node) ){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('getNextNodeInTopNode 传参错误');\n\t}\n\twhile( !node.nextSibling ){\n\t\tnode = node.parentNode;\n\t\tif( node === topNode ){\n\t\t\treturn null;\n\t\t} \n\t}\n\treturn node.nextSibling;\n}\n\nexport function getNextLeafNodeInContainer(node){\n\tlet nextNode = getNextNodeInContainer(node);\n\tif( nextNode ){\n\t\twhile( nextNode.childNodes.length > 0 ){\n\t\t\tnextNode = nextNode.childNodes[0];\n\t\t}\n\t\treturn nextNode;\n\t}else{\n\t\treturn null;\n\t}\n}\n\nexport function getStartLeafNode(node){\n\twhile( node.childNodes.length > 0 ){\n\t\tnode = node.childNodes[0];\n\t}\n\treturn node;\n}\n\n\n\n","import * as nodeApi from './node.js';\n\n// 判断 range 是否是 container 的开端\nexport function isStartInContainer(node, offset){\n\tif( offset === 0 ){\n\t\tlet parentNode = node.parentNode;\n\t\twhile( nodeApi.isNotContainer(node) ){\n\t\t\tif( parentNode.childNodes[0] !== node ){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tnode = parentNode;\n\t\t\tparentNode = node.parentNode;\n\t\t}\n\t\treturn nodeApi.isStartInContainer(node);\n\t}else{\n\t\treturn false;\n\t}\n}\n\n// 判断 range 是否是 container 的末端\nexport function isEndInContainer(node, offset){\n\tif( node.nodeType === Node.TEXT_NODE ){\n\t\tif( offset !== node.length ){\n\t\t\treturn false;\n\t\t}\n\t}else if( node.nodeType === Node.ELEMENT_NODE ){\n\t\tif( offset !== node.childNodes.length ){\n\t\t\treturn false;\n\t\t}\n\t}\n\tlet parentNode = node.parentNode;\n\twhile( nodeApi.isNotContainer(node) ){\n\t\tlet len = parentNode.childNodes.length;\n\t\tif( parentNode.childNodes[len - 1] !== node ){\n\t\t\treturn false;\n\t\t}\n\t\tnode = parentNode;\n\t\tparentNode = node.parentNode;\n\t}\n\treturn true;\n}\n\nexport function getRange(){\n\tlet selection = document.getSelection();\n\tif( selection.type !== 'None' ){\n\t\treturn selection.getRangeAt(0);\n\t}else{\n\t\treturn null;\n\t}\n}\n\nexport function setRange(startNode, startOffset, endNode, endOffset){\n\tlet range = document.getSelection().getRangeAt(0);\n\t// console.log('startNode:', startNode, '\\nstartOffset:', startOffset, '\\nendNode:', endNode, '\\nendOffset:', endOffset);\n\t// console.log('range.startContainer:', range.startContainer, '\\nrange.startOffset:', range.startOffset, '\\nrange.endContainer:', range.endContainer, '\\nrange.endOffset:', range.endOffset);\n\n\tif( range.startContainer === startNode && range.startOffset === startOffset ){\n\t\tconsole.log('start range 一样不需要设置');\n\t}else{\n\t\trange.setStart(startNode, startOffset);\n\t}\n\tif( range.endContainer === endNode && range.endOffset === endOffset ){\n\t\tconsole.log('end range 一样不需要设置');\n\t}else{\n\t\trange.setEnd(endNode, endOffset);\n\t}\n}\n\nexport function setCollapsedRange(node, offset){\n\tlet range = document.getSelection().getRangeAt(0);\n\t// console.log('%crange setCollapsedRange', 'color: #000000; background-color: #ffffff');\n\t// console.log('node:', node, '\\noffset:', offset);\n\t// console.log('range.startContainer:', range.startContainer, '\\nrange.startOffset:', range.startOffset, '\\nrange.endContainer:', range.endContainer, '\\nrange.endOffset:', range.endOffset);\n\tif( range.startContainer === node && range.startOffset === offset ){\n\t\tconsole.log('start range 一样不需要设置');\n\t}else{\n\t\trange.setStart(node, offset);\n\t}\n\tif( range.endContainer === node && range.endOffset === offset ){\n\t\tconsole.log('end range 一样不需要设置');\n\t}else{\n\t\trange.setEnd(node, offset);\n\t}\n}\n\nexport function setNewRange(startNode, startOffset, endNode, endOffset){\n\tlet \n\t\t\tselection = document.getSelection(),\n\t\t\trange = document.createRange();\n\trange.setStart(startNode, startOffset);\n\trange.setEnd(endNode, endOffset);\n\tselection.removeAllRanges(range);\n\tselection.addRange(range);\n}\n\nexport function setNewCollapsedRange(node, offset){\n\t\tlet \n\t\t\tselection = document.getSelection(),\n\t\t\trange = document.createRange();\n\trange.setStart(node, offset);\n\trange.setEnd(node, offset);\n\tselection.removeAllRanges(range);\n\tselection.addRange(range);\n}\n\n//\t选择 node 节点最开始的位置\nexport function setRangeOfNodeStart(node, isNew){\n\tif( !node || !node.nodeType || !node.parentNode ){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('setRangeOfNodeStart 传参错误');\n\t}\n\twhile( node.childNodes.length > 0 ){\n\t\tnode = node.childNodes[0];\n\t}\n\tif( !node ){\n\t\tconsole.error('node不存在, 请检查组件设计是否正确');\n\t}\n\tlet rangeNode, rangeOffset;\n\tif(node.nodeType === Node.TEXT_NODE){\n\t\trangeNode = node;\n\t\trangeOffset = 0;\n\t}else if(node.nodeType === Node.ELEMENT_NODE){\n\t\trangeNode = node.parentNode;\n\t\trangeOffset = nodeApi.getNodeIndexOf(node);\n\t}else{\n\t\tconsole.error('节点:', node);\n\t\tthrow new Error('没有处理的节点类型');\n\t}\n\tif( isNew ){\n\t\tsetNewCollapsedRange(rangeNode, rangeOffset);\n\t}else{\n\t\tsetCollapsedRange(rangeNode, rangeOffset);\n\t}\n\treturn [rangeNode, rangeOffset];\n}\n\n//\t获取 node 节点最开始的位置\nexport function getRangeOfNodeStart(node){\n\tif( !node || !node.nodeType || !node.parentNode ){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('getRangeOfNodeStart 传参错误');\n\t}\n\twhile( node.childNodes.length > 0 ){\n\t\tnode = node.childNodes[0];\n\t}\n\tif( !node ){\n\t\tconsole.error('node不存在, 请检查组件设计是否正确');\n\t}\n\tlet rangeNode, rangeOffset;\n\tif(node.nodeType === Node.TEXT_NODE){\n\t\trangeNode = node;\n\t\trangeOffset = 0;\n\t}else if(node.nodeType === Node.ELEMENT_NODE){\n\t\trangeNode = node.parentNode;\n\t\trangeOffset = nodeApi.getNodeIndexOf(node);\n\t}else{\n\t\tconsole.error('节点:', node);\n\t\tthrow new Error('没有处理的节点类型');\n\t}\n\treturn [rangeNode, rangeOffset];\n}\n\n//\t选择 node 节点最末端的位置\nexport function setRangeOfNodeEnd(node, isNew){\n\tif( !node || !node.nodeType || !node.parentNode ){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('setRangeOfNodeEnd 传参错误');\n\t}\n\twhile( node.childNodes.length > 0 ){\n\t\tnode = node.childNodes[node.childNodes.length - 1];\n\t}\n\tlet rangeNode, rangeOffset;\n\tif(node.nodeType === Node.TEXT_NODE){\n\t\trangeNode = node;\n\t\trangeOffset = node.length;\n\t}else if(node.nodeType === Node.ELEMENT_NODE){\n\t\trangeNode = node.parentNode;\n\t\trangeOffset = nodeApi.getNodeIndexOf(node) + 1;\n\t}else{\n\t\tconsole.error('节点:', node);\n\t\tthrow new Error('没有处理的节点类型');\n\t}\n\tif( isNew ){\n\t\tsetNewCollapsedRange(rangeNode, rangeOffset);\n\t}else{\n\t\tsetCollapsedRange(rangeNode, rangeOffset);\n\t}\n\treturn [rangeNode, rangeOffset];\n}\n\n//\t获取 node 节点最末端的位置\nexport function getRangeOfNodeEnd(node){\n\tif( !node || !node.nodeType || !node.parentNode ){\n\t\tconsole.error('node:', node);\n\t\tthrow new Error('getRangeOfNodeEnd 传参错误');\n\t}\n\twhile( node.childNodes.length > 0 ){\n\t\tnode = node.childNodes[node.childNodes.length - 1];\n\t}\n\tlet rangeNode, rangeOffset;\n\tif(node.nodeType === Node.TEXT_NODE){\n\t\trangeNode = node;\n\t\trangeOffset = node.length;\n\t}else if(node.nodeType === Node.ELEMENT_NODE){\n\t\trangeNode = node.parentNode;\n\t\trangeOffset = nodeApi.getNodeIndexOf(node) + 1;\n\t}else{\n\t\tconsole.error('节点:', node);\n\t\tthrow new Error('没有处理的节点类型');\n\t}\n\treturn [rangeNode, rangeOffset];\n}\n","export default function deleteForward(node, offset){\n\tconsole.log('%c执行 deleteForward', 'color: #000000; background-color: #ffffff');\n\tconsole.log('node:', node, '\\noffset:', offset);\n\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tblock = nodeApi.getBlock(node);\n\n\tif( node.nodeType === Node.TEXT_NODE ){\n\t\tconsole.log('为 TEXT_NODE');\n\n\t\tlet singleNode = nodeApi.getSingleNodeInContainer(node),\n\t\t\t\tpreNode = nodeApi.getPreNodeInContainer(singleNode),\n\t\t\t\tnextNode = nodeApi.getNextNodeInContainer(singleNode);\n\n\t\tif(offset === 0){\n\t\t\tconsole.log('偏移量为0的特殊位置');\n\t\t\tif( preNode ){\n\t\t\t\tconsole.log('preNode 存在, 当前节点应该为 block 样式, 再次执行 deleteForward');\n\t\t\t\tlet [newNode, newOffset] = rangeApi.getRangeOfNodeEnd(preNode);\n\t\t\t\tdeleteForward.call(this, newNode, newOffset);\n\t\t\t}else{\n\t\t\t\tconsole.log('preNode 存在, 是 container 内的第一个节点');\n\t\t\t\tthis.executeEditorEvent(block, this.eventType.deleteForwardOnStart, [node, offset]);\n\t\t\t}\n\t\t}else if( offset === 1 ){\n\t\t\tconsole.log('偏移量为1的特殊位置');\n\t\t\tif( node.length === 1 ){\n\t\t\t\tconsole.log('删空 text');\n\t\t\t\tdeleteLeafNodeInContainer.call(this, node);\n\t\t\t}else{\n\t\t\t\tconsole.log('删除一个字符');\n\t\t\t\tif( preNode ){\n\t\t\t\t\tconsole.log('跳到前一个节点末端');\n\t\t\t\t\trangeApi.setRangeOfNodeEnd(preNode);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('是 conatiner 内部的第一个叶子节点, 坐标定位到 text 头部');\n\t\t\t\t\trangeApi.setCollapsedRange(node, 0);\n\t\t\t\t}\n\t\t\t\tnode.deleteData(0, 1);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.log('正常删除一个字符');\n\t\t\trangeApi.setCollapsedRange(node, offset - 1);\n\t\t\tnode.deleteData(offset - 1, 1);\n\t\t}\n\t}else if( node.nodeType === Node.ELEMENT_NODE ){\n\t\tconsole.log('为 ELEMENT_NODE');\n\t\tlet element ;\n\t\tif( offset === 0 ){\n\t\t\tif( node.childNodes[0] ){\n\t\t\t\telement = nodeApi.getPreLeafNodeInContainer(node.childNodes[0])\n\t\t\t}\n\t\t}else{\n\t\t\telement = node.childNodes[ offset - 1 ];\n\t\t}\n\n\t\tif( element ){\n\t\t\tconsole.log('element 存在');\n\t\t\tif( element.nodeType === Node.TEXT_NODE ){\n\t\t\t\tconsole.log('element 是 text');\n\t\t\t\trangeApi.setCollapsedRange(element, element.length - 1);\n\t\t\t\telement.deleteData(element.length - 1, 1);\n\t\t\t}else if( element.nodeType === Node.ELEMENT_NODE ){\n\t\t\t\tconsole.log('element 是 元素');\n\t\t\t\tdeleteLeafNodeInContainer.call(this, element);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.log('element 不存在, 是 container 内的第一个节点');\n\t\t\tthis.executeEditorEvent(block, this.eventType.deleteForwardOnStart, [node, offset]);\n\t\t}\n\n\t}else{\n\t\tthrow new Error('deleteForward node 类型未知');\n\t}\n}\n\nexport function deleteLeafNodeInContainer(node){\n\tconsole.log('%cdeleteLeafNodeInContainer 删除元素', 'color: #000000; background-color: #ffffff');\n\tconsole.log('node:', node);\n\tlet \n\t\t\t{ rangeApi, nodeApi } = this,\n\t\t\tsingleNode = nodeApi.getSingleNodeInContainer(node),\n\t\t\tparentNode = singleNode.parentNode,\n\t\t\tpreNode = nodeApi.getPreNodeInContainer(singleNode),\n\t\t\tnextNode = nodeApi.getNextNodeInContainer(singleNode);\n\n\tif( preNode ){//\t前面有节点\n\t\tconsole.log('前面有节点');\n\t\tlet previousSibling = singleNode.previousSibling,\n\t\t\t\tnextSibling = singleNode.nextSibling;\n\t\trangeApi.setRangeOfNodeEnd(preNode);\n\t\tnodeApi.removeNode(singleNode);//\t删除独立节点\n\t\tif( previousSibling && nextSibling ){\n\t\t\tnodeApi.mergeTwoNodes(previousSibling, nextSibling);\n\t\t}\n\t}else{//\t前面没有节点\n\t\tconsole.log('前面没有节点');\n\t\tif( nextNode ){//\t后面有节点\n\t\t\tconsole.log('后面有节点');\n\t\t\trangeApi.setRangeOfNodeStart(nextNode);\n\t\t\tnodeApi.removeNode(singleNode);//删除text关联节点\n\t\t}else{//\t后面没有节点\n\t\t\tconsole.log('后面没有节点');\n\t\t\tif( nodeApi.isContainer(parentNode) ){\n\t\t\t\trangeApi.setCollapsedRange(parentNode, 0);\n\t\t\t\tnodeApi.removeNode(singleNode);\n\t\t\t}else{\n\t\t\t\tthrow new Error('特殊情况,按照常理,前后都没有的话, parentNode 应该是 container,不会打印此信息');\n\t\t\t}\n\t\t}\n\t}\n}\n","\n\nexport default function deleteForwardOnStart(node, offset){\n\tconsole.log('%c执行 deleteForwardOnStart', 'color: #000000; background-color: #ffffff');\n\tconsole.log('node:', node, '\\noffset:', offset);\n\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tcontainer = nodeApi.getContainer(node),\n\t\t\tblock = nodeApi.getBlock(node),\n\t\t\tpreBlock = nodeApi.getPreBlock(block);\n\n\tif( preBlock ){//\t存在前一个 Block\n\t\tconsole.log('存在前一个 Block');\n\t\tif( nodeApi.isEmpty(preBlock) ){\n\t\t\tconsole.log('前一个 Block 为空, 删除前一个 Block, range 不变');\n\t\t\tnodeApi.removeNode(preBlock);\n\t\t}else{\n\t\t\tconsole.log('前一个 Block 不为空');\n\t\t\tlet lastContainer = this.executeHelpEvent(preBlock, this.helpEventType.getLastContainer, [preBlock]);\n\t\t\trangeApi.setRangeOfNodeEnd(lastContainer);\n\t\t\tif( nodeApi.isEmpty(block) ){\n\t\t\t\tconsole.log('当前 Block 为空, 删除当前 Block');\n\t\t\t\tnodeApi.removeNode(block);\n\t\t\t}else{\n\t\t\t\tconsole.log('当前 Block 不为空, 执行 mergeTwoBlocks, 根据不同情况合并两个 Block');\n\t\t\t\tthis.mergeTwoBlocks(preBlock, block);\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.log('不存在前一个 Block , 为第一个 Block , 不做任何操作');\n\t}\n}\n","\nexport default function deleteFragment(startContainer, startOffset, endContainer, endOffset){\n\tconsole.log('%c执行 deleteFragment', 'color: #000000; background-color: #ffffff');\n\tconsole.log('startContainer:', startContainer, '\\nstartOffset:', startOffset, '\\nendContainer:', endContainer, '\\nendOffset:', endOffset);\n\tlet { rangeApi, nodeApi } = this;\n\tif( startContainer && endContainer ){\n\t\tconsole.log('fragment 在 container 中');\n\t\tlet container = nodeApi.getContainer(startContainer);\n\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\tconsole.log('startContainer 光标在 container 最前端');\n\t\t\tif( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainer 光标在 container 最未端, 清空 container');\n\t\t\t\trangeApi.setCollapsedRange(container, 0);\n\t\t\t\tnodeApi.emptyAllChild(container);\n\t\t\t}else{\n\t\t\t\tconsole.log('endContainer 光标不在 container 最未端');\n\t\t\t\tdeleteStartFragment.call(this, container, endContainer, endOffset);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.log('startContainer 光标不在 container 最前端');\n\t\t\tif( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainer 光标在 container 最未端');\n\t\t\t\tdeleteEndFragment.call(this, container, startContainer, startOffset);\n\t\t\t}else{\n\t\t\t\tconsole.log('endContainer 光标不在 container 最未端');\n\t\t\t\tdeleteCenterFragment.call(this, container, startContainer, startOffset, endContainer, endOffset);\n\t\t\t}\n\t\t}\n\t}else if( startContainer ){\n\t\tconsole.log('container 后半部分在 fragment 中, 需要选择 range');\n\t\tlet container = nodeApi.getContainer(startContainer);\n\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\tconsole.log('startContainer 光标在 container 最前端, 清空 container');\n\t\t\tnodeApi.emptyAllChild(container);\n\t\t\trangeApi.setCollapsedRange(container, 0);\n\t\t}else if( rangeApi.isEndInContainer(startContainer, startOffset) ){\n\t\t\tconsole.log('startContainer 光标在 container 最未端, 光标重叠选择 container 最未端');\n\t\t\trangeApi.setCollapsedRange(startContainer, startOffset);\n\t\t}else{\n\t\t\tconsole.log('startContainer 光标在 container 中间');\n\t\t\tdeleteEndFragment.call(this, container, startContainer, startOffset);\n\t\t}\n\t}else if( endContainer ){\n\t\tconsole.log('container 前半部分在 fragment 中, 不需要选择 range');\n\t\tlet container = nodeApi.getContainer(endContainer);\n\t\tif( rangeApi.isStartInContainer(endContainer, endOffset) ){\n\t\t\tconsole.log('endContainer 光标在 container 最前端, 无操作');\n\t\t}else if( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\tconsole.log('endContainer 光标在 container 最未端, 清空 container');\n\t\t\tnodeApi.emptyAllChild(container);\n\t\t}else{\n\t\t\tconsole.log('endContainer 光标在 container 中间');\n\t\t\tdeleteStartFragment.call(this, container, endContainer, endOffset, false);\n\t\t}\n\t}else{\n\t\tconsole.error('startContainer:', startContainer, 'startOffset:', startOffset, 'endContainer:', endContainer, 'endOffset:', endOffset);\n\t\tthrow new Error('不知道的特殊情况');\n\t}\n}\n\nexport function deleteStartFragment(container, endContainer, endOffset, needRange = true){\n\tconsole.log('%c删除 container 开始部分片段', 'color: #000000; background-color: #ffffff');\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tendFragment = nodeApi.splitFromNodeOffsetStillTop(endContainer, endOffset, container);\n\tif( nodeApi.isContainer(endFragment) ){\n\t\tnodeApi.emptyAllChild(container);\n\t\tnodeApi.appendChildren(container, endFragment.childNodes);\n\t\tendFragment = null;\n\t\tif( needRange ){\n\t\t\tconsole.log('进行光标选择');\n\t\t\trangeApi.setRangeOfNodeStart(container);\n\t\t}else{\n\t\t\tconsole.log('不进行光标选择');\n\t\t}\n\t}else{\n\t\tconsole.error('endFragment:', endFragment);\n\t\tthrow new Error('按道理 endFragment 应该是 container');\n\t}\n}\n\nexport function deleteCenterFragment(container, startContainer, startOffset, endContainer, endOffset){\n\tconsole.log('%c删除 container 中间部分片段', 'color: #000000; background-color: #ffffff');\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tendFragment = nodeApi.splitFromNodeOffsetStillTop(endContainer, endOffset, container);\n\n\tdeleteEndFragment.call(this, container, startContainer, startOffset);\n\n\tnodeApi.insertAfter(endFragment, container);\n\tnodeApi.mergeTwoNodes(container, endFragment);\n}\n\nexport function deleteEndFragment(container, startContainer, startOffset, needRange = true){\n\tconsole.log('%c删除 container 结尾部分片段', 'color: #000000; background-color: #ffffff');\n\tlet { rangeApi, nodeApi } = this;\n\t\n\tnodeApi.splitFromNodeOffsetStillTop(startContainer, startOffset, container);\n\tif( needRange ){\n\t\trangeApi.setRangeOfNodeEnd(container);\n\t}\n}\n\n","\n\nexport default function enter(node, offset){\n\tconsole.log('%c执行 enter', 'color: #000000; background-color: #ffffff');\n\tconsole.log('node:', node, '\\noffset:', offset);\n\n\tlet\n\t\t{ rangeApi, nodeApi } = this,\n\t\tcontainer = nodeApi.getContainer(node),\n\t\tsplitedNode = nodeApi.splitFromNodeOffsetStillTop(node, offset, container);\n\n\tconsole.log('splitedNode:', splitedNode);\n\tif( splitedNode ){\n\t\tnodeApi.insertAfter( splitedNode, container );\n\t\tif( splitedNode.childNodes.length ){\n\t\t\trangeApi.setRangeOfNodeStart(splitedNode);\n\t\t}else{\n\t\t\trangeApi.setCollapsedRange(splitedNode, 0);\n\t\t}\n\t}else{\n\t\tlet newContainer = container.cloneNode(false);\n\t\tnodeApi.insertAfter( newContainer, container );\n\t\trangeApi.setCollapsedRange(newContainer, 0);\n\t}\n}","import { deleteStartFragment, deleteEndFragment } from './delete_fragment.js';\n\nexport default function enterFragment(startContainer, startOffset, endContainer, endOffset){\n\tconsole.log('%c执行 enterFragment', 'color: #000000; background-color: #ffffff');\n\tconsole.log('startContainer:', startContainer, '\\nstartOffset:', startOffset, '\\nendContainer:', endContainer, '\\nendOffset:', endOffset);\n\tlet { rangeApi, nodeApi } = this;\n\n\tif( startContainer && endContainer ){\n\t\tconsole.log('fragment 在 container 中');\n\t\tlet container = nodeApi.getContainer(startContainer),\n\t\t\t\tnewContainer = container.cloneNode(false);\n\n\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\tconsole.log('startContainer 光标在 container 最前端');\n\t\t\tif( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainer 光标在 container 最未端, 清空 container');\n\n\t\t\t\tnodeApi.insertAfter( newContainer, container );\n\t\t\t\trangeApi.setCollapsedRange(newContainer, 0);\n\t\t\t\tnodeApi.emptyAllChild(container);\n\t\t\t}else{\n\t\t\t\tconsole.log('endContainer 光标不在 container 最未端');\n\n\t\t\t\tnodeApi.insertBefore( newContainer, container );\n\t\t\t\tdeleteStartFragment.call(this, container, endContainer, endOffset);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.log('startContainer 光标不在 container 最前端');\n\t\t\tif( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainer 光标在 container 最未端');\n\n\t\t\t\tnodeApi.insertAfter( newContainer, container );\n\t\t\t\trangeApi.setCollapsedRange(newContainer, 0);\n\t\t\t\tdeleteEndFragment.call(this, container, startContainer, startOffset, false);\n\t\t\t}else{\n\t\t\t\tconsole.log('endContainer 光标不在 container 最未端');\n\t\t\t\tenterCenterFragment.call(this, container, startContainer, startOffset, endContainer, endOffset);\n\n\t\t\t}\n\n\t\t}\n\t}else if( startContainer ){\n\t\tconsole.log('container 后半部分在 fragment 中, 不需要选择 range');\n\t\tlet container = nodeApi.getContainer(startContainer);\n\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\tconsole.log('startContainer 光标在 container 最前端, 清空 container');\n\t\t\tnodeApi.emptyAllChild(container);\n\t\t}else if( rangeApi.isEndInContainer(startContainer, startOffset) ){\n\t\t\tconsole.log('startContainer 光标在 container 最未端, 无操作');\n\t\t}else{\n\t\t\tconsole.log('startContainer 光标在 container 中间');\n\t\t\tdeleteEndFragment.call(this, container, startContainer, startOffset, false);\n\t\t}\n\t}else if( endContainer ){\n\t\tconsole.log('container 前半部分在 fragment 中, 需要选择 range');\n\t\tlet container = nodeApi.getContainer(endContainer);\n\t\tif( rangeApi.isStartInContainer(endContainer, endOffset) ){\n\t\t\tconsole.log('endContainer 光标在 container 最前端, 光标重叠选择 container 最前端');\n\t\t\tif( endContainer.childNodes.length > 0 ){\n\t\t\t\trangeApi.setRangeOfNodeStart(endContainer);\n\t\t\t}else{\n\t\t\t\trangeApi.setCollapsedRange(endContainer, 0);\n\t\t\t}\n\t\t}else if( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\tconsole.log('endContainer 光标在 container 最未端, 清空 container');\n\t\t\tnodeApi.emptyAllChild(container);\n\t\t\trangeApi.setCollapsedRange(container, 0);\n\t\t}else{\n\t\t\tconsole.log('endContainer 光标在 container 中间');\n\t\t\tdeleteStartFragment.call(this, container, endContainer, endOffset);\n\t\t}\n\t}else{\n\t\tconsole.error('startContainer:', startContainer, 'startOffset:', startOffset, 'endContainer:', endContainer, 'endOffset:', endOffset);\n\t\tthrow new Error('不知道的特殊情况');\n\t}\n}\n\nexport function enterCenterFragment(container, startContainer, startOffset, endContainer, endOffset){\n\tconsole.log('%c删除 container 中间部分片段', 'color: #000000; background-color: #ffffff');\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tendFragment = nodeApi.splitFromNodeOffsetStillTop(endContainer, endOffset, container);\n\n\tdeleteEndFragment.call(this, container, startContainer, startOffset, false);\n\n\tnodeApi.insertAfter(endFragment, container);\n\trangeApi.setRangeOfNodeStart(endFragment);\n}\n","\nimport deleteForward from './delete_forward.js';\nimport deleteForwardOnStart from './delete_forward_on_start.js';\nimport deleteFragment from './delete_fragment.js';\nimport enter from './enter.js';\nimport enterFragment from './enter_fragment.js';\n\n// import deleteBackward from './delete_backward.js';\n\nexport default {\n\tdeleteForward,\n\tdeleteForwardOnStart,\n\tdeleteFragment,\n\tenter,\n\tenterFragment,\n\n\t// deleteBackward,\n}","import paragraphEvent from './event/paragraph_event.js';\n\nexport default {\n\ttype: 'paragraph',\n\tevent: paragraphEvent,\n\ttoDom(obj){\n\t\treturn this.nodeApi.createDom({\n\t\t\tnodeName: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: 'paragraph',\n\t\t\t\t[this.nodeLabel.block]: true,\n\t\t\t\t[this.nodeLabel.container]: true,\n\t\t\t},\n\t\t\tcreated: (paragraph)=>{\n\t\t\t\tif(Array.isArray(obj.data)){\n\t\t\t\t\tobj.data.forEach((child, index, array)=>{\n\t\t\t\t\t\tif( array[index + 1] && array[index + 1].type === child.type && child.type === 'text' ){\n\t\t\t\t\t\t\tconsole.error(child, array[index + 1]);\n\t\t\t\t\t\t\tthrow new Error('存在两个连续的 text');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet childDom = this.objToDom(child);\n\t\t\t\t\t\tif( childDom ){\n\t\t\t\t\t\t\tthis.nodeApi.appendChild(paragraph, childDom);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tconsole.error(child);\n\t\t\t\t\t\t\tthrow new Error('组件读取解析失败');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\ttoObj(dom){\n\t\tlet obj = {\n\t\t\ttype: \"paragraph\",\n\t\t\tdata: []\n\t\t};\n\t\tdom.childNodes.forEach((child, index, array)=>{\n\t\t\tobj.data.push(this.domToObj(child));\n\t\t});\n\t\treturn obj;\n\t},\n\thelpEvent: {\n\t\tgetFirstContainer(paragraph){\n\t\t\treturn paragraph;\n\t\t},\n\t\tgetLastContainer(paragraph){\n\t\t\treturn paragraph;\n\t\t},\n\t\tgetMergeContainer(paragraph){\n\t\t\treturn paragraph;\n\t\t},\n\t\tgetMergedNodes(paragraph){\n\t\t\treturn paragraph.childNodes;\n\t\t},\n\t\tmergedDeleteNode(paragraph){\n\t\t\treturn paragraph;\n\t\t}\n\t}\n}","import paragraphEvent from '../paragraph/event/paragraph_event.js';\n\nexport default {\n\ttype: 'header',\n\tevent: paragraphEvent,\n\ttoDom(obj){\n\t\treturn this.nodeApi.createDom({\n\t\t\tnodeName: obj.level,\n\t\t\tattributes: {\n\t\t\t\tclass: 'header',\n\t\t\t\t[this.nodeLabel.block]: true,\n\t\t\t\t[this.nodeLabel.container]: true,\n\t\t\t},\n\t\t\tcreated: (header)=>{\n\t\t\t\tif(Array.isArray(obj.data)){\n\t\t\t\t\tobj.data.forEach((child, index, array)=>{\n\t\t\t\t\t\tif( array[index + 1] && array[index + 1].type === child.type && child.type === 'text' ){\n\t\t\t\t\t\t\tconsole.error(child, array[index + 1]);\n\t\t\t\t\t\t\tthrow new Error('存在两个连续的 text');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet childDom = this.objToDom(child);\n\t\t\t\t\t\tif( childDom ){\n\t\t\t\t\t\t\tthis.nodeApi.appendChild(header, childDom);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tconsole.error(child);\n\t\t\t\t\t\t\tthrow new Error('组件读取解析失败');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else if( typeof obj.data === 'string' ){\n\t\t\t\t\tthis.nodeApi.appendChild(header, this.nodeApi.createTextNode(obj.data));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\ttoObj(dom){\n\t\tlet obj = {\n\t\t\ttype: 'header',\n\t\t\tlevel: dom.nodeName.toLowerCase()\n\t\t};\n\t\tif(dom.childNodes.length > 1){\n\t\t\tobj.data = [];\n\t\t\tdom.childNodes.forEach((child)=>{\n\t\t\t\tobj.data.push(this.domToObj(child));\n\t\t\t});\n\t\t}else if( dom.childNodes.length === 1 && dom.childNodes[0].nodeType === Node.TEXT_NODE ){\n\t\t\tobj.data = dom.childNodes[0].nodeValue;\n\t\t}else{\n\t\t\tobj.data = '';\n\t\t\t// throw new Error('header 组件转化 dom 为 obj 时出错');\n\t\t}\n\t\treturn obj;\n\t},\n\thelpEvent: {\n\t\tgetFirstContainer(header){\n\t\t\treturn header;\n\t\t},\n\t\tgetLastContainer(header){\n\t\t\treturn header;\n\t\t},\n\t\tgetMergeContainer(header){\n\t\t\treturn header;\n\t\t},\n\t\tgetMergedNodes(header){\n\t\t\treturn header.childNodes;\n\t\t},\n\t\tmergedDeleteNode(header){\n\t\t\treturn header;\n\t\t}\n\t}\n}","\nexport default function deleteForward(node, offset){\n\tconsole.log('%c执行 deleteForward', 'color: #000000; background-color: #ffffff');\n\tconsole.log('node:', node, '\\noffset:', offset);\n\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tblock = nodeApi.getBlock(node),\n\t\t\tpreBlock = nodeApi.getPreBlock(block),\n\t\t\tcontainer = nodeApi.getContainer(node);\n\n\tif( isImgContainer(container) ){\n\t\tconsole.log('在 img_container 中');\n\t\tlet lastContainer = this.executeHelpEvent(preBlock, this.helpEventType.getLastContainer, [preBlock]);\n\t\trangeApi.setRangeOfNodeEnd(lastContainer);\n\t\tif( offset === 0 ){\n\t\t}else if( offset === 1 ){\n\t\t\tnodeApi.removeNode(block);\n\t\t}else{\n\t\t\tthrow new Error('offset 应该是 0 或者 1');\n\t\t}\n\t}else if( isImgTitle(container) ){\n\t\tconsole.log('在 image_title 中');\n\t\tif( node.nodeType === Node.TEXT_NODE ){\n\t\t\tif( nodeApi.isStartInContainer(node) ){\n\t\t\t\tif( offset === 0 ){\n\t\t\t\t\tconsole.log('偏移量为 0');\n\t\t\t\t\trangeApi.setRangeOfNodeEnd(container.previousSibling);\n\t\t\t\t}else{\n\t\t\t\t\tif( offset === 1 && node.length === 1 ){\n\t\t\t\t\t\tconsole.log('删空 text');\n\t\t\t\t\t\trangeApi.setCollapsedRange(container, 0);\n\t\t\t\t\t\tnodeApi.removeNode(node);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('光标进一');\n\t\t\t\t\t\trangeApi.setCollapsedRange(node, offset - 1);\n\t\t\t\t\t\tnode.deleteData(offset - 1, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthrow new Error('node 应该为 container 的第一个节点');\n\t\t\t}\n\t\t}else if( node.nodeType === Node.ELEMENT_NODE ){\n\t\t\tif( offset === 0 ){\n\t\t\t\tconsole.log('偏移量为 0, 移除 image_title');\n\t\t\t\trangeApi.setRangeOfNodeEnd(container.previousSibling);\n\t\t\t\tnodeApi.removeNode(container);\n\t\t\t}else{\n\t\t\t\tthrow new Error('image_title 只有偏移量为 0 ,节点内容为空时, node 类型才会是 ELEMENT_NODE');\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow new Error('image 内不应该有别的类型 container');\n\t}\n}\n\nexport function isImgContainer(container){\n\treturn container.className === 'img_container';\n}\n\nexport function isImgTitle(container){\n\treturn container.className === 'image_title';\n}","import { isImgContainer, isImgTitle } from './delete_forward.js';\n\nexport default function deleteFragment(startContainer, startOffset, endContainer, endOffset){\n\tconsole.log('%c执行 deleteFragment', 'color: #000000; background-color: #ffffff');\n\tconsole.log('startContainer:', startContainer, '\\nstartOffset:', startOffset, '\\nendContainer:', endContainer, '\\nendOffset:', endOffset);\n\tlet { rangeApi, nodeApi } = this;\n\n\tif( startContainer && endContainer ){\n\t\tconsole.log('fragment 在 container 中');\n\t\tlet \n\t\t\t\tblock = nodeApi.getBlock(startContainer),\n\t\t\t\tpreBlock = nodeApi.getPreBlock(block),\n\t\t\t\tstartContainerNode = nodeApi.getContainer(startContainer),\n\t\t\t\tendContainerNode = nodeApi.getContainer(endContainer);\n\n\t\tif( isImgContainer(startContainerNode) ){\n\t\t\tconsole.log('startContainer 在 img_container 中');\n\t\t\tif( startOffset === 0 ){\n\t\t\t\tconsole.log('startOffset 偏移量为 0');\n\t\t\t\tlet lastContainer = this.executeHelpEvent(preBlock, this.helpEventType.getLastContainer, [preBlock]);\n\t\t\t\trangeApi.setRangeOfNodeEnd(lastContainer);\n\t\t\t\tnodeApi.removeNode(block);\n\t\t\t}else if( isImgTitle(endContainerNode) ){\n\t\t\t\tconsole.log('endContainerNode 在 image_title 中');\n\t\t\t\tif( endContainer.nodeType === Node.TEXT_NODE ){\n\t\t\t\t\tconsole.log('endContainer 类型为 TEXT_NODE');\n\t\t\t\t\tif( endOffset === endContainer.length ){\n\t\t\t\t\t\tconsole.log('移除 image_title');\n\t\t\t\t\t\trangeApi.setRangeOfNodeEnd(endContainerNode.previousSibling);\n\t\t\t\t\t\tnodeApi.removeNode(endContainerNode);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('删除 text 部分内容');\n\t\t\t\t\t\trangeApi.setRangeOfNodeEnd(endContainerNode.previousSibling);\n\t\t\t\t\t\tendContainer.deleteData(0, endOffset);\n\t\t\t\t\t}\n\t\t\t\t}else if( endContainer.nodeType === Node.ELEMENT_NODE ){\n\t\t\t\t\tconsole.log('endContainer 类型为 ELEMENT_NODE');\n\t\t\t\t\tif( endContainer === endContainerNode ){\n\t\t\t\t\t\tif( endOffset === 0 ){\n\t\t\t\t\t\t\tif( endContainer.childNodes.length === 0 ){\n\t\t\t\t\t\t\t\tconsole.log('endContainer 节点为空, 移除 image_title');\n\t\t\t\t\t\t\t\trangeApi.setRangeOfNodeEnd(endContainerNode.previousSibling);\n\t\t\t\t\t\t\t\tnodeApi.removeNode(endContainer);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.log('endContainer 存在节点');\n\t\t\t\t\t\t\t\trangeApi.setRangeOfNodeEnd(endContainerNode.previousSibling);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('endContainer:', endContainer, '\\nendContainerNode:', endContainerNode);\n\t\t\t\t\t\tthrow new Error('按道理 endContainer 和 endContainerNode 应该相等');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t\t}\n\t\t}else if( isImgTitle(startContainerNode) ){\n\t\t\tconsole.log('startContainer 在 image_title 中');\n\t\t\tif( isImgTitle(endContainerNode) ){\n\t\t\t\tconsole.log('endContainerNode 在 image_title 中');\n\t\t\t\tif( endContainer.nodeType === Node.TEXT_NODE ){\n\t\t\t\t\tif( startOffset === 0 && endOffset === endContainer.length ){\n\t\t\t\t\t\tconsole.log('删空 text');\n\t\t\t\t\t\trangeApi.setCollapsedRange(endContainerNode, 0);\n\t\t\t\t\t\tnodeApi.removeNode(endContainer);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('删除 text 部分内容');\n\t\t\t\t\t\trangeApi.setCollapsedRange(endContainer, startOffset);\n\t\t\t\t\t\tendContainer.deleteData(startOffset, endOffset - startOffset);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error('目前 image_title 只允许 TEXT_NODE, 应该不会有别的类型节点存在');\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t\t}\n\t\t}else{\n\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t}\n\n\t}else if( startContainer ){\n\t\tconsole.log('container 后半部分在 fragment 中, 需要选择 range');\n\t\tlet \n\t\t\t\tblock = nodeApi.getBlock(startContainer),\n\t\t\t\tpreBlock = nodeApi.getPreBlock(block),\n\t\t\t\tstartContainerNode = nodeApi.getContainer(startContainer);\n\n\t\tif( isImgContainer(startContainerNode) ){\n\t\t\tconsole.log('startContainer 在 img_container 中');\n\t\t\tif( startOffset === 0 ){\n\t\t\t\tconsole.log('startOffset 偏移量为 0, 移除 imageBlock');\n\t\t\t\tlet lastContainer = this.executeHelpEvent(preBlock, this.helpEventType.getLastContainer, [preBlock]);\n\t\t\t\trangeApi.setRangeOfNodeEnd(lastContainer);\n\t\t\t\tnodeApi.removeNode(block);\n\t\t\t}else if( startOffset === 1 ){\n\t\t\t\tconsole.log('startOffset 偏移量为 1');\n\t\t\t\trangeApi.setCollapsedRange(startContainer, startOffset);\n\t\t\t\tif( startContainerNode.nextSibling ){\n\t\t\t\t\tnodeApi.removeNode(startContainerNode.nextSibling);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t\t}\n\t\t}else if( isImgTitle(startContainerNode) ){\n\t\t\tconsole.log('startContainerNode 在 image_title 中');\n\t\t\tif( startContainer.nodeType === Node.TEXT_NODE ){\n\t\t\t\tconsole.log('startContainer 类型为 TEXT_NODE');\n\t\t\t\tif( startOffset === 0 ){\n\t\t\t\t\tconsole.log('startOffset 偏移量为 0, 删空 text');\n\t\t\t\t\trangeApi.setCollapsedRange(startContainerNode, 0);\n\t\t\t\t\tnodeApi.removeNode(startContainer);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('删除 text 部分内容');\n\t\t\t\t\trangeApi.setCollapsedRange(startContainer, startOffset);\n\t\t\t\t\tstartContainer.deleteData(startOffset, startContainer.length - startOffset);\n\t\t\t\t}\n\t\t\t}else if( startContainer.nodeType === Node.ELEMENT_NODE ){\n\t\t\t\tconsole.log('startContainer 类型为 ELEMENT_NODE');\n\t\t\t\tif( startContainer === startContainerNode && startContainer.childNodes.length === 0 && startOffset === 0 ){\n\t\t\t\t\trangeApi.setCollapsedRange(startContainer, startOffset);\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error('startContainer 的节点应该为空, 不应该打印此信息');\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t\t}\n\t\t}else{\n\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t}\n\n\t}else if( endContainer ){\n\t\tconsole.log('container 前半部分在 fragment 中, 不需要选择 range');\n\t\tlet \n\t\t\t\tblock = nodeApi.getBlock(endContainer),\n\t\t\t\tendContainerNode = nodeApi.getContainer(endContainer);\n\t\tif( isImgContainer(endContainerNode) ){\n\t\t\tconsole.log('endContainer 在 img_container 中');\n\t\t\tif( endOffset === 0 ){\n\t\t\t\tconsole.log('endOffset 偏移量为 0, 不操作');\n\t\t\t}else{\n\t\t\t\tconsole.log('移除 imageBlock');\n\t\t\t\tnodeApi.removeNode(block);\n\t\t\t}\n\t\t}else if( isImgTitle(endContainerNode) ){\n\t\t\tconsole.log('endContainer 在 image_title 中, 移除 imageBlock');\n\t\t\tnodeApi.removeNode(block);\n\t\t}\n\t}\n}","import { isImgContainer, isImgTitle } from './delete_forward.js';\nimport { getImageTitleDom } from '../image.js';\n\nexport default function enter(node, offset){\n\tconsole.log('%c执行 enter', 'color: #000000; background-color: #ffffff');\n\tconsole.log('node:', node, '\\noffset:', offset);\n\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tblock = nodeApi.getBlock(node),\n\t\t\tnextBlock = nodeApi.getNextBlock(block),\n\t\t\tcontainer = nodeApi.getContainer(node);\n\n\tif( isImgContainer(container) ){\n\t\tconsole.log('在 img_container 中');\n\t\tif( container.nextSibling ){\n\t\t\tconsole.log('image_title 存在');\n\t\t\tif( offset === 0 ){\n\t\t\t\trangeApi.setRangeOfNodeStart(container.nextSibling);\n\t\t\t}else if( offset === 1 ){\n\t\t\t\trangeApi.setRangeOfNodeEnd(container.nextSibling);\n\t\t\t}else{\n\t\t\t\tthrow new Error('offset 应该是 0 或者 1');\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.log('image_title 不存在, 生产 image_title');\n\t\t\tlet imageTitle = getImageTitleDom.call(this);\n\t\t\tnodeApi.appendChild(block, imageTitle);\n\t\t\trangeApi.setCollapsedRange(imageTitle, 0);\n\t\t}\n\t}else if( isImgTitle(container) ){\n\t\tconsole.log('在 image_title 中');\n\t\tif( nextBlock ){\n\t\t\tlet firstContainer = this.executeHelpEvent(nextBlock, this.helpEventType.getLastContainer, [nextBlock]);\n\t\t\trangeApi.setRangeOfNodeStart(firstContainer);\n\t\t}else{\n\t\t\tlet\tdefaultBlock = this.objToDom(this.defualtBlockObj);\n\t\t\tnodeApi.insertAfter(defaultBlock, block);\n\t\t\trangeApi.setCollapsedRange(defaultBlock, 0);\n\t\t}\n\t}else{\n\t\tthrow new Error('image 内不应该有别的类型 container');\n\t}\n}\n","import { isImgContainer, isImgTitle } from './delete_forward.js';\n\nexport default function enterFragment(startContainer, startOffset, endContainer, endOffset){\n\tconsole.log('%c执行 enterFragment', 'color: #000000; background-color: #ffffff');\n\tconsole.log('startContainer:', startContainer, '\\nstartOffset:', startOffset, '\\nendContainer:', endContainer, '\\nendOffset:', endOffset);\n\tlet { rangeApi, nodeApi } = this;\n\n\tif( startContainer && endContainer ){\n\t\tconsole.log('fragment 在 container 中');\n\t\tlet \n\t\t\t\tblock = nodeApi.getBlock(startContainer),\n\t\t\t\tnextBlock = nodeApi.getNextBlock(block),\n\t\t\t\tstartContainerNode = nodeApi.getContainer(startContainer),\n\t\t\t\tendContainerNode = nodeApi.getContainer(endContainer);\n\n\t\tif( isImgContainer(startContainerNode) ){\n\t\t\tconsole.log('startContainer 在 img_container 中');\n\t\t\tif( startOffset === 0 ){\n\t\t\t\tconsole.log('startOffset 偏移量为 0');\n\t\t\t\tlet firstContainer = this.executeHelpEvent(nextBlock, this.helpEventType.getLastContainer, [nextBlock]);\n\t\t\t\trangeApi.setRangeOfNodeStart(firstContainer);\n\t\t\t\tnodeApi.removeNode(block);\n\t\t\t}else if( isImgTitle(endContainerNode) ){\n\t\t\t\tconsole.log('endContainerNode 在 image_title 中');\n\t\t\t\tif( endContainer.nodeType === Node.TEXT_NODE ){\n\t\t\t\t\tconsole.log('endContainer 类型为 TEXT_NODE');\n\t\t\t\t\tif( endOffset === endContainer.length ){\n\t\t\t\t\t\tconsole.log('移除 image_title');\n\t\t\t\t\t\tlet firstContainer = this.executeHelpEvent(nextBlock, this.helpEventType.getLastContainer, [nextBlock]);\n\t\t\t\t\t\trangeApi.setRangeOfNodeStart(firstContainer);\n\t\t\t\t\t\tnodeApi.removeNode(endContainerNode);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('删除 text 部分内容');\n\t\t\t\t\t\trangeApi.setCollapsedRange(endContainer, endOffset);\n\t\t\t\t\t\tendContainer.deleteData(0, endOffset);\n\t\t\t\t\t}\n\t\t\t\t}else if( endContainer.nodeType === Node.ELEMENT_NODE ){\n\t\t\t\t\tconsole.log('endContainer 类型为 ELEMENT_NODE');\n\t\t\t\t\tif( endContainer === endContainerNode ){\n\t\t\t\t\t\tif( endOffset === 0 ){\n\t\t\t\t\t\t\tif( endContainer.childNodes.length === 0 ){\n\t\t\t\t\t\t\t\tconsole.log('endContainer 节点为空, range 选择 endContainer');\n\t\t\t\t\t\t\t\trangeApi.setCollapsedRange(endContainerNode, 0);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.log('endContainer 存在节点 range 选择 endContainer中的 text 头部');\n\t\t\t\t\t\t\t\trangeApi.setRangeOfNodeStart(endContainerNode);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('endContainer:', endContainer, '\\nendContainerNode:', endContainerNode);\n\t\t\t\t\t\tthrow new Error('按道理 endContainer 和 endContainerNode 应该相等');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t\t}\n\n\t\t}\n\t}else if( startContainer ){\n\t\tconsole.log('container 后半部分在 fragment 中, 不需要选择 range');\n\t\tlet \n\t\t\tblock = nodeApi.getBlock(startContainer),\n\t\t\tstartContainerNode = nodeApi.getContainer(startContainer);\n\n\t\tif( isImgContainer(startContainerNode) ){\n\t\t\tconsole.log('startContainer 在 img_container 中');\n\t\t\tif( startOffset === 0 ){\n\t\t\t\tconsole.log('startOffset 偏移量为 0, 移除 imageBlock');\n\t\t\t\tlet lastContainer = this.executeHelpEvent(preBlock, this.helpEventType.getLastContainer, [preBlock]);\n\t\t\t\tnodeApi.removeNode(block);\n\t\t\t}else if( startOffset === 1 ){\n\t\t\t\tconsole.log('startOffset 偏移量为 1');\n\t\t\t\tif( startContainerNode.nextSibling ){\n\t\t\t\t\tnodeApi.removeNode(startContainerNode.nextSibling);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t\t}\n\t\t}else if( isImgTitle(startContainerNode) ){\n\t\t\tconsole.log('startContainerNode 在 image_title 中');\n\t\t\tif( startContainer.nodeType === Node.TEXT_NODE ){\n\t\t\t\tconsole.log('startContainer 类型为 TEXT_NODE');\n\t\t\t\tif( startOffset === 0 ){\n\t\t\t\t\tconsole.log('startOffset 偏移量为 0, 删除 image_title');\n\t\t\t\t\tnodeApi.removeNode(startContainerNode);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('删除 text 部分内容');\n\t\t\t\t\tstartContainer.deleteData(startOffset, startContainer.length - startOffset);\n\t\t\t\t}\n\t\t\t}else if( startContainer.nodeType === Node.ELEMENT_NODE ){\n\t\t\t\tconsole.log('startContainer 类型为 ELEMENT_NODE 无操作');\n\t\t\t}else{\n\t\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t\t}\n\t\t}else{\n\t\t\tthrow new Error('不知道的情况, 需要完善');\n\t\t}\n\n\t}else if( endContainer ){\n\t\tconsole.log('container 前半部分在 fragment 中, 需要选择 range');\n\t\tlet \n\t\t\tblock = nodeApi.getBlock(endContainer),\n\t\t\tnextBlock = nodeApi.getNextBlock(block),\n\t\t\tendContainerNode = nodeApi.getContainer(endContainer);\n\n\t\tif( isImgContainer(endContainerNode) ){\n\t\t\tconsole.log('endContainer 在 img_container 中');\n\t\t\tif( endOffset === 0 ){\n\t\t\t\tconsole.log('endOffset 偏移量为 0, range 选择 img_container 头部');\n\t\t\t\trangeApi.setRangeOfNodeStart(endContainerNode);\n\t\t\t}else{\n\t\t\t\tconsole.log('移除 imageBlock');\n\t\t\t\tlet firstContainer = this.executeHelpEvent(nextBlock, this.helpEventType.getLastContainer, [nextBlock]);\n\t\t\t\trangeApi.setRangeOfNodeStart(firstContainer);\n\t\t\t\tnodeApi.removeNode(block);\n\t\t\t}\n\t\t}else if( isImgTitle(endContainerNode) ){\n\t\t\tconsole.log('endContainer 在 image_title 中, 移除 imageBlock');\n\t\t\tlet firstContainer = this.executeHelpEvent(nextBlock, this.helpEventType.getLastContainer, [nextBlock]);\n\t\t\trangeApi.setRangeOfNodeStart(firstContainer);\n\t\t\tnodeApi.removeNode(block);\n\t\t}\n\t}\n}","\nimport deleteForward from './delete_forward.js';\nimport deleteFragment from './delete_fragment.js';\nimport enter from './enter.js';\nimport enterFragment from './enter_fragment.js';\n\nexport default {\n\tdeleteForward,\n\tdeleteFragment,\n\tenter,\n\tenterFragment,\n}","import imageEvent from './event/image_event.js';\n\nexport function getImageTitleDom(title){\n\treturn this.nodeApi.createDom({\n\t\tnodeName: 'div',\n\t\tattributes: {\n\t\t\tclass: 'image_title',\n\t\t\t[this.nodeLabel.container]: true\n\t\t},\n\t\tchildren: title\n\t})\n}\n\nexport default {\n\ttype: 'image',\n\tevent: imageEvent,\n\ttoDom(obj){\n\t\tif( obj.isBlock === void 0 ){\n\t\t\tconsole.error('数据待修正', obj);\n\t\t}\n\t\treturn this.nodeApi.createDom({\n\t\t\tnodeName: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: 'image',\n\t\t\t\t[this.nodeLabel.block]: true,\n\t\t\t},\n\t\t\tstyle: obj.imageStyle,\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tnodeName: 'div',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: 'img_container',\n\t\t\t\t\t\t[this.nodeLabel.container]: true,\n\t\t\t\t\t},\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\tnodeName: 'img',\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\tsrc: obj.src,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstyle: obj.imgStyle,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tif: !!obj.title,\n\t\t\t\t\tnodeName: 'div',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: 'image_title',\n\t\t\t\t\t\t[this.nodeLabel.container]: true,\n\t\t\t\t\t},\n\t\t\t\t\tchildren: obj.title\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t},\n\ttoObj(dom){\n\t\tlet \n\t\t\timg = dom.childNodes[0].childNodes[0],\n\t\t\ttitle = dom.childNodes[1],\n\t\t\tobj = {\n\t\t\t\tisBlock: true,\n\t\t\t\ttype: 'image',\n\t\t\t\tsrc: img.src\n\t\t\t},\n\t\t\timageStyle = this.nodeApi.getNodeStyle(dom),\n\t\t\timgStyle = this.nodeApi.getNodeStyle(img);\n\n\t\tif( title ){\n\t\t\tobj.title = title.innerText;\n\t\t}\n\t\tif( imageStyle ){\n\t\t\tobj.imageStyle = imageStyle;\n\t\t}\n\t\tif( imgStyle ){\n\t\t\tobj.imgStyle = imgStyle;\n\t\t}\n\t\treturn obj;\n\t},\n\thelpEvent: {\n\t\tgetFirstContainer(paragraph){\n\t\t\treturn imageBlock.childNodes[0];\n\t\t},\n\t\tgetLastContainer(imageBlock){\n\t\t\treturn imageBlock.childNodes[1];\n\t\t},\n\t\tgetMergeContainer(imageBlock){\n\t\t\treturn false;\n\t\t},\n\t\tgetMergedNodes(imageBlock){\n\t\t\treturn false;\n\t\t},\n\t\tmergedDeleteNode(imageBlock){\n\t\t\treturn false;\n\t\t}\n\t}\n}","\nexport default {\n\ttype: 'code',\n\ttoDom(obj){\n\t\treturn this.nodeApi.createDom({\n\t\t\tnodeName: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: 'code',\n\t\t\t\t[this.nodeLabel.block]: true,\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tnodeName: 'div',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: 'code_container'\n\t\t\t\t\t},\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\tnodeName: 'code',\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t[this.nodeLabel.container]: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstyle: obj.codeStyle,\n\t\t\t\t\t\tchildren: obj.data\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tnodeName: 'div',\n\t\t\t\t\tif: !!obj.title,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: 'code_title',\n\t\t\t\t\t\t[this.nodeLabel.container]: true,\n\t\t\t\t\t},\n\t\t\t\t\tchildren: obj.title\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t},\n\ttoObj(dom){\n\t\tlet \n\t\t\tcodeContainer = dom.childNodes[0],\n\t\t\tcode = codeContainer.childNodes[0],\n\t\t\ttitle = dom.childNodes[1],\n\t\t\tobj = {\n\t\t\t\ttype: 'code',\n\t\t\t\tdata: code.innerText\n\t\t\t},\n\t\t\tcodeStyle = this.nodeApi.getNodeStyle(code);\n\n\t\tif( title ){\n\t\t\tobj.title = title.innerText;\n\t\t}\n\t\tif( codeStyle ){\n\t\t\tobj.codeStyle = codeStyle;\n\t\t}\n\t\treturn obj;\n\t}\n}","import { resetListLabel } from '../list.js';\n\nexport default function deleteForwardOnStart(node, offset){\n\tconsole.log('%c执行 deleteForwardOnStart', 'color: #000000; background-color: #ffffff');\n\tconsole.log('node:', node, '\\noffset:', offset);\n\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tcontainer = nodeApi.getContainer(node),\n\t\t\tblock = nodeApi.getBlock(container),\n\n\t\t\tli = container.parentNode,\n\t\t\tliContent = li.childNodes[1],\n\t\t\tindex = nodeApi.getNodeIndexOf(li);\n\n\tif( li.parentNode.childNodes.length === 1 && liContent.childNodes.length === 0){\n\t\tconsole.log('是 list 中的第一个且最后一个 li, 且 content 为空');\n\t\tlet\tdefaultBlock = this.objToDom(this.defualtBlockObj);\n\n\t\tnodeApi.insertAfter(defaultBlock, block);\n\t\tnodeApi.removeNode(block);\n\t\trangeApi.setCollapsedRange(defaultBlock, 0);\n\t}else if( index === li.parentNode.childNodes.length - 1 && liContent.childNodes.length === 0 ){\n\t\tconsole.log('是 list 中的最后一个 li, 且 content 为空');\n\n\t\trangeApi.setRangeOfNodeEnd(li.previousSibling.childNodes[1]);\n\t\tnodeApi.removeNode(li);\n\n\t}else if( isLabel(container) ){\n\t\tconsole.log('在 label 中');\n\t\tlet li = container.parentNode,\n\t\t\t\tindex = nodeApi.getNodeIndexOf(li);\n\t\tconsole.log('是 list 中的第', index + 1 ,'个 li');\n\t\tif( index === 0 ){\n\n\t\t\tmergeLiToPreBlock.call(this, li);\n\t\t\tif( block.childNodes.length === 0 ){\n\t\t\t\tnodeApi.removeNode(block);\n\t\t\t}\n\t\t}else{\n\t\t\tlet preLiContent = li.previousSibling.childNodes[1],\n\t\t\t\t\tliContent = container.nextSibling;\n\n\t\t\tmergeTwoLi.call(this, preLiContent, liContent);\n\t\t}\n\t}else if( isLiContent(container) ){\n\t\tconsole.log('在 li_content 中');\n\t\tlet li = container.parentNode,\n\t\t\t\tindex = nodeApi.getNodeIndexOf(li);\n\t\tconsole.log('是 list 中的第', index + 1 ,'个 li');\n\t\tif( index === 0 ){\n\n\t\t\tmergeLiToPreBlock.call(this, li);\n\t\t\tif( block.childNodes.length === 0 ){\n\t\t\t\tnodeApi.removeNode(block);\n\t\t\t}\n\t\t}else{\n\t\t\tlet preLiContent = li.previousSibling.childNodes[1],\n\t\t\t\t\tliContent = container;\n\n\t\t\tmergeTwoLi.call(this, preLiContent, liContent);\n\t\t}\n\t}\n\n}\n\nexport function mergeLiToPreBlock(li){\n\tconsole.log('%c执行 mergeLiToPreBlock, 将第一个 li 与 前一个 block 合并', 'color: #000000; background-color: #ffffff');\n\tconsole.log('li:', li);\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tblock = nodeApi.getBlock(li),\n\t\t\tpreBlock = nodeApi.getPreBlock(block);\n\n\tif( preBlock ){\n\t\tconsole.log('存在前一个 block');\n\t\tif( preBlock.childNodes.length > 0 ){\n\t\t\tconsole.log('前一个 block 存在内容节点');\n\t\t\trangeApi.setRangeOfNodeEnd(preBlock);\n\n\t\t\tlet\tpreEnd = preBlock.childNodes[preBlock.childNodes.length - 1],\n\t\t\t\t\tnextStart = li.childNodes[1].childNodes[0];\n\n\t\t\tnodeApi.appendChildren(preBlock, li.childNodes[1].childNodes);\n\t\t\tnodeApi.mergeTwoNodes(preEnd, nextStart);\n\t\t\tnodeApi.removeNode(li);\n\t\t\tresetListLabel(block);\n\t\t}else{\n\t\t\tconsole.log('前一个 block 为空, 直接删除');\n\t\t\tnodeApi.removeNode(preBlock);\n\t\t}\n\t}else{\n\t\tconsole.log('前一个 block 不存在, 无操作');\n\t}\n}\n\nexport function mergeTwoLi(preLiContent, liContent){\n\tconsole.log('%c执行 mergeTwoLi, 合并两个 li', 'color: #000000; background-color: #ffffff');\n\tconsole.log('preLiContent:', preLiContent, 'liContent:', liContent);\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tblock = nodeApi.getBlock(preLiContent)\n\n\tif( preLiContent.childNodes.length > 0 ){\n\t\tconsole.log('前一个 li 的 li_content 存在内容节点');\n\t\tif( liContent.childNodes.length > 0 ){\n\t\t\tconsole.log('当前 li 的 li_content 存在内容节点');\n\t\t\tlet\tpreEnd = preLiContent.childNodes[preLiContent.childNodes.length - 1],\n\t\t\t\t\tnextStart = liContent.childNodes[0];\n\n\t\t\trangeApi.setRangeOfNodeEnd( preLiContent );\n\t\t\tnodeApi.appendChildren(preLiContent, liContent.childNodes);\n\t\t\tnodeApi.mergeTwoNodes(preEnd, nextStart);\n\t\t\tnodeApi.removeNode(liContent.parentNode);\n\n\t\t\tresetListLabel(block);\n\t\t}else{\n\t\t\tconsole.log('当前 li 的 li_content 为空');\n\n\t\t\trangeApi.setRangeOfNodeEnd( preLiContent );\n\t\t\tnodeApi.removeNode(liContent.parentNode);\n\t\t}\n\t}else{\n\t\tconsole.log('前一个 li 的 li_content 为空');\n\t\tif( liContent.childNodes.length > 0 ){\n\t\t\tconsole.log('当前 li 的 li_content 存在内容节点');\n\n\t\t\t// rangeApi.setCollapsedRange(preLiContent, 0);\n\t\t\tnodeApi.appendChildren(preLiContent, liContent.childNodes);\n\t\t\trangeApi.setRangeOfNodeStart(preLiContent);\n\n\t\t\tnodeApi.removeNode(liContent.parentNode);\n\t\t}else{\n\t\t\tconsole.log('当前 li 的 li_content 为空');\n\n\t\t\trangeApi.setCollapsedRange(preLiContent, 0);\n\t\t\tnodeApi.removeNode(liContent.parentNode);\n\t\t}\n\t}\n}\n\nexport function isLabel(container){\n\treturn container.className === 'label';\n}\n\nexport function isLiContent(container){\n\treturn container.className === 'li_content';\n}","import { resetListLabel } from '../list.js';\nimport { isLabel, isLiContent } from './delete_forward_on_start.js'\nimport { deleteStartFragment, deleteCenterFragment, deleteEndFragment } from '../../paragraph/event/delete_fragment.js';\n\nexport default function deleteFragment(startContainer, startOffset, endContainer, endOffset){\n\tconsole.log('%c执行 deleteFragment', 'color: #000000; background-color: #ffffff');\n\tconsole.log('startContainer:', startContainer, '\\nstartOffset:', startOffset, '\\nendContainer:', endContainer, '\\nendOffset:', endOffset);\n\tlet { rangeApi, nodeApi } = this;\n\tif( startContainer && endContainer ){\n\t\tconsole.log('fragment 在 container 中');\n\t\tlet startContainerNode = nodeApi.getContainer(startContainer),\n\t\t\t\tstartContainerNodeLi = startContainerNode.parentNode,\n\t\t\t\tendContainerNode = nodeApi.getContainer(endContainer),\n\t\t\t\tendContainerNodeLi = endContainerNode.parentNode;\n\n\t\tif( startContainerNode === endContainerNode ){\n\t\t\tconsole.log('range 在同一个 container 中');\n\t\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\t\tconsole.log('startContainer 光标在 container 最前端');\n\t\t\t\tif( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\t\tconsole.log('endContainer 光标在 container 最未端, 清空 container');\n\t\t\t\t\trangeApi.setCollapsedRange(startContainerNode, 0);\n\t\t\t\t\tnodeApi.emptyAllChild(startContainerNode);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('endContainer 光标不在 container 最未端');\n\t\t\t\t\tdeleteStartFragment.call(this, endContainerNode, endContainer, endOffset);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.log('startContainer 光标不在 container 最前端');\n\t\t\t\tif( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\t\tconsole.log('endContainer 光标在 container 最未端');\n\t\t\t\t\tdeleteEndFragment.call(this, startContainerNode, startContainer, startOffset);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('endContainer 光标不在 container 最未端');\n\t\t\t\t\tdeleteCenterFragment.call(this, startContainerNode, startContainer, startOffset, endContainer, endOffset);\n\t\t\t\t}\n\t\t\t}\n\t\t}else if( startContainerNodeLi === endContainerNodeLi ){\n\t\t\tconsole.log('range 在不同的 container 中, 但是在同一个 liContainer 中');\n\t\t\tif( isLabel(startContainerNode) && isLiContent(endContainerNode) ){\n\t\t\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\t\t\tconsole.log('startContainer 光标在 label container 最前端, 删空 li label');\n\t\t\t\t\temptyLiLabel.call(this, startContainerNodeLi);\n\t\t\t\t\trangeApi.setCollapsedRange(startContainerNode, 0)\n\t\t\t\t}else if( rangeApi.isEndInContainer(startContainer, startOffset) ){\n\t\t\t\t\tconsole.log('startContainer 光标在 label container 最未端, 无操作');\n\t\t\t\t\trangeApi.setRangeOfNodeEnd(startContainerNode);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('startContainer 光标在 label container 中间');\n\t\t\t\t\tdeleteEndFragment.call(this, startContainerNode, startContainer, startOffset);\n\t\t\t\t}\n\n\t\t\t\tif( rangeApi.isStartInContainer(endContainer, endOffset) ){\n\t\t\t\t\tconsole.log('startContainer 光标在 li container 最前端, 无操作');\n\n\t\t\t\t}else if( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\t\tconsole.log('startContainer 光标在 li container 最未端, 删空 li content');\n\t\t\t\t\temptyLiContent.call(this, startContainerNodeLi);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('endContainer 光标在 li container 中间');\n\t\t\t\t\tdeleteStartFragment.call(this, endContainerNode, endContainer, endOffset, false);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.error('startContainerNode:', startContainerNode, '\\nendContainerNode:', endContainerNode);\n\t\t\t\tthrow new Error('这种情况 startContainer 应该咋 label, endContainer 应该在 liContainer 中, 不应该打印此信息');\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.log('range 在不同的 liContainer 中');\n\t\t\twhile( startContainerNodeLi.nextSibling !== endContainerNodeLi ){\n\t\t\t\tnodeApi.removeNode(startContainerNodeLi.nextSibling);\n\t\t\t}\n\n\t\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\t\tnodeApi.emptyAllChild(startContainerNode);\n\t\t\t\trangeApi.setCollapsedRange(startContainerNode, 0);\n\t\t\t}else if( rangeApi.isEndInContainer(startContainer, startOffset) ){\n\t\t\t\trangeApi.setRangeOfNodeEnd(startContainerNode);\n\t\t\t}else{\n\t\t\t\tdeleteEndFragment.call(this, startContainerNode, startContainer, startOffset);\n\t\t\t}\n\t\t\tif( isLabel(startContainerNode) ){\n\t\t\t\tconsole.log('startContainerNode 是 label');\n\t\t\t\temptyLiContent.call(this, startContainerNodeLi);\n\t\t\t}\n\n\t\t\tif( rangeApi.isStartInContainer(endContainer, endOffset) ){\n\n\t\t\t}else if( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\tnodeApi.emptyAllChild(endContainerNode);\n\t\t\t}else{\n\t\t\t\tdeleteStartFragment.call(this, endContainerNode, endContainer, endOffset, false);\n\t\t\t}\n\n\t\t\tif( isLiContent(endContainerNode) ){\n\t\t\t\tconsole.log('endContainerNode 是 liContainer');\n\t\t\t\temptyLiLabel.call(this, endContainerNodeLi);\n\t\t\t}\n\t\t\tnodeApi.mergeTwoNodes(startContainerNodeLi.childNodes[1], endContainerNodeLi.childNodes[1]);\n\t\t\tnodeApi.removeNode(endContainerNodeLi);\n\t\t}\n\t\tresetListLabel(startContainerNodeLi.parentNode);\n\t}else if( startContainer ){\n\t\tconsole.log('container 后半部分在 fragment 中, 需要选择 range');\n\t\tlet startContainerNode = nodeApi.getContainer(startContainer),\n\t\t\t\tstartContainerNodeLi = startContainerNode.parentNode;\n\n\t\twhile( startContainerNodeLi.nextSibling ){\n\t\t\tnodeApi.removeNode(startContainerNodeLi.nextSibling);\n\t\t}\n\n\t\tif( isLabel(startContainerNode) ){\n\t\t\tconsole.log('startContainerNode 是 label');\n\t\t\temptyLiContent.call(this, startContainerNodeLi);\n\t\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\t\tconsole.log('startContainer 光标在 container 最前端');\n\t\t\t\temptyLiLabel.call(this, startContainerNodeLi);\n\t\t\t\trangeApi.setCollapsedRange(startContainerNode, 0);\n\t\t\t}else if( rangeApi.isEndInContainer(startContainer, startOffset) ){\n\t\t\t\tconsole.log('startContainer 光标在 container 最未端');\n\t\t\t\trangeApi.setRangeOfNodeEnd(startContainerNode);\n\t\t\t}else{\n\t\t\t\tconsole.log('startContainer 光标在 container 中间');\n\t\t\t\tdeleteEndFragment.call(this, startContainerNode, startContainer, startOffset);\n\t\t\t}\n\t\t}else if(isLiContent(startContainerNode)){\n\t\t\tconsole.log('startContainerNode 是 liContainer');\n\t\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\t\tconsole.log('startContainer 光标在 container 最前端');\n\t\t\t\temptyLiContent.call(this, startContainerNodeLi);\n\t\t\t\trangeApi.setCollapsedRange(startContainerNode, 0);\n\t\t\t}else if( rangeApi.isEndInContainer(startContainer, startOffset) ){\n\t\t\t\tconsole.log('startContainer 光标在 container 最未端');\n\t\t\t\trangeApi.setRangeOfNodeEnd(startContainerNode);\n\t\t\t}else{\n\t\t\t\tconsole.log('startContainer 光标在 container 中间');\n\t\t\t\tdeleteEndFragment.call(this, startContainerNode, startContainer, startOffset);\n\t\t\t}\n\t\t}\n\n\t}else if( endContainer ){\n\t\tconsole.log('container 前半部分在 fragment 中, 不需要选择 range');\n\t\tlet endContainerNode = nodeApi.getContainer(endContainer),\n\t\t\t\tendContainerNodeLi = endContainerNode.parentNode;\n\n\t\twhile( endContainerNodeLi.previousSibling ){\n\t\t\tnodeApi.removeNode(endContainerNodeLi.previousSibling);\n\t\t}\n\n\t\tif( isLabel(endContainerNode) ){\n\t\t\tconsole.log('endContainerNode 是 label');\n\t\t\tif( rangeApi.isStartInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainerNode 光标在 container 最前端');\n\t\t\t}else if( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainerNode 光标在 container 最未端');\n\t\t\t\temptyLiLabel.call(this, endContainerNodeLi);\n\t\t\t}else{\n\t\t\t\tconsole.log('endContainerNode 光标在 container 中间');\n\t\t\t\tdeleteStartFragment.call(this, endContainerNode, endContainer, endOffset, false);\n\t\t\t}\n\t\t}else if( isLiContent(endContainerNode) ){\n\t\t\tconsole.log('endContainerNode 是 liContainer');\n\t\t\temptyLiLabel.call(this, endContainerNodeLi);\n\t\t\tif( rangeApi.isStartInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainerNode 光标在 container 最前端');\n\n\t\t\t}else if( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainerNode 光标在 container 最未端');\n\t\t\t\temptyLiContent.call(this, endContainerNodeLi);\n\t\t\t}else{\n\t\t\t\tconsole.log('endContainerNode 光标在 container 中间');\n\t\t\t\tdeleteStartFragment.call(this, endContainerNode, endContainer, endOffset, false);\n\t\t\t}\n\t\t}\n\n\n\t}else{\n\t\tconsole.error('startContainer:', startContainer, 'startOffset:', startOffset, 'endContainer:', endContainer, 'endOffset:', endOffset);\n\t\tthrow new Error('不知道的特殊情况');\n\t}\n}\n\nexport function emptyLi(li){\n\tthis.nodeApi.emptyAllChild(li.childNodes[0]);\n\tthis.nodeApi.emptyAllChild(li.childNodes[1]);\n}\n\nexport function emptyLiContent(li){\n\tthis.nodeApi.emptyAllChild(li.childNodes[1]);\n}\n\nexport function emptyLiLabel(li){\n\tthis.nodeApi.emptyAllChild(li.childNodes[0]);\n}\n\n\n","import { getEmptyLiDom, resetListLabel } from '../list.js';\nimport { isLabel, isLiContent } from './delete_forward_on_start.js'\n\nexport default function enter(node, offset){\n\tconsole.log('%c执行 enter', 'color: #000000; background-color: #ffffff');\n\tconsole.log('node:', node, '\\noffset:', offset);\n\n\tlet { rangeApi, nodeApi } = this,\n\t\t\tcontainer = nodeApi.getContainer(node),\n\t\t\tli = container.parentNode,\n\t\t\tliContent = li.childNodes[1],\n\t\t\tindex = nodeApi.getNodeIndexOf(li),\n\n\t\t\tblock = nodeApi.getBlock(container),\n\t\t\tnewLi = getEmptyLiDom.call(this, block.getAttribute('label')),\n\t\t\tnewLiContent = newLi.childNodes[1];\n\n\t// console.log('index:', index);\n\t// console.log('li.parentNode.childNodes.length:', li.parentNode.childNodes.length);\n\t// console.log('index === li.parentNode.childNodes.length - 1:', index === li.parentNode.childNodes.length - 1);\n\n\tif( index === li.parentNode.childNodes.length - 1 && liContent.childNodes.length === 0 ){\n\t\tconsole.log('是 list 中的最后一个 li, 且 content 为空');\n\n\t\tlet\tdefaultBlock = this.objToDom(this.defualtBlockObj);\n\n\t\tnodeApi.removeNode(li);\n\t\tnodeApi.insertAfter(defaultBlock, block);\n\t\trangeApi.setCollapsedRange(defaultBlock, 0);\n\n\t}else if( isLabel(container) ){\n\t\tconsole.log('在 label 中, 无操作');\n\t}else if( isLiContent(container) ){\n\t\tconsole.log('在 liContent 中');\n\t\tif( rangeApi.isStartInContainer(node, offset) ){\n\t\t\tconsole.log('在 liContent 头部');\n\n\t\t\tnodeApi.insertBefore( newLi, li );\n\t\t}else if( rangeApi.isEndInContainer(node, offset) ){\n\t\t\tconsole.log('在 liContent 末端');\n\n\t\t\tnodeApi.insertAfter(newLi, li);\n\t\t\trangeApi.setCollapsedRange(newLiContent, 0);\n\t\t}else{\n\t\t\tconsole.log('需要拆分 liContent:', liContent);\n\n\t\t\tlet splitedNode = nodeApi.splitFromNodeOffsetStillTop(node, offset, liContent);\n\n\t\t\tnodeApi.appendChildren( newLiContent, splitedNode.childNodes );\n\t\t\tnodeApi.insertAfter(newLi, li);\n\t\t\trangeApi.setRangeOfNodeStart(newLiContent);\n\t\t}\n\t}\n\tresetListLabel(block);\n}","import { getEmptyLiDom, resetListLabel } from '../list.js';\nimport { isLabel, isLiContent } from './delete_forward_on_start.js'\nimport { emptyLiContent, emptyLiLabel, emptyLi } from './delete_fragment.js';\nimport { deleteStartFragment, deleteCenterFragment, deleteEndFragment } from '../../paragraph/event/delete_fragment.js';\n\nexport default function enterFragment(startContainer, startOffset, endContainer, endOffset){\n\tconsole.log('%c执行 enterFragment', 'color: #000000; background-color: #ffffff');\n\tconsole.log('startContainer:', startContainer, '\\nstartOffset:', startOffset, '\\nendContainer:', endContainer, '\\nendOffset:', endOffset);\n\tlet { rangeApi, nodeApi } = this;\n\n\tif( startContainer && endContainer ){\n\t\tconsole.log('fragment 在 container 中');\n\t\tlet startContainerNode = nodeApi.getContainer(startContainer),\n\t\t\t\tstartContainerNodeLi = startContainerNode.parentNode,\n\t\t\t\tendContainerNode = nodeApi.getContainer(endContainer),\n\t\t\t\tendContainerNodeLi = endContainerNode.parentNode,\n\n\t\t\t\tli = startContainerNode.parentNode,\n\t\t\t\tliContent = li.childNodes[1], \n\n\t\t\t\tblock = nodeApi.getBlock(li),\n\t\t\t\tnewLi = getEmptyLiDom.call(this, block.getAttribute('label')),\n\t\t\t\tnewLiContent = newLi.childNodes[1];\n\n\t\tif( startContainerNode === endContainerNode ){\n\t\t\tconsole.log('range 在同一个 container 中');\n\t\t\tnodeApi.insertAfter( newLi, li );\n\t\t\tresetListLabel(block);\n\t\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\t\tconsole.log('startContainer 光标在 container 最前端');\n\t\t\t\tif( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\t\tconsole.log('endContainer 光标在 container 最未端, 清空 container');\n\t\t\t\t\tnodeApi.emptyAllChild(liContent);\n\t\t\t\t\trangeApi.setCollapsedRange(newLiContent, 0);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('endContainer 光标不在 container 最未端');\n\t\t\t\t\tdeleteStartFragment.call(this, endContainerNode, endContainer, endOffset, false);\n\n\t\t\t\t\tnodeApi.appendChildren( newLiContent, liContent.childNodes );\n\t\t\t\t\trangeApi.setRangeOfNodeStart(newLiContent);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.log('startContainer 光标不在 container 最前端');\n\t\t\t\tif( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\t\tconsole.log('endContainer 光标在 container 最未端');\n\t\t\t\t\tdeleteEndFragment.call(this, startContainerNode, startContainer, startOffset, false);\n\n\t\t\t\t\tresetListLabel(block);\n\t\t\t\t\trangeApi.setCollapsedRange(newLiContent, 0);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('endContainer 光标不在 container 最未端');\n\n\t\t\t\t\tlet splitedNode = nodeApi.splitFromNodeOffsetStillTop(endContainer, endOffset, endContainerNode);\n\t\t\t\t\tnodeApi.splitFromNodeOffsetStillTop(startContainer, startOffset, startContainerNode);\n\n\t\t\t\t\tnodeApi.appendChildren( newLiContent, splitedNode.childNodes );\n\t\t\t\t\trangeApi.setRangeOfNodeStart(newLiContent);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}else if( startContainerNodeLi === endContainerNodeLi ){\n\t\t\tconsole.log('range 在不同的 container 中, 但是在同一个 liContainer 中');\n\n\t\t\tnodeApi.insertAfter( newLi, li );\n\t\t\tresetListLabel(block);\n\t\t\tif( isLabel(startContainerNode) && isLiContent(endContainerNode) ){\n\t\t\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\t\t\tconsole.log('startContainer 光标在 label container 最前端, 删空 li label');\n\t\t\t\t\temptyLiLabel.call(this, startContainerNode);\n\t\t\t\t}else if( rangeApi.isEndInContainer(startContainer, startOffset) ){\n\t\t\t\t\tconsole.log('startContainer 光标在 label container 最未端, 无操作');\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('startContainer 光标在 label container 中间');\n\t\t\t\t\tdeleteEndFragment.call(this, startContainerNode, startContainer, startOffset);\n\t\t\t\t}\n\n\t\t\t\tif( rangeApi.isStartInContainer(endContainer, endOffset) ){\n\t\t\t\t\tconsole.log('endContainer 光标在 li container 最前端');\n\n\t\t\t\t\tnodeApi.appendChildren( newLiContent, liContent.childNodes );\n\t\t\t\t\trangeApi.setRangeOfNodeStart(newLiContent);\n\n\t\t\t\t}else if( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\t\tconsole.log('startContainer 光标在 li container 最未端');\n\n\t\t\t\t\tnodeApi.emptyAllChild(liContent);\n\t\t\t\t\trangeApi.setCollapsedRange(newLiContent, 0);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('endContainer 光标在 li container 中间');\n\t\t\t\t\t// deleteStartFragment.call(this, endContainerNode, endContainer, endOffset, false);\n\n\t\t\t\t\tlet splitedNode = nodeApi.splitFromNodeOffsetStillTop(endContainer, endOffset, endContainerNode);\n\t\t\t\t\tnodeApi.emptyAllChild(liContent);\n\n\t\t\t\t\tnodeApi.appendChildren( newLiContent, splitedNode.childNodes );\n\t\t\t\t\trangeApi.setRangeOfNodeStart(newLiContent);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.error('startContainerNode:', startContainerNode, '\\nendContainerNode:', endContainerNode);\n\t\t\t\tthrow new Error('这种情况 startContainer 应该咋 label, endContainer 应该在 liContainer 中, 不应该打印此信息');\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.log('range 在不同的 liContainer 中');\n\n\t\t\twhile( startContainerNodeLi.nextSibling !== endContainerNodeLi ){\n\t\t\t\tnodeApi.removeNode(startContainerNodeLi.nextSibling);\n\t\t\t}\n\n\t\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\t\tnodeApi.emptyAllChild(startContainerNode);\n\t\t\t}else if( rangeApi.isEndInContainer(startContainer, startOffset) ){\n\t\t\t}else{\n\t\t\t\tdeleteEndFragment.call(this, startContainerNode, startContainer, startOffset, false);\n\t\t\t}\n\t\t\tif( isLabel(startContainerNode) ){\n\t\t\t\tconsole.log('startContainerNode 是 label');\n\t\t\t\temptyLiContent.call(this, startContainerNodeLi);\n\t\t\t}\n\n\t\t\tif( rangeApi.isStartInContainer(endContainer, endOffset) ){\n\t\t\t\trangeApi.setRangeOfNodeStart(endContainerNode);\n\t\t\t}else if( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\tnodeApi.emptyAllChild(endContainerNode);\n\t\t\t\trangeApi.setCollapsedRange(endContainerNode, 0);\n\t\t\t}else{\n\t\t\t\tdeleteStartFragment.call(this, endContainerNode, endContainer, endOffset);\n\t\t\t\t// rangeApi.setRangeOfNodeStart(endContainerNode);\n\t\t\t}\n\t\t\tif( isLiContent(endContainerNode) ){\n\t\t\t\tconsole.log('endContainerNode 是 liContainer');\n\t\t\t\temptyLiLabel.call(this, endContainerNodeLi);\n\t\t\t}\n\t\t}\n\n\t}else if( startContainer ){\n\t\tconsole.log('container 后半部分在 fragment 中, 不需要选择 range');\n\t\tlet startContainerNode = nodeApi.getContainer(startContainer),\n\t\t\t\tstartContainerNodeLi = startContainerNode.parentNode;\n\n\t\twhile( startContainerNodeLi.nextSibling ){\n\t\t\tnodeApi.removeNode(startContainerNodeLi.nextSibling);\n\t\t}\n\n\t\tif( isLabel(startContainerNode) ){\n\t\t\tconsole.log('startContainerNode 是 label');\n\t\t\temptyLiContent.call(this, startContainerNodeLi);\n\t\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\t\tconsole.log('startContainer 光标在 container 最前端');\n\t\t\t\temptyLiLabel.call(this, startContainerNodeLi);\n\t\t\t}else if( rangeApi.isEndInContainer(startContainer, startOffset) ){\n\t\t\t\tconsole.log('startContainer 光标在 container 最未端');\n\t\t\t}else{\n\t\t\t\tconsole.log('startContainer 光标在 container 中间');\n\t\t\t\tdeleteEndFragment.call(this, startContainerNode, startContainer, startOffset);\n\t\t\t}\n\t\t}else if(isLiContent(startContainerNode)){\n\t\t\tconsole.log('startContainerNode 是 liContainer');\n\t\t\tif( rangeApi.isStartInContainer(startContainer, startOffset) ){\n\t\t\t\tconsole.log('startContainer 光标在 container 最前端');\n\t\t\t\temptyLiContent.call(this, startContainerNodeLi);\n\t\t\t}else if( rangeApi.isEndInContainer(startContainer, startOffset) ){\n\t\t\t\tconsole.log('startContainer 光标在 container 最未端');\n\t\t\t}else{\n\t\t\t\tconsole.log('startContainer 光标在 container 中间');\n\t\t\t\tdeleteEndFragment.call(this, startContainerNode, startContainer, startOffset, false);\n\t\t\t}\n\t\t}\n\n\t}else if( endContainer ){\n\t\tconsole.log('container 前半部分在 fragment 中, 需要选择 range');\n\t\tlet endContainerNode = nodeApi.getContainer(endContainer),\n\t\t\t\tendContainerNodeLi = endContainerNode.parentNode;\n\n\t\twhile( endContainerNodeLi.previousSibling ){\n\t\t\tnodeApi.removeNode(endContainerNodeLi.previousSibling);\n\t\t}\n\n\t\tif( isLabel(endContainerNode) ){\n\t\t\tconsole.log('endContainerNode 是 label');\n\t\t\tif( rangeApi.isStartInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainerNode 光标在 container 最前端');\n\t\t\t\tif( endContainerNode.childNodes.length ){\n\t\t\t\t\trangeApi.setRangeOfNodeStart(endContainerNode);\n\t\t\t\t}else{\n\t\t\t\t\trangeApi.setCollapsedRange(endContainerNode, 0);\n\t\t\t\t}\n\t\t\t}else if( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainerNode 光标在 container 最未端');\n\t\t\t\temptyLiLabel.call(this, endContainerNodeLi);\n\t\t\t\trangeApi.setCollapsedRange(endContainerNode, 0);\n\t\t\t}else{\n\t\t\t\tconsole.log('endContainerNode 光标在 container 中间');\n\t\t\t\tdeleteStartFragment.call(this, endContainerNode, endContainer, endOffset);\n\t\t\t}\n\t\t}else if( isLiContent(endContainerNode) ){\n\t\t\tconsole.log('endContainerNode 是 liContainer');\n\t\t\temptyLiLabel.call(this, endContainerNodeLi);\n\t\t\tif( rangeApi.isStartInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainerNode 光标在 container 最前端');\n\t\t\t\tif( endContainerNode.childNodes.length ){\n\t\t\t\t\trangeApi.setRangeOfNodeStart(endContainerNode);\n\t\t\t\t}else{\n\t\t\t\t\trangeApi.setCollapsedRange(endContainerNode, 0);\n\t\t\t\t}\n\t\t\t}else if( rangeApi.isEndInContainer(endContainer, endOffset) ){\n\t\t\t\tconsole.log('endContainerNode 光标在 container 最未端');\n\t\t\t\temptyLiContent.call(this, endContainerNodeLi);\n\t\t\t\trangeApi.setCollapsedRange(endContainerNode, 0);\n\t\t\t}else{\n\t\t\t\tconsole.log('endContainerNode 光标在 container 中间');\n\t\t\t\tdeleteStartFragment.call(this, endContainerNode, endContainer, endOffset);\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error('startContainer:', startContainer, 'startOffset:', startOffset, 'endContainer:', endContainer, 'endOffset:', endOffset);\n\t\tthrow new Error('不知道的特殊情况');\n\t}\n}","\nimport deleteForward from '../../paragraph/event/delete_forward.js';\nimport deleteForwardOnStart from './delete_forward_on_start.js'\nimport deleteFragment from './delete_fragment.js';\nimport enter from './enter.js';\nimport enterFragment from './enter_fragment.js';\n\n// import deleteBackward from './delete_backward.js';\n\nexport default {\n\tdeleteForward,\n\tdeleteForwardOnStart,\n\tdeleteFragment,\n\tenter,\n\tenterFragment,\n\n\t// deleteBackward,\n}","import listEvent from './event/list_event.js';\n\nexport default {\n\ttype: 'list',\n\tevent: listEvent,\n\ttoDom(obj){\n\t\treturn this.nodeApi.createDom({\n\t\t\tnodeName: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: 'list',\n\t\t\t\tlabel: Array.isArray(obj.label) ? 'custom' : obj.label,\n\t\t\t\t[this.nodeLabel.block]: true,\n\t\t\t},\n\t\t\tchildren: obj.data.map((li, index)=>{\n\t\t\t\treturn createLiDomObj.call(this, obj.label, index, li);\n\t\t\t})\n\t\t});\n\t},\n\ttoObj(dom){\n\t\tlet\n\t\t\tobj = {\n\t\t\t\ttype: 'list',\n\t\t\t\tlabel: dom.getAttribute('label'),\n\t\t\t\tdata: []\n\t\t\t};\n\n\t\tif( obj.label === 'custom' ){\n\t\t\tobj.label = [];\n\t\t}\n\t\t\n\t\tdom.childNodes.forEach((item)=>{\n\t\t\tlet container = [];\n\n\t\t\tif( Array.isArray(obj.label) ){\n\t\t\t\tobj.label.push(item.childNodes[0].innerText);\n\t\t\t}\n\t\t\titem.childNodes[1].childNodes.forEach((child)=>{\n\t\t\t\tcontainer.push(this.domToObj(child));\n\t\t\t});\n\n\t\t\tobj.data.push(container);\n\t\t});\n\t\treturn obj;\n\t},\n\thelpEvent: {\n\t\tgetFirstContainer(listBlock){\n\t\t\t// console.log('listBlock:', listBlock);\n\t\t\treturn listBlock.childNodes[0].childNodes[1];\n\t\t},\n\t\tgetLastContainer(listBlock){\n\t\t\t// console.log('listBlock:', listBlock);\n\t\t\t// console.log('listBlock.childNodes[listBlock.childNodes.length - 1].childNodes[1]:', listBlock.childNodes[listBlock.childNodes.length - 1].childNodes[1]);\n\t\t\treturn listBlock.childNodes[listBlock.childNodes.length - 1].childNodes[1];\n\t\t},\n\t\tgetMergeContainer(listBlock){\n\t\t\t// return paragraph;\n\t\t\treturn listBlock.childNodes[listBlock.childNodes.length - 1].childNodes[1];\n\t\t},\n\t\tgetMergedNodes(listBlock){\n\t\t\t// return paragraph.childNodes;\n\t\t\treturn listBlock.childNodes[0].childNodes[1].childNodes;\n\t\t},\n\t\tmergedDeleteNode(listBlock){\n\t\t\tif( listBlock.childNodes.length > 1 ){\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tresetListLabel(listBlock);\n\t\t\t\t}, 0);\n\t\t\t\treturn listBlock.childNodes[0];\n\t\t\t}else{\n\t\t\t\treturn listBlock;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction createLiDomObj(label, index, li){\n\treturn {\n\t\tnodeName: 'div',\n\t\tattributes: {\n\t\t\tclass: 'li',\n\t\t},\n\t\tchildren: [\n\t\t\t{\n\t\t\t\tnodeName: 'div',\n\t\t\t\tattributes: {\n\t\t\t\t\tclass: 'label',\n\t\t\t\t\tcontenteditable: Array.isArray(label) || label === 'custom' ? null : false,\n\t\t\t\t\t[this.nodeLabel.container]: Array.isArray(label) || label === 'custom' ? true : null\n\t\t\t\t},\n\t\t\t\tchildren: getLabel(index, label)\n\t\t\t},\n\t\t\t{\n\t\t\t\tnodeName: 'div',\n\t\t\t\tattributes: {\n\t\t\t\t\tclass: 'li_content',\n\t\t\t\t\t[this.nodeLabel.container]: true\n\t\t\t\t},\n\t\t\t\tcreated: (container)=>{\n\t\t\t\t\tif( Array.isArray(li) ){\n\t\t\t\t\t\tli.forEach((child)=>{\n\t\t\t\t\t\t\tlet childDom = this.objToDom(child);\n\t\t\t\t\t\t\tif( childDom ){\n\t\t\t\t\t\t\t\tcontainer.appendChild( childDom );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t}\n}\n\nexport function getEmptyLiDom(labelType){\n\treturn this.nodeApi.createDom({\n\t\t\tnodeName: 'div',\n\t\t\tattributes: {\n\t\t\t\tclass: 'li',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tnodeName: 'div',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: 'label',\n\t\t\t\t\t\tcontenteditable: labelType === 'custom' ? true : 'false',\n\t\t\t\t\t\t[this.nodeLabel.container]: labelType === 'custom' ? true : null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tnodeName: 'div',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tclass: 'li_content',\n\t\t\t\t\t\t[this.nodeLabel.container]: true\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t]\n\t});\n}\n\nexport function getLabel(index, label){\n\tif( label === 'disorderly' ){\n\t\treturn '·'\n\t}else if( label === 'english' ){\n\t\treturn String.fromCharCode(97 + index) + '.';\n\t}else if( label === 'English' ){\n\t\treturn String.fromCharCode(65 + index) + '.';\n\t}else if( label === 'number' ){\n\t\treturn 1 + index + '.';\n\t}else if( Array.isArray(label) ){\n\t\treturn label[index];\n\t}else if( label === 'custom' ){\n\t\treturn '';\n\t}\n}\n\nexport function resetListLabel(block, labelType){\n\tconsole.log('resetListLabel block:', block, '\\nlabelType:', labelType);\n\tlet oldLabelType;\n\tif( labelType ){\n\t\toldLabelType = block.getAttribute('label');\n\t\tblock.setAttribute('label', labelType);\n\t}else{\n\t\tlabelType = block.getAttribute('label');\n\t}\n\tif( labelType === 'custom' ){\n\t\tblock.childNodes.forEach((li, index)=>{\n\t\t\tlet label = li.childNodes[0];\n\t\t\tlabel.setAttribute('container', true);\n\t\t\tlabel.contentEditable = true;\n\t\t\tif( oldLabelType && oldLabelType !== \"custom\" ){\n\t\t\t\tfor( let i = label.childNodes.length - 1; i >=0; i-- ){\n\t\t\t\t\tlabel.removeChild(label.childNodes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}else{\n\t\tblock.childNodes.forEach((li, index)=>{\n\t\t\tif( oldLabelType === 'custom' ){\n\t\t\t\tlet label = li.childNodes[0];\n\t\t\t\tlabel.removeAttribute('container');\n\t\t\t\tlabel.contentEditable = false;\n\t\t\t}\n\t\t\tli.childNodes[0].innerText = getLabel(index, labelType)\n\t\t});\n\t}\n}","\nexport default {\n\ttype: 'text',\n\ttoDom(obj){\n\t\tif( obj.data.indexOf('\\\\n') > -1 ){\n\t\t\tconsole.error(data);\n\t\t\tthrow new Error('text 内存在换行信息');\n\t\t}\n\t\tif( obj.data === ' ' ){\n\t\t\tconsole.error('存在空字符串');\n\t\t}\n\t\treturn this.nodeApi.createTextNode(obj.data);\n\t},\n\ttoObj(dom){\n\t\treturn {\n\t\t\ttype: \"text\",\n\t\t\tdata: dom.nodeValue\n\t\t}\n\t}\n}","export default {\n\ttype: 'mathjax',\n\ttoDom(obj){\n\t\tif( obj.style ){\n\t\t\t// console.log('obj:', obj);\n\t\t\tdelete obj.style.height;\n\t\t}\n\t\treturn this.nodeApi.createDom({\n\t\t\tnodeName: 'img',\n\t\t\tattributes: {\n\t\t\t\tclass: 'mathjax',\n\t\t\t\ttex: obj.data,\n\t\t\t\tsrc: \"data:image/svg+xml;base64,\" + \n\t\t\t\t\tbtoa( unescape(encodeURIComponent(\n\t\t\t\t\t\tnew XMLSerializer().serializeToString(\n\t\t\t\t\t\t\tMathJax.tex2svg(obj.data).childNodes[0] \n\t\t\t\t\t\t)\n\t\t\t\t\t) )\t),\n\t\t\t},\n\t\t\tstyle: {\n\t\t\t\t... obj.style,\n\t\t    'max-height': obj.style && obj.style.display ? 'initial' : null\n\t\t\t},\n\t\t})\n\t},\n\ttoObj(dom){\n\t\tlet obj = {\n\t\t\t\ttype: 'mathjax',\n\t\t\t\tdata: dom.getAttribute(\"tex\"),\n\t\t\t},\n\t\t\tstyle = this.nodeApi.getNodeStyle(dom);\n\t\tif( style ){\n\t\t\tobj.style = style;\n\t\t}\n\t\treturn obj;\n\t}\n}","import * as factories from './template/templates.js';\n\nexport function getComponentEvent(componentName, eventType){\n\tlet factory = factories[componentName];\n\tif( factory ){\n\t\tif( factory.event && factory.event[eventType] ){\n\t\t\treturn factory.event[eventType];\n\t\t}else{\n\t\t\tconsole.error('组件名', componentName, '组件:', factory, '事件类型:', eventType, '事件:', factory.event);\n\t\t\tthrow new Error('该事件未完善');\n\t\t}\n\t}else{\n\t\tconsole.error('组件名', componentName);\n\t\tthrow new Error('不存在该组件');\n\t}\n}\n\nexport function getComponentHelpEvent(componentName, helpEventType){\n\tlet factory = factories[componentName];\n\tif( factory ){\n\t\tif( factory.helpEvent && factory.helpEvent[helpEventType] ){\n\t\t\treturn factory.helpEvent[helpEventType];\n\t\t}else{\n\t\t\tconsole.error('组件名', componentName, '辅助事件:', helpEventType);\n\t\t\tthrow new Error('该辅助事件未完善');\n\t\t}\n\t}else{\n\t\tconsole.error('组件名', componentName);\n\t\tthrow new Error('不存在该组件');\n\t}\n}\n\nexport function getComponentDom(context, obj){\n\tif( typeof obj !== 'object' ){\n\t\tconsole.error('obj', obj);\n\t\tthrow new Error('输入参数出错');\n\t}\n\tif(!factories[obj.type]){\n\t\tconsole.error('obj', obj);\n\t\tthrow new Error('该类型组件不存在');\n\t}\n\treturn factories[obj.type].toDom.call(context, obj);\n}\n\n\nexport function getComponentObj(context, dom){\n\tif( typeof dom !== 'object' ){\n\t\tconsole.error('obj', obj);\n\t\tthrow new Error('输入参数出错');\n\t}else if( dom.nodeType === Node.TEXT_NODE ){\n\t\treturn factories['text'].toObj.call(context, dom);\n\t}else if( dom.nodeType === Node.ELEMENT_NODE ){\n\t\tif(!factories[dom.className]){\n\t\t\tconsole.error('dom:', dom);\n\t\t\tthrow new Error('该类型组件不存在');\n\t\t}\n\t\treturn factories[dom.className].toObj.call(context, dom);\n\t}else{\n\t\tconsole.error('dom:', dom);\n\t\tthrow new Error('不知道的特殊情况');\n\t}\n}","\nexport default function handleOnKeydown(e){\n\t// console.log('handleOnKeydown e:', e);\n\tif( e.ctrlKey || e.metaKey ){\n\t\tif( e.keyCode === 67 ){\n\t\t\t// c 执行 copy\n\t\t\treturn ;\n\t\t}else if( e.keyCode === 86 ){\n\t\t\t//\tv 执行  paste\n\t\t\treturn ;\n\t\t}else if( e.keyCode === 83 ){\n\t\t\t//\ts 执行 save\n\t\t\treturn ;\n\t\t}\n\t}\n\tlet preventDefault = true;\n\tswitch( e.keyCode ){\n\t\tcase 8://\tbackspace\n\t\t\tthis.deleteForward();\n\t\t\tbreak;\n\t\tcase 46://\tDelete\n\t\t\tthis.deleteBackward();\n\t\t\tbreak;\n\t\tcase 13://\tenter\n\t\t\tthis.enter();\n\t\t\tbreak;\n\t\tcase 37://\tArrowLeft\n\t\tcase 38://\tArrowUp\n\t\tcase 39://\tArrowRight\n\t\tcase 40://\tArrowDown\n\t\t\tpreventDefault = false;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif( e.key.length === 1 && e.keyCode !== 229 ){// 输入普通字符串\n\t\t\t\tthis.insertText(e.key);\n\t\t\t}\n\t\t\tbreak;\n\t}\n\tif( preventDefault ){\n\t\te.preventDefault();\n\t}\n}","\n\n// compositionstart 时期的 range 是原始没变化的情况\n// 可以作为模板在 compositionend 中恢复\nexport function handleCompositionStart(e){\n\tconsole.log('compositionstart:', e);\n\n\tlet range = this.rangeApi.getRange(),\n\t\t\t{ collapsed, startContainer, startOffset, endContainer, endOffset } = range;\n\n\tif( collapsed ){\n\n\t}else{\n\t\t\n\t}\n\n\tthis.event.compositionStartRange.collapsed = collapsed;\n\tthis.event.compositionStartRange.startContainer = startContainer;\n\tthis.event.compositionStartRange.startOffset = startOffset;\n\tthis.event.compositionStartRange.endContainer = endContainer;\n\tthis.event.compositionStartRange.endOffset = endOffset;\n}\n\n\nexport function handleCompositionEnd(e){\n\tconsole.log('compositionstart:', e);\n\n\tconsole.log('compositionStartRange:', this.event.compositionStartRange.collapsed);\n\tconsole.log('compositionStartRange:', this.event.compositionStartRange.startContainer);\n\tconsole.log('compositionStartRange:', this.event.compositionStartRange.startOffset);\n\tconsole.log('compositionStartRange:', this.event.compositionStartRange.endContainer);\n\tconsole.log('compositionStartRange:', this.event.compositionStartRange.endOffset);\n\n\tconsole.log('this:', this);\n\n}","\nexport default function handleOnPaste(e){\n\te.preventDefault();\n\tconsole.log('handleOnPaste:', e);\n\tconsole.log('犯懒了, 目前只支持 text');\n\n\t// let clipboardData = e.clipboardData,\n\t// \t\tindex = 0,\n\t// \t\tlength = clipboardData.items.length,\n\t// \t\tstring = '';\n\n\t// for(let item of clipboardData.items){\n\t// \tconsole.log('item:', item);\n\t// \tif( item.type === 'text/plain' ){\n\t// \t\titem.getAsString((str)=>{\n\t// \t\t\tconsole.log('str:', str);\n\t// \t\t});\n\t// \t}\n\t// \tfor (const type of item.types) {\n\t// \t\tconsole.log('type:', type);\n\n\t// \t}\n\t// }\n\t\n\tlet string = (e.clipboardData || window.clipboardData).getData('text');\n\tthis.insertText(string);\n}\n","import handleOnKeydown from './native/keydown.js';\nimport { handleCompositionStart, handleCompositionEnd } from './native/composition.js';\nimport handleOnPaste from './native/paste.js';\n// import handleOnCopy from './native/copy.js';\n\nexport default class EditorEvent{\n\tconstructor(editor){\n\t\tthis.editor = editor;\n\n\t\tthis.keydown = handleOnKeydown.bind(editor);\n\t\teditor.editorDom.addEventListener('keydown', this.keydown);\n\n\t\tthis.compositionStartRange = {};\n\t\tthis.compositionstart = handleCompositionStart.bind(editor);\n\t\teditor.editorDom.addEventListener('compositionstart', this.compositionstart);\n\n\t\tthis.compositionend = handleCompositionEnd.bind(editor);\n\t\teditor.editorDom.addEventListener('compositionend', this.compositionend);\n\n\t\tthis.paste = handleOnPaste.bind(editor);\n\t\teditor.editorDom.addEventListener('paste', this.paste);\n\n\t\t// 拖拽相关暂不实现, 直接禁止, 目前就先和上面一样用 addEventListener 吧, 说不准哪天就想实现了\n\t\tthis.dragstart = function(e){\n\t\t\te.preventDefault();\n\t\t}\n\t\teditor.editorDom.addEventListener('dragstart', this.dragstart);\n\t\tthis.drop = function(e){\n\t\t\te.preventDefault();\n\t\t}\n\t\teditor.editorDom.addEventListener('drop', this.drop);\n\n\t\t// this.mousedownEvent = []\n\t\t// this.mousedown = (function(e){\n\t\t// \tconsole.log('this:', this.editor);\n\t\t// \tconsole.log('e:', e.target);\n\t\t// \t// this.mousedownEvent.forEach(()=>{\n\n\t\t// \t// })\n\t\t// }).bind(this);\n\t\t// editor.editorDom.addEventListener('mousedown', this.mousedown);\n\t}\n\tdestroy(){\n\t\tthis.editor.editorDom.removeEventListener('keydown', this.keydown);\n\t\tthis.keydown = null;\n\n\t\tthis.compositionStartRange = null;\n\t\tthis.editor.editorDom.removeEventListener('compositionstart', this.compositionstart);\n\t\tthis.compositionstart = null;\n\t\tthis.editor.editorDom.removeEventListener('compositionend', this.compositionend);\n\t\tthis.compositionend = null;\n\n\t\tthis.editor.editorDom.removeEventListener('paste', this.paste);\n\t\tthis.paste = null;\n\t\t\n\t\tthis.editor.editorDom.removeEventListener('dragstart', this.dragstart);\n\t\tthis.dragstart = null;\n\t\tthis.editor.editorDom.removeEventListener('drop', this.drop);\n\t\tthis.drop = null;\n\n\t\t// this.mousedownEvent = null;\n\t\t// this.editor.editorDom.removeEventListener('mousedown', this.mousedown);\n\t\t// this.mousedown = null;\n\n\t\tthis.editor = null;\n\t}\n}","import * as rangeApi from './base_api/range.js';\nimport * as nodeApi from './base_api/node.js';\nimport * as componentApi from './component/component.js';\nimport EditorEvent from './event/event.js';\n\nimport { resetListLabel } from './component/template/block/list/list.js';\n\nimport './editor.css';\n\n\nexport default function Editor(dom, contentObj){\n\t// 初始化 dom\n\n\tthis.editorDom = dom;\n\tthis.editorDom.style['white-space'] = 'pre-wrap';\n\tthis.editorDom.setAttribute('editor', true);\n\n\tthis.lastRange = {}\n\n\t// 事件\n\t// 初始化事件\n\tthis.event = new EditorEvent(this);\n\n\t// 组件\n\t// 默认的块类型数据\n\tthis.defualtBlockObj = { type: 'paragraph' };\n}\n\nEditor.prototype.init = function(){\n\tlet paragraph = this.objToDom(this.defualtBlockObj);\n\tthis.nodeApi.appendChild(this.editorDom, paragraph);\n\tthis.rangeApi.setNewCollapsedRange(paragraph, 0);\n\tthis.setEditable(true);\n\treturn this;\n}\n\nEditor.prototype.destroy = function(){\n\n\tthis.event.destroy();\n\tthis.event = null;\n}\n\nEditor.prototype.setEditable = function(editable){\n\tthis.editorDom.contentEditable = this.editable = editable;\n\treturn this;\n}\n\nEditor.prototype.recordRange = function(range){\n\tlet {\n\t\t\tcollapsed,\n\t\t\tstartContainer,\n\t\t\tstartOffset,\n\t\t\tendContainer,\n\t\t\tendOffset\n\t\t} = range;\n\tthis.lastRange.collapsed = collapsed;\n\tthis.lastRange.startContainer = startContainer;\n\tthis.lastRange.startOffset = startOffset;\n\tthis.lastRange.endContainer = endContainer;\n\tthis.lastRange.endOffset = endOffset;\n\n\treturn this;\n}\n\nEditor.prototype.rangeApi = Editor.rangeApi = rangeApi;\nEditor.prototype.nodeApi = Editor.nodeApi = nodeApi;\nEditor.prototype.nodeLabel = Editor.nodeLabel = nodeApi.nodeLabel;\n\n// 组件数据转化\n// 传入数据, 渲染编辑器\nEditor.prototype.render = function(obj){\n\tthis.nodeApi.emptyAllChild(this.editorDom);\n\tobj.blocks.forEach((blockObj)=>{\n\t\tlet blockDom = this.objToDom(blockObj);\n\t\tif( blockDom ){\n\t\t\tthis.nodeApi.appendChild(this.editorDom, blockDom);\n\t\t}else{\n\t\t\tconsole.error('blockObj:', blockObj);\n\t\t\tthrow new Error('组件 dom 读取解析失败');\n\t\t}\n\t});\n\treturn this;\n}\n\nEditor.prototype.empty = function(){\n\tthis.nodeApi.emptyAllChild(this.editorDom);\n}\n// 返回编辑器内的数据\nEditor.prototype.toObj = function(){\n\tlet obj = {\n\t\tblocks: []\n\t}\n\tthis.editorDom.childNodes.forEach((blockDom)=>{\n\t\tlet blockObj = this.domToObj(blockDom);\n\t\tif( blockObj ){\n\t\t\tobj.blocks.push( blockObj );\n\t\t}else{\n\t\t\tconsole.error('blockDom', blockDom);\n\t\t\tthrow new Error('block 转化失败');\n\t\t}\n\t});\n\treturn obj;\n}\n// 传入组件数据, 生成对应的组件 dom\nEditor.prototype.objToDom = function(obj){\n\n\treturn componentApi.getComponentDom(this, obj);\n}\n// 传入组件 dom, 生成对应的组件数据\nEditor.prototype.domToObj = function(dom){\n\n\treturn componentApi.getComponentObj(this, dom);\n}\n\n// 加载 json 文件\nEditor.prototype.loadJson = function(jsonUrl, callback){\n\tlet xmlhttp = new XMLHttpRequest(),\n\t\t\teditor = this;\n\txmlhttp.onreadystatechange = function () {\n\t\t// console.log(\"jsonUrl:\", jsonUrl);\n\t\t// console.log(\"this:\", this);\n\t\t// console.log(\"this.readyState:\", this.readyState);\n\t\t// console.log(\"this.status:\", this.status);\n\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t// console.log(\"this.responseText:\", this.responseText);\n\t\t\ttry{\n\t\t\t\tlet obj = JSON.parse(this.responseText);\n\t\t\t\teditor.render(obj);\n\t\t\t\tif( typeof callback === 'function' ){\n\t\t\t\t\tcallback(obj);\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\teditor.init();\n\t\t\t\tconsole.error(\"文件解析有问题\", e);\n\t\t\t}\n\t\t}\n\t};\n\txmlhttp.open(\"GET\", jsonUrl, true);\n\txmlhttp.send();\n\treturn this;\n}\n// 导出 json 文件\nEditor.prototype.exportObjJsonFormatting = function(filename){\n\tlet eleLink = document.createElement('a');\n\teleLink.download = filename;\n\teleLink.style.display = 'none';\n\t// 字符内容转变成blob地址\n\tlet blob = new Blob([JSON.stringify(this.toObj(), null, 4)]);\n\teleLink.href = URL.createObjectURL(blob);\n\t// 触发点击\n\t// document.body.appendChild(eleLink);\n\tthis.nodeApi.appendChild(document.body, eleLink);\n\teleLink.click();\n\t// 然后移除\n\tthis.nodeApi.removeNode(eleLink);\n\treturn this;\n}\n\n// 事件操作\n\nEditor.prototype.helpEventType = {\n\tgetFirstContainer: 'getFirstContainer',\n\tgetLastContainer: 'getLastContainer',\n\tgetMergeContainer: 'getMergeContainer',\n\tgetMergedNodes: 'getMergedNodes',\n\tmergedDeleteNode: 'mergedDeleteNode',\n}\n\nEditor.prototype.executeHelpEvent = function(block, eventType, params){\n\tif( this.nodeApi.isNotBlock(block) ){\n\t\tconsole.error('block:', block);\n\t\tthrow new Error('executeHelpEvent 传参错误, 不是 block');\n\t}\n\tlet event = componentApi.getComponentHelpEvent(block.className, eventType);\n\tif( event ){\n\t\treturn event.apply(this, params);\n\t}else{\n\t\tthrow new Error(`${eventKey} 组件 ${eventType} 辅助事件未完善`);\n\t}\n}\n\nEditor.prototype.eventType = {\n\tdeleteForward: 'deleteForward',\n\tdeleteForwardOnStart: 'deleteForwardOnStart',\n\t// deleteBackward: 'deleteBackward',\n\tdeleteFragment: 'deleteFragment',\n\tenter: 'enter',\n\tenterFragment: 'enterFragment'\n}\n\nEditor.prototype.executeEditorEvent = function(block, eventType, params){\n\tif( this.nodeApi.isNotBlock(block) ){\n\t\tconsole.error('block:', block);\n\t\tthrow new Error('executeEditorEvent 传参错误, 不是 block');\n\t}\n\tlet event = componentApi.getComponentEvent(block.className, eventType);\n\tif( event ){\n\t\tevent.apply(this, params);\n\t}else{\n\t\tthrow new Error(`${eventKey} 组件 ${eventType} 事件未完善`);\n\t}\n}\n\nEditor.prototype.deleteForward = function(){\n\tconsole.clear();\n\tconsole.log('deleteForward');\n\tlet \n\t\t{ rangeApi, nodeApi } = this,\n\t\trange = rangeApi.getRange();\n\tif( !range ){\n\t\tthrow new Error('range 不存在, deleteForward 执行失败');\n\t\treturn ;\n\t}\n\tlet\t{ collapsed, startContainer, startOffset, endContainer, endOffset } = range;\n\n\tif( collapsed ){\n\t\tlet executeNode = nodeApi.getBlock(startContainer);\n\t\tthis.executeEditorEvent(executeNode, this.eventType.deleteForward, [startContainer, startOffset]);\n\t}else{\n\t\tlet \n\t\t\tstartBlockNode = nodeApi.getBlock(startContainer),\n\t\t\tendBlockNode = nodeApi.getBlock(endContainer);\n\n\t\tif( startBlockNode === endBlockNode ){\n\t\t\tconsole.log('在同一个 block 中');\n\t\t\tthis.executeEditorEvent(startBlockNode, this.eventType.deleteFragment, [startContainer, startOffset, endContainer, endOffset]);\n\t\t}else{\n\t\t\tconsole.log('在不同的 block 中');\n\t\t\twhile(startBlockNode.nextSibling !== endBlockNode){\n\t\t\t\tthis.nodeApi.removeNode(startBlockNode.nextSibling);\n\t\t\t}\n\t\t\tthis.executeEditorEvent(startBlockNode, this.eventType.deleteFragment, [startContainer, startOffset, void 0, void 0]);\n\t\t\tthis.executeEditorEvent(endBlockNode, this.eventType.deleteFragment, [void 0, void 0, endContainer, endOffset]);\n\t\t\tthis.mergeTwoBlocks(startBlockNode, endBlockNode);\n\t\t}\n\t}\n}\n\n// 在不同的 block 中, deleteForward deleteBackward 之后合并两个 block\nEditor.prototype.mergeTwoBlocks = function(preBlock, block){\n\tconsole.log('%cEditor mergeTwoBlocks', 'color: #000000; background-color: #ffffff');\n\tconsole.log('preBlock:', preBlock, '\\nblock:', block);\n\tlet\n\t\t{ rangeApi, nodeApi } = this,\n\t\tmergeContainer = this.executeHelpEvent(preBlock, this.helpEventType.getMergeContainer, [preBlock]),\n\t\tmergedNodes = this.executeHelpEvent(block, this.helpEventType.getMergedNodes, [block]),\n\t\tmergedDeleteNode = this.executeHelpEvent(block, this.helpEventType.mergedDeleteNode, [block]);\n\n\tif( mergeContainer ){\n\t\tconsole.log('前一个 block 存在能够合并的容器:', mergeContainer);\n\t\tif( mergedNodes ){\n\t\t\tconsole.log('当前 block 存在用于合并的节点:', mergedNodes);\n\t\t\tlet preEnd = mergeContainer.childNodes[mergeContainer.childNodes.length - 1],\n\t\t\t\t\tnextStart = mergedNodes[0];\n\t\t\tif( preEnd ){\n\t\t\t\tconsole.log('前一个 block 存在最后一个节点:', preEnd);\n\t\t\t\tif( nextStart ){\n\t\t\t\t\tconsole.log('当前 block 存在第一个节点:', nextStart);\n\t\t\t\t\tnodeApi.appendChildren(mergeContainer, mergedNodes);\n\t\t\t\t\tnodeApi.mergeTwoNodes(preEnd, nextStart);\n\t\t\t\t\tif( mergedDeleteNode ){\n\t\t\t\t\t\tnodeApi.removeNode(mergedDeleteNode);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('当前 block 不存在第一个节点, 为空');\n\t\t\t\t\tif( mergedDeleteNode ){\n\t\t\t\t\t\tnodeApi.removeNode(mergedDeleteNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.log('前一个 block 不存在最后一个节点, 为空');\n\t\t\t\tif(nextStart){\n\t\t\t\t\tconsole.log('当前 block 存在第一个节点:', nextStart);\n\t\t\t\t\tnodeApi.appendChildren(mergeContainer, mergedNodes);\n\t\t\t\t\tif( mergedDeleteNode ){\n\t\t\t\t\t\tnodeApi.removeNode(mergedDeleteNode);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('当前 block 不存在第一个节点, 为空');\n\t\t\t\t\tif( mergedDeleteNode ){\n\t\t\t\t\t\tnodeApi.removeNode(mergedDeleteNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.log('当前 block 不存在用于合并的节点');\n\t\t}\n\t}else{\n\t\tconsole.log('前一个 block 不存在能够合并的容器');\n\t}\n}\n\nEditor.prototype.deleteBackward = function(){\n\tconsole.clear();\n\tlet \n\t\t{ rangeApi, nodeApi } = this,\n\t\trange = rangeApi.getRange();\n\tif( !range ){\n\t\tthrow new Error('range 不存在, deleteBackward 执行失败');\n\t\treturn ;\n\t}\n\tlet\t{ collapsed, startContainer, startOffset, endContainer, endOffset } = range;\n}\n\nEditor.prototype.enter = function(){\n\tconsole.clear();\n\tlet \n\t\t{ rangeApi, nodeApi } = this,\n\t\trange = rangeApi.getRange();\n\tif( !range ){\n\t\tthrow new Error('range 不存在, enter 执行失败');\n\t\treturn ;\n\t}\n\tlet\t{ collapsed, startContainer, startOffset, endContainer, endOffset } = range;\n\tif( collapsed ){\n\t\tlet executeNode = nodeApi.getBlock(startContainer);\n\t\t// console.log('executeNode:', executeNode);\n\t\tthis.executeEditorEvent(executeNode, this.eventType.enter, [startContainer, startOffset]);\n\t}else{\n\t\tlet \n\t\t\tstartBlockNode = nodeApi.getBlock(startContainer),\n\t\t\tendBlockNode = nodeApi.getBlock(endContainer);\n\n\t\tif( startBlockNode === endBlockNode ){\n\t\t\tconsole.log('在同一个 block 中');\n\t\t\tlet executeNode = nodeApi.getBlock(startContainer);\n\t\t\tthis.executeEditorEvent(executeNode, this.eventType.enterFragment, [startContainer, startOffset, endContainer, endOffset]);\n\n\t\t}else{\n\t\t\tconsole.log('在不同的 block 中');\n\t\t\twhile(startBlockNode.nextSibling !== endBlockNode){\n\t\t\t\tthis.nodeApi.removeNode(startBlockNode.nextSibling);\n\t\t\t}\n\t\t\tthis.executeEditorEvent(startBlockNode, this.eventType.enterFragment, [startContainer, startOffset, void 0, void 0]);\n\t\t\tthis.executeEditorEvent(endBlockNode, this.eventType.enterFragment, [void 0, void 0, endContainer, endOffset]);\n\t\t}\n\t}\n}\n\nEditor.prototype.insertText = function(text, hasDeleteForward){\n\tif( !hasDeleteForward ){\n\t\tconsole.clear();\n\t}\n\tconsole.log('insertText:', text);\n\tlet \n\t\t{ rangeApi, nodeApi } = this,\n\t\trange = rangeApi.getRange();\n\tif( !range ){\n\t\tthrow new Error('range 不存在, insertText 执行失败');\n\t\treturn ;\n\t}\n\tlet\t{ collapsed, startContainer, startOffset, endContainer, endOffset } = range;\n\n\tif( collapsed ){\n\t\tconsole.log('startContainer:', startContainer, '\\nstartOffset:', startOffset);\n\t\tlet container = nodeApi.getContainer(startContainer);\n\t\tif( !nodeApi.allowLine(container) ){\n\t\t\tconsole.log('不允许换行');\n\t\t\ttext = text.replace(/\\n/g, ' ');\n\t\t}\n\t\tif( startContainer.nodeType === Node.TEXT_NODE ){\n\t\t\tconsole.log('在 text 内插入字符');\n\t\t\tstartContainer.insertData(startOffset, text);\n\t\t\trangeApi.setCollapsedRange(startContainer, startOffset + text.length);\n\t\t}else if( startContainer.nodeType === Node.ELEMENT_NODE ){\n\t\t\tif( startContainer.childNodes.length === 0 && startOffset === 0 ){\n\t\t\t\tif( nodeApi.isContainer(startContainer) ){\n\t\t\t\t\tconsole.log('在一个空的 container 内');\n\t\t\t\t\tlet textNode = nodeApi.createTextNode(text);\n\t\t\t\t\tnodeApi.appendChild(startContainer, textNode);\n\t\t\t\t\trangeApi.setCollapsedRange(textNode, text.length);\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error('不知道的特殊情况, 按道理应该是 container 容器才是');\n\t\t\t\t}\n\t\t\t}else if( startContainer.nodeType === Node.ELEMENT_NODE ){\n\t\t\t\tconsole.log('在元素内插入字符');\n\t\t\t\tif( startOffset === 0 ){\n\t\t\t\t\tconsole.log('startOffset 为 0');\n\t\t\t\t\tlet \n\t\t\t\t\t\telement = startContainer.childNodes[0],\n\t\t\t\t\t\tleafNode = nodeApi.getStartLeafNode(element),\n\t\t\t\t\t\tpreLeafNode = nodeApi.getPreLeafNodeInContainer(element),\n\t\t\t\t\t\ttextNode = nodeApi.createTextNode(text);\n\n\t\t\t\t\tconsole.log('element:', element, '\\nleafNode:', leafNode, '\\npreLeafNode:', preLeafNode);\n\n\t\t\t\t\tif( preLeafNode && preLeafNode.nodeType === Node.TEXT_NODE ){\n\t\t\t\t\t\tconsole.log('preLeafNode 是 text');\n\t\t\t\t\t\tpreLeafNode.insertData(preLeafNode.length, text);\n\t\t\t\t\t\trangeApi.setCollapsedRange(preLeafNode, preLeafNode.length);\n\t\t\t\t\t}else if( leafNode.nodeType === Node.TEXT_NODE ){\n\t\t\t\t\t\tconsole.log('preLeafNode 是 node, , leafNode 是 text');\n\t\t\t\t\t\tleafNode.insertData(0, text);\n\t\t\t\t\t\trangeApi.setCollapsedRange(leafNode, text.length);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('leafNode 是 node, preLeafNode 也是 node (或者不存在)');\n\t\t\t\t\t\tlet beforeNode = element,\n\t\t\t\t\t\t\t\tparentNode = beforeNode.parentNode;\n\t\t\t\t\t\twhile( nodeApi.isNotContainer(parentNode) && !beforeNode.previousSibling ){\n\t\t\t\t\t\t\tbeforeNode = parentNode;\n\t\t\t\t\t\t\tparentNode = beforeNode.parentNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnodeApi.insertBefore(textNode, beforeNode);\n\t\t\t\t\t\trangeApi.setCollapsedRange(textNode, text.length);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('startOffset 不为 0');\n\t\t\t\t\tlet\n\t\t\t\t\t\telement = startContainer.childNodes[startOffset - 1],\n\t\t\t\t\t\tleafNode = nodeApi.getEndLeafNode(element),\n\t\t\t\t\t\tnextLeafNode = nodeApi.getNextLeafNodeInContainer(element),\n\t\t\t\t\t\ttextNode = nodeApi.createTextNode(text);\n\n\t\t\t\t\tconsole.log('element:', element, '\\nleafNode:', leafNode, '\\nnextLeafNode:', nextLeafNode);\n\t\t\t\t\tif( leafNode.nodeType === Node.TEXT_NODE ){\n\t\t\t\t\t\tconsole.log('leafNode 是 text');\n\t\t\t\t\t\tleafNode.insertData(leafNode.length, text);\n\t\t\t\t\t\trangeApi.setCollapsedRange(leafNode, leafNode.length);\n\t\t\t\t\t}else if( nextLeafNode && nextLeafNode.nodeType === Node.TEXT_NODE ){\n\t\t\t\t\t\tconsole.log('leafNode 是 node, nextLeafNode 是 text');\n\t\t\t\t\t\tnextLeafNode.insertData(0, text);\n\t\t\t\t\t\trangeApi.setCollapsedRange(nextLeafNode, text.length);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('leafNode 是 node, nextLeafNode 也是 node (或者不存在)');\n\n\t\t\t\t\t\tlet afterNode = element,\n\t\t\t\t\t\t\t\tparentNode = afterNode.parentNode;\n\t\t\t\t\t\twhile( nodeApi.isNotContainer(parentNode) && !afterNode.nextSibling ){\n\t\t\t\t\t\t\tafterNode = parentNode;\n\t\t\t\t\t\t\tparentNode = afterNode.parentNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnodeApi.insertAfter(textNode, afterNode);\n\t\t\t\t\t\trangeApi.setCollapsedRange(textNode, text.length);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthis.deleteForward();\n\t\tthis.insertText(text, true);\n\t}\n\n}\n\nEditor.prototype.insertElement = function(element, hasDeleteForward){\n\tif( !hasDeleteForward ){\n\t\t// console.clear();\n\t}\n\tconsole.log('insertElement:', element);\n\tlet \n\t\t{ rangeApi, nodeApi } = this,\n\t\trange = rangeApi.getRange();\n\tif( !this.editorDom.contains(range.startContainer) ){\n\t\trange = this.lastRange;\n\t}\n\tif( !range ){\n\t\tthrow new Error('range 不存在, insertElement 执行失败');\n\t\treturn ;\n\t}\n\tlet\t{ collapsed, startContainer, startOffset, endContainer, endOffset } = range;\n\n\tif( collapsed ){\n\t\tconsole.log('startContainer:', startContainer, '\\nstartOffset:', startOffset);\n\t\tif( startContainer.nodeType === Node.TEXT_NODE ){\n\t\t\tconsole.log('在 text 内插入元素');\n\t\t\tif( startOffset === startContainer.length ){\n\t\t\t\tconsole.log('在 text 末端');\n\t\t\t\tlet afterNode = startContainer,\n\t\t\t\t\t\tparentNode = afterNode.parentNode;\n\t\t\t\twhile( nodeApi.isNotContainer(parentNode) && !afterNode.nextSibling ){\n\t\t\t\t\tafterNode = parentNode;\n\t\t\t\t\tparentNode = afterNode.parentNode;\n\t\t\t\t}\n\t\t\t\tlet index = nodeApi.getNodeIndexOf(afterNode);\n\t\t\t\tif( NodeList.prototype.isPrototypeOf(element)\n\t\t\t\t\t\t|| Array.prototype.isPrototypeOf(element) ){\n\t\t\t\t\tfor( let i = element.length - 1; i >= 0; i-- ){\n\t\t\t\t\t\tnodeApi.insertAfter(element[i], afterNode);\n\t\t\t\t\t}\n\t\t\t\t\trangeApi.setCollapsedRange(parentNode, index + element.length + 1);\n\t\t\t\t}else{\n\t\t\t\t\tnodeApi.insertAfter(element, afterNode);\n\t\t\t\t\trangeApi.setNewCollapsedRange(parentNode, index + 2);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.error('犯懒了, 暂不支持此操作');\n\t\t\t}\n\t\t}else if( startContainer.nodeType === Node.ELEMENT_NODE ){\n\t\t\tconsole.error('犯懒了, 暂不支持此操作');\n\t\t}\n\t}else{\n\t\tconsole.error('犯懒了, 暂不支持此操作');\n\t}\n}\n\nEditor.prototype.format = function(command){\n\n}\n\nEditor.prototype.resetListLabel = resetListLabel;","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"tooltip\"},[_c('div',{staticClass:\"button\",attrs:{\"data-not-allow\":_vm.rangeNotInEditor}},[_c('div',{staticClass:\"title iconfont icon-json\",attrs:{\"title\":\"导出json\"},on:{\"mousedown\":_vm.exportJson}})]),_c('div',{staticClass:\"divider\"}),_c('div',{staticClass:\"button header_paragraph_type\",attrs:{\"data-not-allow\":_vm.headerParagraphType === null}},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"now_type_name\"},[_vm._v(_vm._s(_vm.headerParagraphType))]),_c('div',{staticClass:\"iconfont icon-caozuozhankai\"}),_c('div',{staticClass:\"all_types_container\"},[_c('div',{staticClass:\"all_types\"},[_c('div',{staticClass:\"type_name\",on:{\"mouseup\":function($event){return _vm.setHeaderParagraph('paragraph')}}},[_vm._v(\" 正文 \")]),_c('div',{staticClass:\"type_name\",on:{\"mouseup\":function($event){return _vm.setHeaderParagraph('h1')}}},[_c('h1',[_vm._v(\"标题1\")])]),_c('div',{staticClass:\"type_name\",on:{\"mouseup\":function($event){return _vm.setHeaderParagraph('h2')}}},[_c('h2',[_vm._v(\"标题2\")])]),_c('div',{staticClass:\"type_name\",on:{\"mouseup\":function($event){return _vm.setHeaderParagraph('h3')}}},[_c('h3',[_vm._v(\"标题3\")])]),_c('div',{staticClass:\"type_name\",on:{\"mouseup\":function($event){return _vm.setHeaderParagraph('h4')}}},[_c('h4',[_vm._v(\"标题4\")])])])])])]),_c('div',{staticClass:\"button\",attrs:{\"data-not-allow\":_vm.rangeNotInEditor}},[_c('div',{staticClass:\"title iconfont icon-fsux_tubiao_gongshi_jisuan\",attrs:{\"title\":\"添加数学公式\"},on:{\"mousedown\":_vm.addMathjax}})]),_c('v-mathjaxOperation',{attrs:{\"tooltipMessage\":_vm.tooltipMessage}}),_c('div',{staticClass:\"button list\",attrs:{\"data-not-allow\":_vm.rangeNotInEditor}},[_c('div',{staticClass:\"title iconfont icon-liebiaomoshi\",attrs:{\"title\":\"添加列表\"}},[_c('div',{staticClass:\"all_types_container\"},[_c('div',{staticClass:\"all_types\"},[_c('div',{staticClass:\"type_name\",on:{\"mouseup\":function($event){return _vm.listOperation('disorderly')}}},[_vm._v(\" 无序列表 \")]),_c('div',{staticClass:\"type_name\",on:{\"mouseup\":function($event){return _vm.listOperation('english')}}},[_vm._v(\" 小写英语 \")]),_c('div',{staticClass:\"type_name\",on:{\"mouseup\":function($event){return _vm.listOperation('English')}}},[_vm._v(\" 大写英语 \")]),_c('div',{staticClass:\"type_name\",on:{\"mouseup\":function($event){return _vm.listOperation('number')}}},[_vm._v(\" 数字序列 \")]),_c('div',{staticClass:\"type_name\",on:{\"mouseup\":function($event){return _vm.listOperation('custom')}}},[_vm._v(\" 自定义 \")])])])])]),_c('div',{staticClass:\"button\",attrs:{\"data-not-allow\":_vm.rangeNotInEditor}},[_c('div',{staticClass:\"title iconfont icon-tupian\",attrs:{\"title\":\"添加图片\"},on:{\"mousedown\":_vm.addImage}})]),_c('v-imageOperation',{attrs:{\"tooltipMessage\":_vm.tooltipMessage}}),_c('div',{staticClass:\"button\",attrs:{\"data-not-allow\":_vm.rangeNotInEditor}},[_c('div',{staticClass:\"title iconfont icon-yuandaimaxiayoudaima\",attrs:{\"title\":\"添加代码\"}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\nexport default function setHeaderParagraph(type){\n\tconsole.clear();\n\tconsole.log('setHeaderParagraph type:', type);\n\tlet \n\t\t\teditor = this.editor,\n\t\t\trange = editor.rangeApi.getRange();\n\tif( range ){\n\t\tlet\n\t\t\t{ startContainer, startOffset, endContainer, endOffset } = range,\n\t\t\toldBlock = editor.nodeApi.getBlock( range.startContainer ),\n\t\t\tblock;\n\n\t\tswitch (type){\n\t\t\tcase 'h1':\n\t\t\tcase 'h2':\n\t\t\tcase 'h3':\n\t\t\tcase 'h4':\n\t\t\t\tblock = editor.objToDom({\n\t\t\t\t\ttype: 'header',\n\t\t\t\t\tlevel: type,\n\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\tcase 'paragraph':\n\t\t\t\tblock = editor.objToDom({\n\t\t\t\t\ttype: 'paragraph',\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif( startContainer === oldBlock ){\n\t\t\tstartContainer = block;\n\t\t}\n\t\tif( endContainer === oldBlock ){\n\t\t\tendContainer = block;\n\t\t}\n\n\t\teditor.nodeApi.appendChildren(block, oldBlock.childNodes);\n\t\teditor.nodeApi.insertAfter(block, oldBlock);\n\t\teditor.editorDom.removeChild(oldBlock);\n\t\teditor.rangeApi.setNewRange(startContainer, startOffset, endContainer, endOffset);\n\t}\n}","\nexport default function listOperation(labelType){\n\tconsole.clear();\n\tconsole.log('addList labelType:', labelType);\n\tlet \n\t\t\teditor = this.editor,\n\t\t\trange = editor.rangeApi.getRange();\n\tif( range && range.collapsed ){\n\t\tlet\n\t\t\t{ startContainer, startOffset, endContainer, endOffset } = range,\n\t\t\toldBlock = editor.nodeApi.getBlock( range.startContainer ),\n\t\t\tblock;\n\t\t// console.log(\"oldBlock.className === 'list':\", oldBlock.className === 'list');\n\t\tconsole.log('startContainer:', startContainer);\n\t\tconsole.log('startOffset:', startOffset);\n\t\tif( oldBlock.className === 'list' ){\n\t\t\tlet oldLabel = oldBlock.getAttribute('label');\n\t\t\tif( oldLabel === 'custom'  ){\n\t\t\t\tlet container = editor.nodeApi.getContainer(startContainer);\n\t\t\t\tif( container.className === 'label' ){\n\t\t\t\t\tif( container.nextSibling.childNodes.length ){\n\t\t\t\t\t\teditor.rangeApi.setRangeOfNodeStart(container.nextSibling, true);\n\t\t\t\t\t}else{\n\t\t\t\t\t\teditor.rangeApi.setNewCollapsedRange(container.nextSibling, 0);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\teditor.rangeApi.setNewCollapsedRange(startContainer, startOffset);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\teditor.rangeApi.setNewCollapsedRange(startContainer, startOffset);\n\t\t\t}\n\t\t\teditor.resetListLabel(oldBlock, labelType);\n\t\t}else{\n\n\t\t\tblock = editor.objToDom({\n\t\t\t\ttype: 'list',\n\t\t\t\tlabel: labelType,\n\t\t\t\tdata: [\n\t\t\t\t\t[]\n\t\t\t\t]\n\t\t\t});\n\n\t\t\teditor.nodeApi.insertAfter(block, oldBlock);\n\t\t\teditor.rangeApi.setNewCollapsedRange(block.childNodes[0].childNodes[1] , 0);\n\t\t\tconsole.log('block.childNodes[0].childNodes[1]:', block.childNodes[0].childNodes[1])\n\t\t}\n\t}\n\n}","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"tooltip-operation image_operation\",attrs:{\"data-show\":_vm.tooltipMessage.imageOperationShow},on:{\"mousedown\":_vm.cancelOperation}},[_c('div',{staticClass:\"operatoin\",on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"image_preview\",on:{\"dragstart\":function($event){$event.preventDefault();},\"dragover\":function($event){$event.preventDefault();},\"drop\":function($event){$event.preventDefault();return _vm.dropImageFile.apply(null, arguments)}}},[(_vm.tooltipMessage.imageBase64)?_c('img',{attrs:{\"id\":\"showImage\",\"src\":_vm.tooltipMessage.imageBase64}}):_c('div',{staticClass:\"title\"},[_vm._v(\"拖拽预览\")])]),_c('div',{staticClass:\"image_title\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tooltipMessage.imageTitle),expression:\"tooltipMessage.imageTitle\"}],ref:\"imageTitle\",attrs:{\"type\":\"text\",\"placeholder\":\"图片标题\"},domProps:{\"value\":(_vm.tooltipMessage.imageTitle)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.tooltipMessage, \"imageTitle\", $event.target.value)}}})]),_c('div',{staticClass:\"buttons\"},[_c('div',{staticClass:\"button\"},[_c('input',{attrs:{\"type\":\"file\"},on:{\"change\":_vm.readImageFile}}),_vm._v(\" 导入 \")]),_c('div',{staticClass:\"button\",on:{\"mousedown\":_vm.clearOperation}},[_vm._v(\"清空\")]),_c('div',{staticClass:\"button\",on:{\"mousedown\":_vm.confirmOperation}},[_vm._v(\"确定\")]),_c('div',{staticClass:\"button\",on:{\"mousedown\":_vm.cancelOperation}},[_vm._v(\"取消\")])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"tooltip-operation image_operation\"\n\t\t:data-show=\"tooltipMessage.imageOperationShow\"\n\t\tv-on:mousedown=\"cancelOperation\">\n\t\t<div class=\"operatoin\" v-on:mousedown.stop>\n\t\t\t<div class=\"image_preview\"\n\t\t\t\tv-on:dragstart.prevent\n\t\t\t\tv-on:dragover.prevent\n\t\t\t\tv-on:drop.prevent='dropImageFile'>\n\t\t\t\t<img id=\"showImage\" :src=\"tooltipMessage.imageBase64\" v-if=\"tooltipMessage.imageBase64\"/>\n\t\t\t\t<div class=\"title\" v-else>拖拽预览</div>\n\t\t\t</div>\n\t\t\t<div class=\"image_title\">\n\t\t\t\t<input ref=\"imageTitle\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"图片标题\"\n\t\t\t\t\tv-model=\"tooltipMessage.imageTitle\"/>\n\t\t\t</div>\n\t\t\t<div class=\"buttons\">\n\t\t\t\t<div class=\"button\">\n\t\t\t\t\t<input type=\"file\" v-on:change=\"readImageFile\">\n\t\t\t\t\t导入\n\t\t\t\t</div>\n\t\t\t\t<div class=\"button\"\n\t\t\t\t\tv-on:mousedown=\"clearOperation\">清空</div>\n\t\t\t\t<div class=\"button\"\n\t\t\t\t\tv-on:mousedown=\"confirmOperation\">确定</div>\n\t\t\t\t<div class=\"button\"\n\t\t\t\t\tv-on:mousedown=\"cancelOperation\">取消</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\texport default {\n\t\t// data(){\n\t\t// \treturn {\n\t\t// \t\tshowStyleMessage: false\n\t\t// \t}\n\t\t// },\n\t\tprops: {\n\t\t\ttooltipMessage: {\n\t\t\t\ttype: Object,\n\t\t\t\tdefault(){\n\t\t\t\t\treturn {}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tdropImageFile(e){\n\t\t\t\tlet\n\t\t\t\t\tfiles = e.dataTransfer.files,\n\t\t\t\t\tfile = files[0],\n\t\t\t\t\treader = new FileReader();\n\n\t\t\t\treader.onload = ()=>{\n\t\t\t\t\tthis.tooltipMessage.imageBase64 = reader.result;\n\t\t\t\t};\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t},\n\t\t\treadImageFile(e){\n\t\t\t\tlet\n\t\t\t\t\tfiles = e.target.files,\n\t\t\t\t\tfile = files[0],\n\t\t\t\t\treader = new FileReader();\n\n\t\t\t\treader.onload = ()=>{\n\t\t\t\t\tthis.tooltipMessage.imageBase64 = reader.result;\n\t\t\t\t};\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t},\n\t\t\tclearOperation(e){\n\t\t\t\tthis.tooltipMessage.imageBase64 = null;\n\t\t\t\tthis.tooltipMessage.imageTitle = null;\n\t\t\t\tthis.tooltipMessage.imageStyle = null;\n\t\t\t\tthis.tooltipMessage.imgStyle = null;\n\t\t\t},\n\t\t\tconfirmOperation(){\n\t\t\t\t// console.log('tooltipMessage:', this.tooltipMessage);\n\n\t\t\t\tlet { editor, imageBase64, imageTitle, imgStyle } = this.tooltipMessage,\n\t\t\t\t\t\trange = editor.lastRange,\n\t\t\t\t\t\tnowblock = editor.nodeApi.getBlock(range.endContainer),\n\t\t\t\t\t\timageBlock = editor.objToDom({\n\t\t\t\t\t\t\ttype: \"image\",\n\t\t\t\t\t\t\tisBlock: true,\n\t\t\t\t\t\t\ttitle: imageTitle,\n\t\t\t\t\t\t\tsrc: imageBase64,\n\t\t\t\t\t\t\timageStyle: {\n\t                \"text-align\": \"center\"\n\t            },\n\t            imgStyle\n\t\t\t\t\t\t});\n\n\t\t\t\teditor.nodeApi.insertAfter(imageBlock, nowblock);\n\t\t\t\tthis.cancelOperation();\n\t\t\t},\n\t\t\tcancelOperation(){\n\t\t\t\tthis.tooltipMessage.imageOperationShow = false;\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style lang=\"less\">\n\t.tooltip-operation.image_operation{\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\t>.operatoin{\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\twidth: 70%;\n\t\t\tmax-width: 100%;\n\t\t\tmin-width: 3.5rem;\n\t\t\theight: 70%;\n\t\t\tmax-height: 100%;\n\t\t\tmin-height: 2.5rem;\n\t\t\tborder-radius: 0.1rem;\n\t\t\tbackground-color: #ffffff;\n\t\t\t>.image_preview{\n\t\t\t\tflex: 1;\n\t\t    display: flex;\n\t\t    justify-content: center;\n\t\t    align-items: center;\n\t\t\t\tpadding: 0.2rem 0 0.1rem;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 0;\n\t\t\t\t>img{\n\t\t\t\t\tobject-fit: contain;\n\t\t\t    max-height: 100%;\n\t\t\t    max-width: 100%;\n\t\t\t\t}\n\t\t\t\t>.title{\n\t\t\t    font-size: 0.5rem;\n\t\t\t    letter-spacing: 0.1rem;\n\t\t\t    color: #adadad;\n\t\t\t\t}\n\t\t\t}\n\t\t\t>.image_title{\n\t\t\t\tpadding: 0.1rem 0.2rem;\n\t\t\t\twidth: 100%;\n\t\t\t\tborder-top: 0.02rem solid #000000;\n\t\t\t\tborder-bottom: 0.02rem solid #000000;\n\t\t\t\t>input{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tfont-size: 0.2rem;\n\t\t\t\t}\n\t\t\t}\n\t\t\t>.buttons{\n\t\t\t\tpadding: 0.1rem 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 0.6rem;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\t>.button{\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tpadding: 0 0.1rem;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 0.4rem;\n\t\t\t\t\tfont-size: 0.18rem;\n\t\t\t    border-radius: 0.04rem;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\ttransition: background-color .3s;\n\t\t\t\t\t&:hover{\n\t\t\t\t\t\tbackground-color: #d4d4d4;\n\t\t\t\t\t}\n\t\t\t\t\t>input{\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\tfont-size: 0;\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./image_operation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./image_operation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./image_operation.vue?vue&type=template&id=63e66c34&\"\nimport script from \"./image_operation.vue?vue&type=script&lang=js&\"\nexport * from \"./image_operation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./image_operation.vue?vue&type=style&index=0&id=63e66c34&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"tooltip-operation image_operation\",attrs:{\"data-show\":_vm.tooltipMessage.mathjaxOperationShow},on:{\"mousedown\":_vm.cancalMathjax}},[_c('div',{staticClass:\"operatoin\",on:{\"mousedown\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"mathjax_img\"},_vm._l((_vm.tooltipMessage.mathjaxTexs),function(mathTex,index){return _c('img',{attrs:{\"src\":_vm.getMathjaxBase64(mathTex)}})}),0),_c('div',{ref:\"inputs\",staticClass:\"inputs\"},_vm._l((_vm.tooltipMessage.mathjaxTexs),function(mathTex,index){return _c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tooltipMessage.mathjaxTexs[index]),expression:\"tooltipMessage.mathjaxTexs[index]\"}],staticClass:\"input\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.tooltipMessage.mathjaxTexs[index])},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.tooltipMessage.mathjaxTexs, index, $event.target.value)}}})}),0),_c('div',{staticClass:\"styleMessage\",attrs:{\"data-show\":_vm.styleMessageVisible}},[_c('div',{staticClass:\"message\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"是否独立\")]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"checkbox\",attrs:{\"data-check\":!!_vm.display},on:{\"mousedown\":_vm.setStyleDisplay}},[_c('div',{staticClass:\"check\"})])])]),_c('div',{staticClass:\"message\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"上外间距\")]),_c('div',{staticClass:\"content\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.marginTop),expression:\"marginTop\"}],staticClass:\"text\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.marginTop)},on:{\"input\":function($event){if($event.target.composing)return;_vm.marginTop=$event.target.value}}}),_c('div',{staticClass:\"unit\"},[_vm._v(\"px\")])]),_c('div',{staticClass:\"title\"},[_vm._v(\"右外间距\")]),_c('div',{staticClass:\"content\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.marginLeft),expression:\"marginLeft\"}],staticClass:\"text\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.marginLeft)},on:{\"input\":function($event){if($event.target.composing)return;_vm.marginLeft=$event.target.value}}}),_c('div',{staticClass:\"unit\"},[_vm._v(\"px\")])])]),_c('div',{staticClass:\"message\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"下外间距\")]),_c('div',{staticClass:\"content\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.marginBottom),expression:\"marginBottom\"}],staticClass:\"text\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.marginBottom)},on:{\"input\":function($event){if($event.target.composing)return;_vm.marginBottom=$event.target.value}}}),_c('div',{staticClass:\"unit\"},[_vm._v(\"px\")])]),_c('div',{staticClass:\"title\"},[_vm._v(\"左外间距\")]),_c('div',{staticClass:\"content\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.marginRight),expression:\"marginRight\"}],staticClass:\"text\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.marginRight)},on:{\"input\":function($event){if($event.target.composing)return;_vm.marginRight=$event.target.value}}}),_c('div',{staticClass:\"unit\"},[_vm._v(\"px\")])])])]),_c('div',{staticClass:\"buttons\"},[_c('div',{staticClass:\"button\",on:{\"mouseup\":function($event){return _vm.setStyleMessageVisible(void 0)}}},[_vm._v(\"样式\")]),_c('div',{staticClass:\"button\",on:{\"mouseup\":_vm.addMathjax}},[_vm._v(\"添加\")]),_c('div',{staticClass:\"button\",on:{\"mouseup\":_vm.reduceMathjax}},[_vm._v(\"减少\")]),_c('div',{staticClass:\"button\",on:{\"mouseup\":_vm.clearMathjax}},[_vm._v(\"清空\")]),_c('div',{staticClass:\"button\",on:{\"mouseup\":_vm.confirmMathjax}},[_vm._v(\"确定\")]),_c('div',{staticClass:\"button\",on:{\"mouseup\":_vm.cancalMathjax}},[_vm._v(\"取消\")])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"tooltip-operation image_operation\"\n\t\t:data-show=\"tooltipMessage.mathjaxOperationShow\"\n\t\tv-on:mousedown=\"cancalMathjax\">\n\t\t<div class=\"operatoin\" v-on:mousedown.stop>\n\t\t\t<div class=\"mathjax_img\">\n\t\t\t\t<img v-for=\"(mathTex, index) in tooltipMessage.mathjaxTexs\"\n\t\t\t\t\t:src=\"getMathjaxBase64(mathTex)\">\n\t\t\t</div>\n\t\t\t<div class=\"inputs\" ref=\"inputs\">\n\t\t\t\t<input v-for=\"(mathTex, index) in tooltipMessage.mathjaxTexs\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tv-model=\"tooltipMessage.mathjaxTexs[index]\"/>\n\t\t\t</div>\n\t\t\t<div class=\"styleMessage\"\n\t\t\t\t:data-show=\"styleMessageVisible\">\n\t\t\t\t<div class=\"message\">\n\t\t\t\t\t<div class=\"title\">是否独立</div>\n\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t<div class=\"checkbox\"\n\t\t\t\t\t\t\t:data-check=\"!!display\"\n\t\t\t\t\t\t\tv-on:mousedown=\"setStyleDisplay\">\n\t\t\t\t\t\t\t<div class=\"check\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"message\">\n\t\t\t\t\t<div class=\"title\">上外间距</div>\n\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t<input class=\"text\" type=\"text\" v-model=\"marginTop\">\n\t\t\t\t\t\t<div class=\"unit\">px</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"title\">右外间距</div>\n\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t<input class=\"text\" type=\"text\" v-model=\"marginLeft\">\n\t\t\t\t\t\t<div class=\"unit\">px</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"message\">\n\t\t\t\t\t<div class=\"title\">下外间距</div>\n\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t<input class=\"text\" type=\"text\" v-model=\"marginBottom\">\n\t\t\t\t\t\t<div class=\"unit\">px</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"title\">左外间距</div>\n\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t<input class=\"text\" type=\"text\" v-model=\"marginRight\">\n\t\t\t\t\t\t<div class=\"unit\">px</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"buttons\">\n\t\t\t\t<div class=\"button\"\n\t\t\t\t\tv-on:mouseup=\"setStyleMessageVisible(void 0)\">样式</div>\n\t\t\t\t<div class=\"button\"\n\t\t\t\t\tv-on:mouseup=\"addMathjax\">添加</div>\n\t\t\t\t<div class=\"button\"\n\t\t\t\t\tv-on:mouseup=\"reduceMathjax\">减少</div>\n\t\t\t\t<div class=\"button\"\n\t\t\t\t\tv-on:mouseup=\"clearMathjax\">清空</div>\n\t\t\t\t<div class=\"button\"\n\t\t\t\t\tv-on:mouseup=\"confirmMathjax\">确定</div>\n\t\t\t\t<div class=\"button\"\n\t\t\t\t\tv-on:mouseup=\"cancalMathjax\">取消</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n\n<script>\n\texport default {\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tstyleMessageVisible: false,\n\t\t\t\tdisplay: null,\n\t\t\t\tmarginTop: null,\n\t\t\t\tmarginLeft: null,\n\t\t\t\tmarginBottom: null,\n\t\t\t\tmarginRight: null,\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\ttooltipMessage: {\n\t\t\t\ttype: Object,\n\t\t\t\tdefault(){\n\t\t\t\t\treturn {}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\t'tooltipMessage.mathjaxStyle': function(newVal){\n\t\t\t\tconsole.log('newVal:', newVal);\n\t\t\t\tif( newVal ){\n\t\t\t\t\tthis.setStyleMessageVisible(true);\n\t\t\t\t\tif(newVal.display){\n\t\t\t\t\t\tthis.display = newVal.display;\n\t\t\t\t\t}\n\t\t\t\t\tif(newVal['margin-top']){\n\t\t\t\t\t\tthis.marginTop = newVal['margin-top'].split(\"px\")[0];\n\t\t\t\t\t}\n\t\t\t\t\tif(newVal['margin-left']){\n\t\t\t\t\t\tthis.marginLeft = newVal['margin-left'].split(\"px\")[0];\n\t\t\t\t\t}\n\t\t\t\t\tif(newVal['margin-bottom']){\n\t\t\t\t\t\tthis.marginBottom = newVal['margin-bottom'].split(\"px\")[0];\n\t\t\t\t\t}\n\t\t\t\t\tif(newVal['margin-right']){\n\t\t\t\t\t\tthis.marginRight = newVal['margin-right'].split(\"px\")[0];\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.setStyleMessageVisible(false);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tsetStyleMessageVisible(visible){\n\t\t\t\tif( visible === void 0 ){\n\t\t\t\t\tthis.styleMessageVisible = !this.styleMessageVisible;\n\t\t\t\t}else if( visible !== this.styleMessageVisible ){\n\t\t\t\t\tthis.styleMessageVisible = visible;\n\t\t\t\t}\n\t\t\t\t// console.log('this.styleMessageVisible:', this.styleMessageVisible);\n\t\t\t\tif( this.styleMessageVisible ){\n\t\t\t\t\twhile( this.tooltipMessage.mathjaxTexs.length > 1 ){\n\t\t\t\t\t\t// console.log('this.tooltipMessage.mathjaxTexs.length:', this.tooltipMessage.mathjaxTexs.length);\n\t\t\t\t\t\tthis.tooltipMessage.mathjaxTexs.splice( length - 1, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetStyleDisplay(){\n\t\t\t\t// console.log(\"setStyleDisplay:\", this.display);\n\t\t\t\tif( this.display ){\n\t\t\t\t\tthis.display = null;\n\t\t\t\t}else{\n\t\t\t\t\tthis.display = \"block\";\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetMathjaxBase64(tex){\n\t\t\t\t// console.log('text:', tex);\n\t\t\t\tif( tex ){\n\t\t\t\t\treturn \"data:image/svg+xml;base64,\" + btoa( unescape(encodeURIComponent(new XMLSerializer().serializeToString( MathJax.tex2svg(tex).childNodes[0] ))) );\n\t\t\t\t}\n\t\t\t},\n\t\t\taddMathjax(){\n\t\t\t\tif( this.styleMessageVisible ){\n\t\t\t\t\tthis.styleMessageVisible = false;\n\t\t\t\t}\n\t\t\t\tthis.tooltipMessage.mathjaxTexs.push('');\n\t\t\t},\n\t\t\treduceMathjax(){\n\t\t\t\tlet length = this.tooltipMessage.mathjaxTexs.length;\n\t\t\t\tif( length > 1 ){\n\t\t\t\t\tthis.tooltipMessage.mathjaxTexs.splice( length - 1, 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\tclearMathjax(){\n\t\t\t\tthis.tooltipMessage.mathjaxTexs[0] = '';\n\t\t\t\twhile( this.tooltipMessage.mathjaxTexs.length > 1 ){\n\t\t\t\t\tthis.tooltipMessage.mathjaxTexs.splice( length - 1, 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfirmMathjax(){\n\t\t\t\tlet\teditor = this.tooltipMessage.editor;\n\t\t\t\tif( this.tooltipMessage.mathjaxTexs.length > 1 ){\n\t\t\t\t\tlet doms = [];\n\t\t\t\t\tthis.tooltipMessage.mathjaxTexs.forEach((tex)=>{\n\t\t\t\t\t\tdoms.push(editor.objToDom({\n\t\t\t\t\t\t\ttype: 'mathjax',\n\t\t\t\t\t\t\tdata: tex\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t\t// console.log(\"obj:\", obj);\n\t\t\t\t\teditor.insertElement(doms);\n\t\t\t\t}else{\n\t\t\t\t\tlet\n\t\t\t\t\t\tobj = {\n\t\t\t\t\t\t\ttype: 'mathjax',\n\t\t\t\t\t\t\tdata: this.tooltipMessage.mathjaxTexs[0]\n\t\t\t\t\t\t};\n\t\t\t\t\tif( this.styleMessageVisible ){\n\t\t\t\t\t\tobj.style = {\n\t\t\t\t\t\t\tdisplay: this.display,\n\t\t\t\t\t\t\t'margin-top': isNaN( parseInt(this.marginTop) ) ? this.marginTop : (this.marginTop + 'px'),\n\t\t\t\t\t\t\t'margin-bottom': isNaN( parseInt(this.marginBottom) ) ? this.marginBottom : (this.marginBottom + 'px'),\n\t\t\t\t\t\t\t'margin-left': isNaN( parseInt(this.marginLeft) ) ? this.marginLeft : (this.marginLeft + 'px'),\n\t\t\t\t\t\t\t'margin-right': isNaN( parseInt(this.marginRight) ) ? this.marginRight : (this.marginRight + 'px')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(\"obj:\", obj);\n\t\t\t\t\teditor.insertElement(editor.objToDom(obj));\n\t\t\t\t}\n\t\t\t\tthis.cancalMathjax();\n\t\t\t},\n\t\t\tcancalMathjax(){\n\t\t\t\tthis.tooltipMessage.mathjaxOperationShow = false;\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n\n<style lang=\"less\">\n\t.tooltip-operation.image_operation{\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\t>.operatoin{\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\twidth: 70%;\n\t\t\tmax-width: 100%;\n\t\t\tmin-width: 3.5rem;\n\t\t\theight: 70%;\n\t\t\tmax-height: 100%;\n\t\t\tmin-height: 3.3rem;\n\t\t\tborder-radius: 0.1rem;\n\t\t\tbackground-color: #ffffff;\n\n\t\t\t>.mathjax_img{\n\t\t    display: flex;\n\t\t    padding: 0.2rem 0.3rem;\n\t\t    width: 100%;\n\t\t    overflow: auto;\n\t\t    >img{\n\t\t    \tmin-height: 0.2rem;\n\t\t    \tmax-height: 0.5rem;\n\t\t    }\n\t\t\t}\n\t\t\t>.inputs{\n\t\t\t\tpadding: 0 0.3rem 0.2rem;\n\t\t\t\twidth: 100%;\n\t\t\t\tflex: 1;\n\t\t\t\tmin-height: 0.4rem;\n\t\t\t\toverflow: auto;\n\t\t\t\t>.input{\n\t\t\t\t\tmargin: 0 0 0.04rem 0;\n\t\t\t\t\tpadding: 0.04rem;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 0.36rem;\n\t\t\t\t\tline-height: 0.24rem;\n\t\t\t\t\tfont-size: 0.2rem;\n\t\t\t\t\tborder-width: 0.02rem;\n\t\t\t\t\tborder-style: dashed;\n\t\t\t\t\tborder-color: #434343;\n\t\t\t\t\tborder-radius: 0.04rem;\n\t\t\t\t}\n\t\t\t}\n\t\t\t>.styleMessage{\n\t\t\t\tpadding: 0 0.3rem;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 0;\n\t\t\t\ttransition: height .3s;\n\t\t\t\toverflow: hidden;\n\t\t\t\t>.message{\n\t\t\t\t\tdisplay: flex;\n\t\t\t    flex-flow: wrap;\n\t\t\t\t\theight: 0.4rem;\n\t\t\t\t\tline-height: 0.4rem;\n\t\t\t\t\t>.title{\n\t\t\t\t\t\t//min-width: 0.56rem;\n\t\t\t\t\t\tfont-size: 0.14rem;\n\t\t\t\t\t}\n\t\t\t\t\t>.content{\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tpadding: 0 0.1rem;\n\t\t\t\t\t\tmin-width: 1rem;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tfont-size: 0.18rem;\n\t\t\t\t\t\t>.checkbox{\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t    width: 0.14rem;\n\t\t\t\t\t    height: 0.14rem;\n\t\t\t\t\t    border-radius: 50%;\n\t\t\t\t\t\t\tborder-width: 0.01rem;\n\t\t\t\t\t\t\tborder-style: solid;\n\t\t\t\t\t\t\tborder-color: #dcdfe6;\n\t\t\t\t\t    background-color: #ffffff;\n\t\t\t\t\t    transition: background-color .3s, border-color .3s;\n\t\t\t\t\t    cursor: pointer;\n\t\t\t\t\t    >.check{\n\t\t\t\t\t    \twidth: 0;\n\t\t\t\t\t    \theight: 0;\n\t\t\t\t\t    \tborder-radius: 50%;\n\t\t\t\t\t    \tbackground-color: #ffffff;\n\t\t\t\t\t    \ttransition: width .3s, height .3s;\n\t\t\t\t\t    }\n\t\t\t\t\t\t}\n\t\t\t\t\t\t>.checkbox[data-check=\"true\"]{\n\t\t\t\t\t\t\tborder-color: #525252;\n\t\t\t\t\t    background-color: #525252;\n\t\t\t\t\t    >.check{\n\t\t\t\t\t    \twidth: 0.04rem;\n\t\t\t\t\t    \theight: 0.04rem;\n\t\t\t\t\t    }\n\t\t\t\t\t\t}\n\t\t\t\t\t\t>.text{\n\t\t\t\t\t\t\tpadding: 0.02rem 0.06rem;\n\t\t\t\t\t\t\twidth: 0.8rem;\n\t\t\t\t\t\t\tborder-width: 0.01rem;\n\t\t\t\t\t\t\tborder-style: solid;\n\t\t\t\t\t\t\tborder-color: #dcdfe6;\n\t\t\t\t\t\t\tborder-radius: 0.04rem;\n\t\t\t\t\t\t\tfont-size: 0.18rem;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t>.unit{\n\t\t\t\t\t\t\tpadding: 0 0.1rem;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t>.styleMessage[data-show=\"true\"]{\n\t\t\t\theight: 1.2rem;\n\n\t\t\t}\n\t\t\t>.buttons{\n\t\t\t\tpadding: 0.1rem 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 0.6rem;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\t>.button{\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tpadding: 0 0.1rem;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 0.4rem;\n\t\t\t\t\tfont-size: 0.18rem;\n\t\t\t    border-radius: 0.04rem;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\ttransition: background-color .3s;\n\t\t\t\t\t&:hover{\n\t\t\t\t\t\tbackground-color: #d4d4d4;\n\t\t\t\t\t}\n\t\t\t\t\t>input{\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\tfont-size: 0;\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./mathjax_operation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./mathjax_operation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mathjax_operation.vue?vue&type=template&id=49d7d78b&\"\nimport script from \"./mathjax_operation.vue?vue&type=script&lang=js&\"\nexport * from \"./mathjax_operation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mathjax_operation.vue?vue&type=style&index=0&id=49d7d78b&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"tooltip\">\n\t\t<div class=\"button\" :data-not-allow=\"rangeNotInEditor\">\n\t\t\t<div class=\"title iconfont icon-json\"\n\t\t\t\ttitle=\"导出json\"\n\t\t\t\tv-on:mousedown=\"exportJson\"></div>\n\t\t</div>\n\t\t<div class=\"divider\"></div>\n\t\t<div class=\"button header_paragraph_type\"\n\t\t\t\t:data-not-allow=\"headerParagraphType === null\">\n\t\t\t<div class=\"title\">\n\t\t\t\t<div class=\"now_type_name\">{{headerParagraphType}}</div>\n\t\t\t\t<div class=\"iconfont icon-caozuozhankai\"></div>\n\t\t\t\t<div class=\"all_types_container\">\n\t\t\t\t\t<div class=\"all_types\">\n\t\t\t\t\t\t<div class=\"type_name\"\n\t\t\t\t\t\t\tv-on:mouseup=\"setHeaderParagraph('paragraph')\">\n\t\t\t\t\t\t\t正文\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"type_name\"\n\t\t\t\t\t\t\tv-on:mouseup=\"setHeaderParagraph('h1')\">\n\t\t\t\t\t\t\t<h1>标题1</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"type_name\"\n\t\t\t\t\t\t\tv-on:mouseup=\"setHeaderParagraph('h2')\">\n\t\t\t\t\t\t\t<h2>标题2</h2>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"type_name\"\n\t\t\t\t\t\t\tv-on:mouseup=\"setHeaderParagraph('h3')\">\n\t\t\t\t\t\t\t<h3>标题3</h3>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"type_name\"\n\t\t\t\t\t\t\tv-on:mouseup=\"setHeaderParagraph('h4')\">\n\t\t\t\t\t\t\t<h4>标题4</h4>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"button\" :data-not-allow=\"rangeNotInEditor\">\n\t\t\t<div class=\"title iconfont icon-fsux_tubiao_gongshi_jisuan\"\n\t\t\t\ttitle=\"添加数学公式\" \n\t\t\t\tv-on:mousedown=\"addMathjax\"></div>\n\t\t</div>\n\t\t<v-mathjaxOperation :tooltipMessage=\"tooltipMessage\"/>\n\t\t<div class=\"button list\" :data-not-allow=\"rangeNotInEditor\">\n\t\t\t<div class=\"title iconfont icon-liebiaomoshi\"\n\t\t\t\ttitle=\"添加列表\">\n\t\t\t\t<div class=\"all_types_container\">\n\t\t\t\t\t<div class=\"all_types\">\n\t\t\t\t\t\t<div class=\"type_name\"\n\t\t\t\t\t\t\tv-on:mouseup=\"listOperation('disorderly')\">\n\t\t\t\t\t\t\t无序列表\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"type_name\"\n\t\t\t\t\t\t\tv-on:mouseup=\"listOperation('english')\">\n\t\t\t\t\t\t\t小写英语\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"type_name\"\n\t\t\t\t\t\t\tv-on:mouseup=\"listOperation('English')\">\n\t\t\t\t\t\t\t大写英语\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"type_name\"\n\t\t\t\t\t\t\tv-on:mouseup=\"listOperation('number')\">\n\t\t\t\t\t\t\t数字序列\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"type_name\"\n\t\t\t\t\t\t\tv-on:mouseup=\"listOperation('custom')\">\n\t\t\t\t\t\t\t自定义\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"button\" :data-not-allow=\"rangeNotInEditor\">\n\t\t\t<div class=\"title iconfont icon-tupian\"\n\t\t\t\ttitle=\"添加图片\"\n\t\t\t\tv-on:mousedown=\"addImage\"></div>\n\t\t</div>\n\t\t<v-imageOperation :tooltipMessage=\"tooltipMessage\"/>\n\t\t<div class=\"button\" :data-not-allow=\"rangeNotInEditor\">\n\t\t\t<div class=\"title iconfont icon-yuandaimaxiayoudaima\"\n\t\t\t\ttitle=\"添加代码\"></div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport setHeaderParagraph from './header_and_paragraph.js';\n\timport listOperation from './list_operation.js';\n\timport debounce from '../../../../utils/timer/debounce.js';\n\n\timport imageOperation from './image_operation.vue';\n\timport mathjaxOperation from './mathjax_operation.vue';\n\n\texport default {\n\t\tcomponents: {\n\t\t\t'v-imageOperation': imageOperation,\n\t\t\t'v-mathjaxOperation': mathjaxOperation,\n\t\t},\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\theaderParagraphType: null,\n\t\t\t\trangeNotInEditor: true,\n\n\t\t\t\ttooltipMessage: {\n\t\t\t\t\teditor: null,\n\t\t\t\t\tanotherEditor: null,\n\n\t\t\t\t\timageOperationShow: false,\n\t\t\t\t\timageBase64: null,\n\t\t\t\t\timageTitle: null,\n\t\t\t\t\timageStyle: null,\n\t\t\t\t\timgStyle: null,\n\n\t\t\t\t\tmathjaxOperationShow: false,\n\t\t\t\t\tmathjaxTexs: [''],\n\t\t\t\t\tmathjaxStyle: null,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\teditor: {\n\t\t\t\ttype: Object,\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\tanotherEditor: {\n\t\t\t\ttype: Object,\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\tallEditors: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault: null\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\teditor(newVal){\n\t\t\t\tthis.tooltipMessage.editor = newVal;\n\t\t\t},\n\t\t\tanotherEditor(newVal){\n\t\t\t\tthis.tooltipMessage.anotherEditor = newVal;\n\t\t\t},\n\t\t\tallEditors(newVal){\n\t\t\t\t// console.log('newVal:', newVal);\n\t\t\t\tnewVal.forEach((editor)=>{\n\t\t\t\t\t// console.log('editor:', editor.editorDom);\n\t\t\t\t\teditor.editorDom.addEventListener('mousedown', this.mousedown);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\texportJson(){\n\t\t\t\tif( this.editor ){\n\t\t\t\t\tthis.editor.exportObjJsonFormatting('json.json');\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetHeaderParagraph: setHeaderParagraph,\n\t\t\tlistOperation: listOperation,\n\t\t\taddMathjax(){\n\t\t\t\tthis.tooltipMessage.mathjaxOperationShow = true;\n\t\t\t},\n\t\t\taddImage(){\n\t\t\t\tthis.tooltipMessage.imageOperationShow = true;\n\t\t\t},\n\t\t\tselectionchangeDebounce: debounce(function(){\n\t\t\t\tif( !this.editor.editable ){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet { nodeApi, rangeApi } = this.editor,\n\t\t\t\t\t\trange = rangeApi.getRange();\n\t\t\t\tconsole.log('range:', range);\n\t\t\t\tif( range ){\n\t\t\t\t\tlet { startContainer, endContainer } = range;\n\t\t\t\t\tif( this.editor.editorDom.contains(startContainer) && this.editor.editorDom.contains(endContainer) ){\n\t\t\t\t\t\tthis.rangeNotInEditor = false;\n\t\t\t\t\t\tthis.editor.recordRange(range);\n\n\t\t\t\t\t\tlet startBlock = nodeApi.getBlock(startContainer),\n\t\t\t\t\t\t\t\tendBlock = nodeApi.getBlock(endContainer);\n\t\t\t\t\t\tif( startBlock === endBlock ){\n\t\t\t\t\t\t\tif( startBlock.className === \"paragraph\" ){\n\t\t\t\t\t\t\t\tthis.headerParagraphType = \"正文\"\n\t\t\t\t\t\t\t}else if( startBlock.className === \"header\" ){\n\t\t\t\t\t\t\t\tswitch( startBlock.nodeName ){\n\t\t\t\t\t\t\t\t\tcase \"H1\":\n\t\t\t\t\t\t\t\t\t\tthis.headerParagraphType = \"标题1\";\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase \"H2\":\n\t\t\t\t\t\t\t\t\t\tthis.headerParagraphType = \"标题2\";\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase \"H3\":\n\t\t\t\t\t\t\t\t\t\tthis.headerParagraphType = \"标题3\";\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase \"H4\":\n\t\t\t\t\t\t\t\t\t\tthis.headerParagraphType = \"标题4\";\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tthis.headerParagraphType = null;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.headerParagraphType = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// this.setBlockLogo(startBlock);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.rangeNotInEditor = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.headerParagraphType = null;\n\t\t\t}, 100),\n\t\t\tmousedown(e){\n\t\t\t\tif( !this.editor || !this.editor.editable ){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet element = e.target,\n\t\t\t\t\t\teditorDom = this.editor.editorDom;\n\t\t\t\t// console.log('element:', element);\n\t\t\t\tif( editorDom !== element && editorDom.contains(element) ){\n\t\t\t\t\tlet\n\t\t\t\t\t\tblock = this.editor.nodeApi.getBlock(element);\n\t\t\t\t\t// console.log('block:', block);\n\t\t\t\t\tif( element.className === 'mathjax' ){\n\t\t\t\t\t\tconsole.log(\"复制 mathjax\");\n\t\t\t\t\t\tlet mathjaxTexs = this.tooltipMessage.mathjaxTexs,\n\t\t\t\t\t\t\t\tobj;\n\t\t\t\t\t\twhile( mathjaxTexs.length > 0 ){\n\t\t\t\t\t\t\tmathjaxTexs.splice( 0, 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( element.style.length > 0 ){\n\t\t\t\t\t\t\tobj = this.editor.domToObj(element);\n\t\t\t\t\t\t\tmathjaxTexs.push(obj.data);\n\t\t\t\t\t\t\tthis.tooltipMessage.mathjaxStyle = obj.style;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\twhile(element.previousSibling\n\t\t\t\t\t\t\t\t\t&& element.previousSibling.className === 'mathjax'\n\t\t\t\t\t\t\t\t\t&& element.style.length === 0){\n\t\t\t\t\t\t\t\telement = element.previousSibling\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdo{\n\t\t\t\t\t\t\t\tobj = this.editor.domToObj(element);\n\t\t\t\t\t\t\t\tmathjaxTexs.push(obj.data);\n\t\t\t\t\t\t\t\telement = element.nextSibling;\n\t\t\t\t\t\t\t}while(element && element.className === 'mathjax' && element.style.length === 0);\n\t\t\t\t\t\t\tthis.tooltipMessage.mathjaxStyle = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else if( block.className === 'image' ){\n\t\t\t\t\t\tconsole.log(\"复制 image\");\n\t\t\t\t\t\t// console.log(\"obj:\", obj);\n\t\t\t\t\t\tlet obj = this.editor.domToObj(block);\n\t\t\t\t\t\tthis.tooltipMessage.imageBase64 = obj.src;\n\t\t\t\t\t\tthis.tooltipMessage.imageTitle = obj.title;\n\t\t\t\t\t\tthis.tooltipMessage.imageStyle = obj.imageStyle;\n\t\t\t\t\t\tthis.tooltipMessage.imgStyle = obj.imgStyle;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\t\t\tdocument.addEventListener('selectionchange', this.selectionchangeDebounce);\n\t\t},\n    destroyed(){\n\t\t\tdocument.removeEventListener('selectionchange', this.selectionchangeDebounce);\n\t\t\tthis.allEditors.forEach((editor)=>{\n\t\t\t\teditor.editorDom.removeEventListener('mousedown', this.mousedown);\n\t\t\t});\n    }\n\t}\n</script>\n\n<style lang=\"less\">\n\t.tooltip{\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n    border-left: 0.02rem solid #000000;\n    border-bottom: 0.02rem solid #000000;\n    >.divider{\n    \twidth: 0.02rem;\n\t    margin: 0.06rem;\n\t    background-color: #d7d7d7;\n\t    border-radius: 0.01rem;\n\t    z-index: 2;\n    }\n\t\t>.button{\n\t\t\tposition: relative;\n\t\t\tpadding: 0.06rem;\n\t\t\tmin-width: 0.4rem;\n\t\t\theight: 100%;\n\t\t\tz-index: 2;\n\t\t\t>.title{\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\tborder-radius: 0.04rem;\n\t\t\t\ttransition: background-color .3s, color .3s;\n\t\t\t\t>.all_types_container{\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tpadding-top: 0.36rem;\n\t\t\t\t\tpointer-events: none;\n\t\t\t\t\t>.all_types{\n\t\t\t\t    height: 0;\n\t\t\t\t    background-color: #ffffff;\n\t\t\t\t\t\tbox-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;\n\t\t\t\t    border-radius: 0.04rem;\n\t\t\t\t    overflow: hidden;\n\t\t\t\t    transition: height .3s, padding-top .3s, padding-bottom .3s;\n\t\t\t\t\t\t>.type_name{\n\t\t\t\t\t    padding: 0.08rem 0.2rem;\n\t\t\t\t\t    font-size: 0.16rem;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\ttransition: background-color .3s;\n\t\t\t\t\t\t\t&:hover{\n\t\t\t\t\t\t\t\tbackground-color: #cecece;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t&:hover{\n\t\t\t\t\tbackground-color: #d4d4d4;\n\t\t\t\t}\n\t\t\t}\n\t\t\t>.iconfont{\n\t\t\t\tfont-size: 0.2rem;\n\t\t\t}\n\t\t}\n\t\t>.button[data-not-allow=\"true\"]{\n\t\t\tcursor: not-allowed;\n\t\t\t>.title{\n\t\t\t\tcolor: #959595;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t}\n\t\t>.header_paragraph_type{\n\t\t\tz-index: 1;\n\t\t\t>.title{\n\t\t\t\t>.now_type_name{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\twidth: 0.44rem;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tfont-size: 0.14rem;\n\t\t\t\t}\n\t\t\t\t>.iconfont{\n\t\t\t\t\tpadding-bottom: 0.04rem;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\t\t\t\t>.all_types_container{\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: -0.2rem;\n\t\t\t\t\t>.all_types{\n\t\t\t\t    width: 2rem;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t&:hover{\n\t\t\t\t\t>.all_types_container{\n\t\t\t\t\t\tpointer-events: initial;\n\t\t\t\t\t\t>.all_types{\n\t\t\t\t\t    padding-top: 0.1rem;\n\t\t\t\t\t    padding-bottom: 0.1rem;\n\t\t\t\t\t\t\theight: 2.5rem;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t>.list{\n\t\t\tz-index: 1;\n\t\t\t>.title{\n\t\t\t\t>.all_types_container{\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: -0.4rem;\n\t\t\t\t\t>.all_types{\n\t\t\t\t    width: 1.2rem;\n\t\t\t\t\t\t>.type_name{\n\t\t\t\t\t    height: 0.4rem;\n\t\t\t\t\t    line-height: 0.24rem;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t&:hover{\n\t\t\t\t\t>.all_types_container{\n\t\t\t\t\t\tpointer-events: initial;\n\t\t\t\t\t\t>.all_types{\n\t\t\t\t\t    padding-top: 0.1rem;\n\t\t\t\t\t    padding-bottom: 0.1rem;\n\t\t\t\t\t\t\theight: 2.2rem;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t>.tooltip-operation{\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tposition: absolute;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tbackground-color: rgba(73, 73, 73, 0.86);\n\t\t\tz-index: 3;\n\t\t\tpointer-events: none;\n\t\t\topacity: 0;\n\t\t\ttransition: opacity .3s;\n\t\t}\n\t\t>.tooltip-operation[data-show=\"true\"]{\n\t\t\tpointer-events: initial;\n\t\t\topacity: 1;\n\t\t}\n\n\t}\n</style>","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./tooltip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./tooltip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tooltip.vue?vue&type=template&id=008b7220&\"\nimport script from \"./tooltip.vue?vue&type=script&lang=js&\"\nexport * from \"./tooltip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tooltip.vue?vue&type=style&index=0&id=008b7220&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"paper_view-editor\">\n\t\t<div class=\"editor_tooltip\" :data-show=\"editable\">\n\t\t\t<v-tooltip\n\t\t\t\t:editor=\"editing\"\n\t\t\t\t:anotherEditor=\"anotherEditor\"\n\t\t\t\t:allEditors=\"allEditors\"/>\n\t\t</div>\n\t\t<div class=\"editors\">\n\t\t\t<div class=\"editor_container\"\n\t\t\t\tref=\"originalEditorContainer\"\n\t\t\t\t:data-selected=\"editing && editing === originalEditor\"\n\t\t\t\tv-on:mousedown=\"setEditing(originalEditor, translationEditor)\">\n\t\t\t\t<div class=\"editorDom\" ref=\"originalEditor\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"editor_container\"\n\t\t\t\tref=\"translationEditorContainer\"\n\t\t\t\t:data-selected=\"editing && editing === translationEditor\"\n\t\t\t\tv-on:mousedown=\"setEditing(translationEditor, originalEditor)\">\n\t\t\t\t<div class=\"editorDom\" ref=\"translationEditor\"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport Editor from '../../../tools/simple_editor/editor.js';\n\timport tooltip from './tooltip/tooltip.vue';\n\texport default {\n\t\tcomponents: {\n\t\t\t'v-tooltip': tooltip,\n\t\t},\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\toriginalEditor: null,\n\t\t\t\ttranslationEditor: null,\n\t\t\t\tediting: null,\n\t\t\t\tanotherEditor: null,\n\t\t\t\tallEditors: null,\n\t\t\t\tcache: {\n\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tpaper: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"\"\n\t\t\t},\n\t\t\tlayoutType: {\n\t\t\t\ttype: Number,\n\t\t\t\tdefault: 0\n\t\t\t},\n\t\t\teditable: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tpaper(newVal, oldVal){\n\t\t\t\t// console.log(\"paper newVal:\", newVal, \"oldVal:\", oldVal);\n\t\t\t\tthis.originalEditor.empty();\n\t\t\t\tthis.translationEditor.empty();\n\t\t\t\tif( newVal ){\n\t\t\t\t\t// if( this.cache[newVal] && !editable ){\n\t\t\t\t\t// \tthis.originalEditor.render(this.cache[newVal].english);\n\t\t\t\t\t// \tthis.translationEditor.render(this.cache[newVal].chinese);\n\t\t\t\t\t// }else{\n\t\t\t\t\t\tlet path;\n\t\t\t\t\t\tif( process.env.NODE_ENV === 'development' ){\n\t\t\t\t\t\t\tpath = \"/papers\"\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tpath = \"/vue_project/dist/papers\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// /vue_project/dist\n\t\t\t\t\t\tthis.originalEditor.loadJson(`${path}/${newVal}/english.json`, (json)=>{\n\t\t\t\t\t\t\t// if( !this.cache[newVal] ){\n\t\t\t\t\t\t\t// \tthis.cache[newVal] = {}\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t// this.cache[newVal].english = json;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.translationEditor.loadJson(`${path}/${newVal}/chinese.json`, (json)=>{\n\t\t\t\t\t\t\t// if( !this.cache[newVal] ){\n\t\t\t\t\t\t\t// \tthis.cache[newVal] = {}\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t// this.cache[newVal].chinese = json;\n\t\t\t\t\t\t});\n\t\t\t\t\t// }\n\t\t\t\t}else{\n\t\t\t\t\tthis.originalEditor.empty();\n\t\t\t\t\tthis.translationEditor.empty();\n\t\t\t\t}\n\t\t\t},\n\t\t\tlayoutType(newVal){\n\t\t\t\tlet originalEditorWidth, translationEditorWidth;\n\t\t\t\tswitch(newVal){\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\toriginalEditorWidth = \"0%\";\n\t\t\t\t\t\ttranslationEditorWidth = \"0%\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\toriginalEditorWidth = \"100%\";\n\t\t\t\t\t\ttranslationEditorWidth = \"0%\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\toriginalEditorWidth = \"0%\";\n\t\t\t\t\t\ttranslationEditorWidth = \"100%\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\toriginalEditorWidth = \"50%\";\n\t\t\t\t\t\ttranslationEditorWidth = \"50%\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\toriginalEditorWidth = \"100%\";\n\t\t\t\t\t\ttranslationEditorWidth = \"0%\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\toriginalEditorWidth = \"0%\";\n\t\t\t\t\t\ttranslationEditorWidth = \"100%\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\toriginalEditorWidth = \"50%\";\n\t\t\t\t\t\ttranslationEditorWidth = \"50%\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.$refs.originalEditorContainer.style.width = originalEditorWidth;\n\t\t\t\tthis.$refs.translationEditorContainer.style.width = translationEditorWidth;\n\t\t\t},\n\t\t\teditable(newVal){\n\t\t\t\tthis.originalEditor.setEditable(newVal);\n\t\t\t\tthis.translationEditor.setEditable(newVal);\n\t\t\t\tif( !this.editor ){\n\t\t\t\t\tthis.setEditing(this.translationEditor, this.originalEditor);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tmethods: {\n\t\t\tsetEditing(editor, anotherEditor){\n\t\t\t\tthis.editing = editor;\n\t\t\t\tthis.anotherEditor = anotherEditor;\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\t\t\tthis.originalEditor = new Editor(this.$refs.originalEditor);\n\t\t\tthis.translationEditor = new Editor(this.$refs.translationEditor);\n\t\t\tthis.allEditors = [this.originalEditor, this.translationEditor];\n\t\t}\n\t}\n</script>\n\n<style lang=\"less\">\n\t.paper_view-editor{\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\t>.editor_tooltip{\n\t\t\tdisplay: flex;\n\t    justify-content: center;\n\t\t\twidth: 100%;\n\t\t\theight: 0;\n\t\t\ttransition: height .3s;\n\t\t\toverflow: hidden;\n\t\t}\n\t\t>.editor_tooltip[data-show=\"true\"]{\n\t\t\theight: 0.4rem;\n\t\t\toverflow: visible;\n\t\t}\n\t\t>.editors{\n\t\t\tdisplay: flex;\n\t\t\tflex: 1;\n\t\t\theight: 0;\n\t\t\twidth: 100%;\n\t\t\t>.editor_container{\n\t\t\t\toverflow-x: hidden;\n\t\t\t\ttransition: width .3s;\n\t\t\t\t>.editorDom{\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tborder-left: 0.02rem solid #000000;\n\t\t\t\t\tpadding: 0 0.3rem 1rem;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tmin-width: 3.5rem;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tfont-size: 0.16rem;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\toutline: none;\n\t\t\t\t\ttransition: width .3s;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./view_editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./view_editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./view_editor.vue?vue&type=template&id=c52d3636&\"\nimport script from \"./view_editor.vue?vue&type=script&lang=js&\"\nexport * from \"./view_editor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./view_editor.vue?vue&type=style&index=0&id=c52d3636&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"paper_view-pdf\"},[_c('iframe',{ref:\"iframe\",staticClass:\"iframe\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"paper_view-pdf\">\n\t\t<iframe class=\"iframe\" ref=\"iframe\" />\n\t</div>\n</template>\n\n<script>\n\texport default {\n\t\tprops: {\n\t\t\tpaper: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: ''\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tpaper(newVal, oldVal){\n\t\t\t\tlet path;\n\t\t\t\tif( process.env.NODE_ENV === 'development' ){\n\t\t\t\t\tpath = \"/papers\"\n\t\t\t\t}else{\n\t\t\t\t\tpath = \"/vue_project/dist/papers\"\n\t\t\t\t}\n\n\t\t\t\tif( newVal ){\n\t\t\t\t\tthis.$refs.iframe.contentWindow.location.replace(`${path}/${newVal}/${newVal}.pdf#view=FitH,top`);\n\t\t\t\t}else{\n\t\t\t\t\tthis.$refs.iframe.removeAttribute('src');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n<style lang=\"less\">\n\t.paper_view-pdf{\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\t>.iframe{\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t}\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./view_pdf.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./view_pdf.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./view_pdf.vue?vue&type=template&id=00c57bed&\"\nimport script from \"./view_pdf.vue?vue&type=script&lang=js&\"\nexport * from \"./view_pdf.vue?vue&type=script&lang=js&\"\nimport style0 from \"./view_pdf.vue?vue&type=style&index=0&id=00c57bed&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div id=\"paper\">\n\t\t<div class=\"header\">\n\t\t\t<div class=\"title\">\n\t\t\t\t<div class=\"iconfont icon-paper\"></div>\n\t\t\t\t<div class=\"text\">论文解析</div>\n\t\t\t\t<div class=\"text\" :v-if=\"selectedPaper\" >{{selectedPaper}}</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"main\">\n\t\t\t<div class=\"bar\">\n\t\t\t\t<div\n\t\t\t\t\t:data-selected=\"paperListVisible\"\n\t\t\t\t\tclass=\"item-btn\"\n\t\t\t\t\ttitle=\"论文列表\"\n\t\t\t\t\tv-on:mousedown=\"setPaperListVisible()\">列</div>\n\n\t\t\t\t<div\n\t\t\t\t\t:data-show=\"!!paperList[selectedPaperIndex]\"\n\t\t\t\t\tclass=\"item-btn editor_layout\"\n\t\t\t\t\ttitle=\"视图布局\"\n\t\t\t\t\t>\n\t\t\t\t\t视\n\t\t\t\t\t<div class=\"layout\">\n\t\t\t\t\t\t<div v-for=\"(layout, index) in layoutTypes\"\t\n\t\t\t\t\t\t\tclass=\"layout_button\"\n\t\t\t\t\t\t\t:title=\"layout.title\"\n\t\t\t\t\t\t\t:data-selected=\"layoutType === index\"\n\t\t\t\t\t\t\tv-on:mousedown=\"setLayoutType(index)\">{{layout.type}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\t:data-selected=\"editable\"\n\t\t\t\t\t:data-show=\"!!paperList[selectedPaperIndex] && paperList[selectedPaperIndex].allowChange\"\n\t\t\t\t\tclass=\"item-btn editable\"\n\t\t\t\t\ttitle=\"编辑\"\n\t\t\t\t\tv-on:mousedown=\"setEditable()\">编</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"items\">\n\n\t\t\t\t<div v-if=\"!selectedPaper\" class=\"noSelectedPaper\">还未选择论文</div>\n\n\t\t\t\t<div class=\"item list\" :data-show=\"paperListVisible\"\n\t\t\t\t\tv-on:mousedown=\"setPaperListVisible(false)\">\n\t\t\t\t\t<div v-for=\"(paper, index) in paperList\"\n\t\t\t\t\t\t:data-selected=\"selectedPaperIndex === index\"\n\t\t\t\t\t\tclass=\"paper-name\"\n\t\t\t\t\t\tv-on:mousedown.stop=\"setPaper(index)\">\n\t\t\t\t\t\t<div class=\"name\">{{paper.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"item pdf\" ref=\"pdf\">\n\t\t\t\t\t<v-viewPdf :paper=\"selectedPaper\"/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"item editor\" ref=\"editor\">\n\t\t\t\t\t<v-viewEditor\n\t\t\t\t\t\t:layoutType=\"layoutType\"\n\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t:paper=\"selectedPaper\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport paperList from './json/paper_list.json';\n\timport viewEditor from './view_editor/view_editor.vue';\n\timport viewPdf from './view_pdf/view_pdf.vue';\n\n\texport default {\n\t\tcomponents: {\n\t\t\t'v-viewEditor': viewEditor,\n\t\t\t'v-viewPdf': viewPdf,\n\t\t},\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tpaperList,\n\t\t\t\tpaperListVisible: false,\n\n\t\t\t\tselectedPaperIndex: null,\n\t\t\t\tselectedPaper: null,\n\n\t\t\t\tlayoutTypes: [\n\t\t\t\t\t{ type: \"P\", title: \"只展示pdf\" },\n\t\t\t\t\t{ type: \"原\", title: \"只展示原始富文本\" },\n\t\t\t\t\t{ type: \"译\", title: \"只展示翻译富文本\" },\n\t\t\t\t\t{ type: \"富\", title: \"不展示pdf,只展示富文本\" },\n\t\t\t\t\t{ type: \"F\", title: \"不展示翻译富文本,只展示pdf和原始富文本\" },\n\t\t\t\t\t{ type: \"S\", title: \"不展示原始富文本,只展示pdf和翻译富文本\" },\n\t\t\t\t\t{ type: \"全\", title: \"全部都展示\" },\n\t\t\t\t],\n\t\t\t\tlayoutType: null,\n\n\t\t\t\teditable: false,\n\n\t\t\t\tneedWatch: true,\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\t$route(){\n\t\t\t\t// console.log('watch $route:', this.needWatch);\n\t\t\t\tif( this.needWatch ){\n\t\t\t\t\tthis.watchRoute();\n\t\t\t\t}else{\n\t\t\t\t\tthis.needWatch = true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tsetPaperListVisible(visible){\n\t\t\t\t// console.log(\"setListVisible visible:\", visible, \"\\nthis.listVisible:\", this.listVisible);\n\t\t\t\tif( typeof visible === \"boolean\" ){\n\t\t\t\t\tif( this.paperListVisible !== visible ){\n\t\t\t\t\t\tthis.paperListVisible = visible;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.paperListVisible = !this.paperListVisible\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetPaper(paperIndex, changeRoute = true){\n\t\t\t\t// console.log(\"setPaper paperIndex:\", paperIndex, \"\\nthis.selectedPaperIndex:\", this.selectedPaperIndex);\n\t\t\t\tif( typeof paperIndex === \"number\" &&\n\t\t\t\t\t\tthis.paperList[paperIndex] &&\n\t\t\t\t\t\tthis.selectedPaperIndex !== paperIndex ){\n\n\t\t\t\t\tthis.selectedPaperIndex = paperIndex;\n\t\t\t\t\tif( !paperList[paperIndex].allowChange && this.editable ){\n\t\t\t\t\t\tthis.editable = false;\n\t\t\t\t\t}\n\t\t\t\t\tif( this.layoutType === null ){\n\t\t\t\t\t\tthis.setLayoutType(5, false);\n\t\t\t\t\t}\n\t\t\t\t\tif( this.paperListVisible ){\n\t\t\t\t\t\tthis.paperListVisible = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tif( this.selectedPaperIndex === paperIndex ){\n\t\t\t\t\t\t\tthis.selectedPaper = paperList[paperIndex].name;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 300);\n\t\t\t\t}else{\n\t\t\t\t\tif( this.editable ){\n\t\t\t\t\t\tthis.editable = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.selectedPaperIndex = this.selectedPaper = null;\n\t\t\t\t}\n\t\t\t\tif( changeRoute ){\n\t\t\t\t\tthis.setRoute();\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetLayoutType(typeIndex, changeRoute = true){\n\t\t\t\t// console.log(\"setLayoutType typeIndex:\", typeIndex, \"\\nthis.layoutType:\", this.layoutType);\n\t\t\t\tif( typeof typeIndex === \"number\" && typeIndex !== this.layoutType ){\n\t\t\t\t\tthis.layoutType = typeIndex;\n\t\t\t\t\tlet pdfWidth, editorWidth;\n\t\t\t\t\tswitch( typeIndex ){\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tpdfWidth = '100%';\n\t\t\t\t\t\t\teditorWidth = \"0\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tpdfWidth = '0';\n\t\t\t\t\t\t\teditorWidth = \"100%\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\tpdfWidth = '0';\n\t\t\t\t\t\t\teditorWidth = \"100%\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\tpdfWidth = '0';\n\t\t\t\t\t\t\teditorWidth = \"100%\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\tpdfWidth = '50%';\n\t\t\t\t\t\t\teditorWidth = \"50%\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\tpdfWidth = '50%';\n\t\t\t\t\t\t\teditorWidth = \"50%\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\t\tpdfWidth = '34%';\n\t\t\t\t\t\t\teditorWidth = \"66%\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tthis.$refs.pdf.style.width = pdfWidth;\n\t\t\t\t\tthis.$refs.editor.style.width = editorWidth;\n\t\t\t\t\tif( changeRoute ){\n\t\t\t\t\t\tthis.setRoute();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetEditable(editable, changeRoute = true){\n\t\t\t\t// console.log(\"setEditable editable:\", editable, \"\\nthis.editable:\", this.editable);\n\t\t\t\tif( typeof editable === \"boolean\" ){\n\t\t\t\t\tif( editable !== this.editable ){\n\t\t\t\t\t\tthis.editable = editable;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.editable = !this.editable;\n\t\t\t\t}\n\t\t\t\tif( changeRoute ){\n\t\t\t\t\tthis.setRoute();\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetRoute(){\n\t\t\t\tthis.needWatch = false;\n\t\t\t\tlet query = {};\n\t\t\t\tif( this.paperList[this.selectedPaperIndex] ){\n\t\t\t\t\tquery.paperId = this.selectedPaperIndex;\n\t\t\t\t\tquery.layoutType = this.layoutType;\n\t\t\t\t\tif( this.editable ){\n\t\t\t\t\t\tquery.editable = true;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tthis.$router.push({ query });\n\t\t\t},\n\t\t\twatchRoute(){\n\t\t\t\t// console.log('watchRoute query:', this.$route.query);\n\t\t\t\tlet { paperId, layoutType, editable } = this.$route.query,\n\t\t\t\t\t\treplaceQuery;\n\t\t\t\t// console.log('paperId:', paperId, 'layoutType:', layoutType, 'editable:', editable);\n\t\t\t\tif( paperId !== void 0 ){\n\t\t\t\t\t// console.log('paperId !== void 0')\n\t\t\t\t\tpaperId = parseInt(paperId);\n\t\t\t\t\t// console.log('paperId:', paperId);\n\t\t\t\t\tif( paperId >= 0 && paperId <= paperList.length - 1 ){\n\n\t\t\t\t\t\tlet needReplace = false,\n\t\t\t\t\t\t\t\treplaceQuery;\n\n\t\t\t\t\t\tlayoutType = parseInt(layoutType);\n\t\t\t\t\t\tif( layoutType < 0 || layoutType > 6 ){\n\t\t\t\t\t\t\tlayoutType = 5;\n\t\t\t\t\t\t\tneedReplace = true;\n\t\t\t\t\t\t\tthis.needWatch = false;\n\t\t\t\t\t\t\treplaceQuery = { paperId, layoutType }\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( editable === \"true\" ){\n\t\t\t\t\t\t\t// console.log(`${editable} === \"true\"`, editable === \"true\");\n\t\t\t\t\t\t\t// console.log(paperList);\n\t\t\t\t\t\t\t// console.log(`paperList[${paperId}]:`, paperList[paperId]);\n\t\t\t\t\t\t\t// console.log(`paperList[${paperId}].allowChange:`, paperList[paperId].allowChange);\n\t\t\t\t\t\t\tif( paperList[paperId].allowChange ){\n\t\t\t\t\t\t\t\t// console.log('论文允许修改:', paperList[paperId].allowChange);\n\t\t\t\t\t\t\t\teditable = true;\n\t\t\t\t\t\t\t\tif( needReplace ){\n\t\t\t\t\t\t\t\t\treplaceQuery.editable = editable;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t// console.log('论文不允许修改:', paperList[paperId].allowChange);\n\t\t\t\t\t\t\t\teditable = false;\n\t\t\t\t\t\t\t\tif( needReplace ){\n\t\t\t\t\t\t\t\t\treplaceQuery.editable = editable;\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tneedReplace = true;\n\t\t\t\t\t\t\t\t\tthis.needWatch = false;\n\t\t\t\t\t\t\t\t\treplaceQuery = { paperId, layoutType };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\teditable = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// console.log('验证过后的 paperId:', paperId, 'layoutType:', layoutType, 'editable:', editable);\n\n\t\t\t\t\t\tif( this.selectedPaperIndex !== paperId ){\n\t\t\t\t\t\t\tthis.setPaper(paperId, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setLayoutType(layoutType, false);\n\t\t\t\t\t\tthis.setEditable(editable, false);\n\t\t\t\t\t\tif( needReplace ){\n\t\t\t\t\t\t\tthis.$router.replace({ query: replaceQuery });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// console.log(\"this.layoutType:\", this.layoutType, \"this.editable:\", this.editable)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.setPaper(null, false);\n\t\t\t\t\t\tthis.$router.replace({ query: {} });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\t\t\tthis.watchRoute();\n\t\t}\n\t}\n</script>\n\n<style lang=\"less\">\n\t#paper{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\t>.header{\n\t\t\twidth: 100%;\n\t\t\theight: 0.5rem;\n\t\t\tbackground-color: #24292f;\n\t\t\t>.title{\n\t\t\t\tdisplay: flex;\n\t\t\t\tpadding-left: 0.1rem;\n\t\t\t\theight: 100%;\n\t\t\t\t>div{\n\t\t\t\t\tcolor: #ffffff;\n\t\t\t\t\tline-height: 0.5rem;\n\t\t\t\t}\n\t\t\t\t>.iconfont{\n\t\t\t\t\tfont-size: 0.16rem;\n\t\t\t\t}\n\t\t\t\t>.text{\n\t\t\t\t\tpadding-left: 0.08rem;\n\t\t\t\t\tfont-size: 0.14rem;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t>.main{\n\t\t\tdisplay: flex;\n\t\t\theight: 0;\n\t\t\tflex: 1;\n\t\t\t>.bar{\n\t\t\t\tpadding: 0.54rem 0 0 0;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\twidth: 0.4rem;\n\t\t\t\theight: 100%;\n\t\t\t\tbackground-color: #333333;\n\t\t\t\t>.item-btn{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 0.4rem;\n\t\t\t\t\tcolor: #ffffff;\n\t\t\t\t\tline-height: 0.4rem;\n\t\t\t\t\tfont-size: 0.26rem;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\ttransition: background-color .3s;\n\t\t\t\t\t&:hover{\n\t\t\t\t\t\tbackground-color: #ff0000;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t>.item-btn[data-selected=\"true\"]{\n\t\t\t\t\tbackground-color: #cc0000;\n\t\t\t\t}\n\t\t\t\t>.item-btn.editor_layout{\n\t\t\t\t\tposition: relative;\n\t\t\t\t\theight: 0;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\ttransition: height .3s, background-color .3s;\n\t\t\t\t\t>.layout{\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tleft: 100%;\n\t\t\t\t\t\ttop: -0.4rem;\n\t\t\t\t\t\tpadding: 0.4rem 0.4rem 0.4rem 0;\n\t\t\t\t\t\twidth: 0;\n\t\t\t\t\t\theight: 1.2rem;;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tz-index: 3;\n\t\t\t\t\t\ttransition: width .3s;\n\t\t\t\t\t\tpointer-events: none;\n\t\t\t\t\t\t>.layout_button{\n\t\t\t\t\t\t\twidth: 0;\n\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\t\tbackground-color: #333333;\n\t\t\t\t\t\t\ttransition: width .3s, opacity .3s, background-color .3s;\n\t\t\t\t\t\t\t&:hover{\n\t\t\t\t\t\t\t\tbackground-color: #ff0000;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t>.layout_button[data-selected=\"true\"]{\n\t\t\t\t\t\t\tbackground-color: #cc0000;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t&:hover{\n\t\t\t\t\t\t>.layout{\n\t\t\t\t\t\t\twidth: 3.2rem;\n\t\t\t\t\t\t\tpointer-events: initial;\n\t\t\t\t\t\t\t>.layout_button{\n\t\t\t\t\t\t\t\twidth: 0.4rem;\n\t\t\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t>.item-btn.editor_layout[data-show=\"true\"]{\n\t\t\t\t\toverflow: visible;\n\t\t\t\t\theight: 0.4rem;\n\t\t\t\t}\n\t\t\t\t>.item-btn.editable{\n\t\t\t\t\theight: 0;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\ttransition: height .3s, background-color .3s;\n\t\t\t\t}\n\t\t\t\t>.item-btn.editable[data-show=\"true\"]{\n\t\t\t\t\theight: 0;\n\t\t\t\t\theight: 0.4rem;\n\t\t\t\t}\n\t\t\t}\n\t\t\t>.items{\n\t\t\t\tposition: relative;\n\t\t\t\tflex: 1;\n\t\t\t\twidth: 0;\n\t\t\t\tdisplay: flex;\n\t\t\t\t>.item{\n\t\t\t\t\theight: 100%;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t}\n\t\t\t\t>.list{\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\twidth: 0;\n\t\t\t\t\tpadding: 0.2rem 0;\n\t\t\t\t\tbackground-color: rgba(73, 73, 73, 0.86);\n\t\t\t\t\ttransition: width .3s, padding .3s;\n\t\t\t\t\tz-index: 3;\n\t\t\t\t\t>.paper-name{\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t    height: 0.36rem;\n\t\t\t\t    line-height: 0.36rem;\n\t\t\t\t    font-size: 0.2rem;\n\t\t\t\t    color: #ffffff;\n\t\t\t\t    white-space: nowrap;\n\t\t\t\t    cursor: pointer;\n\t\t\t\t\t\ttransition: background-color .3s;\n\t\t\t\t\t\t&:hover{\n\t\t\t\t\t\t\tbackground-color: #ff0000;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t>.name{\n\t\t\t\t\t\t\tpadding-left: 0.1rem;\n\t\t\t\t\t\t\tpadding-right: 0.1rem;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t>.paper-name[data-selected=\"true\"]{\n\t\t\t\t\t\tbackground-color: #cc0000;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t>.list[data-show=\"true\"]{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tpadding: 0.2rem 0.1rem;\n\t\t\t\t}\n\t\t\t\t>.noSelectedPaper{\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tjustify-content: center;\n\t\t\t    align-items: center;\n\t\t\t    font-size: 0.5rem;\n\t\t\t    letter-spacing: 0.1rem;\n\t\t\t    background-color: #ffffff;\n\t\t\t    z-index: 1;\n\t\t\t\t}\n\t\t\t\t>.pdf{\n\t\t\t\t\twidth: 50%;\n\t\t\t\t\ttransition: width .3s;\n\t\t\t\t}\n\t\t\t\t>.editor{\n\t\t\t\t\twidth: 50%;\n\t\t\t\t\ttransition: width .3s;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./paper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./paper.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./paper.vue?vue&type=template&id=dc8a1da6&\"\nimport script from \"./paper.vue?vue&type=script&lang=js&\"\nexport * from \"./paper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./paper.vue?vue&type=style&index=0&id=dc8a1da6&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var isCallable = require('../internals/is-callable');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'object' || isCallable(argument)) return argument;\n  throw $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","var isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw $TypeError('Incorrect invocation');\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","module.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String($Error(arg).stack); })('zxcasd');\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","var toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","/* eslint-disable no-proto -- safe */\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar anInstance = require('../internals/an-instance');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar DOMExceptionConstants = require('../internals/dom-exception-constants');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(global, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n","// 抄自 https://github.com/tweenjs/tween.js/blob/master/src/Now.ts\nlet now;\n\nif (typeof self === 'undefined' && typeof process !== 'undefined' && process.hrtime) {\n\tnow = function () {\n\t\t// eslint-disable-next-line\n\t\t// @ts-ignore\n\t\tvar time = process.hrtime();\n\t\t// Convert [seconds, nanoseconds] to milliseconds.\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n}\n// In a browser, use self.performance.now if it is available.\nelse if (typeof self !== 'undefined' && self.performance !== undefined && self.performance.now !== undefined) {\n\t// This must be bound, because directly assigning this function\n\t// leads to an invocation exception in Chrome.\n\tnow = self.performance.now.bind(self.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n\tnow = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n\tnow = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\nexport default now","import getNow from './basic/now.js';\n/**\n * underscore 防抖函数，返回函数连续调用时，空闲时间必须大于或等于 wait，func 才会执行\n *\n * @param  {function} func        回调函数\n * @param  {number}   wait        表示时间窗口的间隔\n * @param  {boolean}  immediate   设置为ture时，是否立即调用函数\n * @return {function}             返回客户调用函数\n */\nexport default function debounce(func, wait, immediate = false) {\n\tlet timeout, args, context, timestamp, result;\n \n \tfunction run() {\n\t\t// 现在和上一次时间戳比较\n\t\tlet last = getNow() - timestamp;\n\t\t// 如果当前间隔时间少于设定时间且大于0就重新设置定时器\n\t\tif (last < wait && last >= 0) {\n\t\t\ttimeout = setTimeout(run, wait - last);\n\t\t} else {\n\t\t\t// 否则的话就是时间到了执行回调函数\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) {\n\t\t\t\tresult = func.apply(context, args);\n\t\t\t\tcontext = args = null;\n\t\t\t}\n\t\t}\n\t};\n \n\tfunction debounce() {\n\t\tcontext = this;\n\t\targs = arguments;\n\t\t// 设置最近一次函数触发的时间戳\n\t\ttimestamp = getNow();\n\t\t// 如果定时器不存在且立即执行函数\n\t\tlet callNow = immediate && !timeout;\n\t\t// 如果定时器不存在就创建一个\n\t\tif (!timeout) {\n\t\t\ttimeout = setTimeout(run, wait);\n\t\t}\n\t\tif (callNow) {\n\t\t\t// 如果需要立即执行函数的话 通过 apply 执行\n\t\t\tresult = func.apply(context, args);\n\t\t\tcontext = args = null;\n\t\t}\n\t\treturn result;\n\t};\n\n\treturn debounce;\n};"],"names":["render","_vm","this","_c","_self","attrs","staticClass","_v","selectedPaper","_s","paperListVisible","on","$event","setPaperListVisible","paperList","selectedPaperIndex","_l","layoutTypes","layout","index","title","layoutType","setLayoutType","type","editable","allowChange","setEditable","_e","paper","stopPropagation","setPaper","name","ref","staticRenderFns","editing","anotherEditor","allEditors","originalEditor","setEditing","translationEditor","nodeLabel","block","container","allowLine","isBlock","dom","nodeType","Node","ELEMENT_NODE","getAttribute","isNotBlock","isContainer","isNotContainer","isEmpty","node","childNodes","length","isElementEqual","a","b","Object","getOwnPropertyNames","console","log","nodeName","attributes","i","aAttribute","item","bAttribute","value","style","aStyle","bStyle","isStartInContainer","parentNode","insertBefore","newNode","nextNode","insertAfter","preNode","nextSibling","appendChild","appendChildren","childrenNodes","NodeList","prototype","isPrototypeOf","len","Array","error","Error","createTextNode","text","document","createDom","obj","if","children","created","element","createElement","keys","forEach","key","setAttribute","isArray","child","emptyAllChild","removeChild","removeNode","mergeTwoNodes","pre","next","TEXT_NODE","normalize","preEnd","nextStart","splitFromNodeOffsetStillTop","offset","topNode","contains","startNode","startNodeParent","startNodeParentClone","rememberStartNodeParentClone","getNextNodeInTopNode","splitText","cloneNode","rememberNextSibling","getNodeIndexOf","getNodeStyle","getBlock","root","getPreBlock","previousSibling","getNextBlock","getContainer","getContainerChildNode","getSingleNodeInContainer","getPreNodeInContainer","getPreLeafNodeInContainer","getEndLeafNode","getNextNodeInContainer","getNextLeafNodeInContainer","getStartLeafNode","nodeApi","isEndInContainer","getRange","selection","getSelection","getRangeAt","setRange","startOffset","endNode","endOffset","range","startContainer","setStart","endContainer","setEnd","setCollapsedRange","setNewRange","createRange","removeAllRanges","addRange","setNewCollapsedRange","setRangeOfNodeStart","isNew","rangeNode","rangeOffset","getRangeOfNodeStart","setRangeOfNodeEnd","getRangeOfNodeEnd","deleteForward","rangeApi","singleNode","newOffset","call","executeEditorEvent","eventType","deleteForwardOnStart","deleteLeafNodeInContainer","deleteData","preBlock","lastContainer","executeHelpEvent","helpEventType","getLastContainer","mergeTwoBlocks","deleteFragment","deleteStartFragment","deleteEndFragment","deleteCenterFragment","needRange","endFragment","enter","splitedNode","newContainer","enterFragment","enterCenterFragment","event","paragraphEvent","toDom","class","paragraph","data","array","childDom","objToDom","toObj","push","domToObj","helpEvent","getFirstContainer","getMergeContainer","getMergedNodes","mergedDeleteNode","level","header","toLowerCase","nodeValue","isImgContainer","isImgTitle","className","startContainerNode","endContainerNode","nextBlock","imageTitle","getImageTitleDom","firstContainer","defaultBlock","defualtBlockObj","imageEvent","imageStyle","src","imgStyle","img","innerText","imageBlock","codeStyle","codeContainer","code","li","liContent","isLabel","mergeLiToPreBlock","preLiContent","mergeTwoLi","isLiContent","resetListLabel","startContainerNodeLi","endContainerNodeLi","emptyLiLabel","emptyLiContent","newLi","getEmptyLiDom","newLiContent","listEvent","label","map","createLiDomObj","listBlock","setTimeout","contenteditable","getLabel","labelType","String","fromCharCode","oldLabelType","contentEditable","removeAttribute","indexOf","height","tex","btoa","unescape","encodeURIComponent","XMLSerializer","serializeToString","MathJax","tex2svg","display","getComponentEvent","componentName","factory","factories","getComponentHelpEvent","getComponentDom","context","getComponentObj","handleOnKeydown","e","ctrlKey","metaKey","keyCode","preventDefault","deleteBackward","insertText","handleCompositionStart","collapsed","compositionStartRange","handleCompositionEnd","handleOnPaste","string","clipboardData","window","getData","EditorEvent","constructor","editor","keydown","bind","editorDom","addEventListener","compositionstart","compositionend","paste","dragstart","drop","destroy","removeEventListener","Editor","contentObj","lastRange","init","recordRange","blocks","blockObj","blockDom","empty","componentApi","loadJson","jsonUrl","callback","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","JSON","parse","responseText","open","send","exportObjJsonFormatting","filename","eleLink","download","blob","Blob","stringify","href","URL","createObjectURL","body","click","params","apply","eventKey","clear","executeNode","startBlockNode","endBlockNode","mergeContainer","mergedNodes","hasDeleteForward","replace","insertData","textNode","leafNode","preLeafNode","beforeNode","nextLeafNode","afterNode","insertElement","format","command","rangeNotInEditor","exportJson","headerParagraphType","setHeaderParagraph","addMathjax","tooltipMessage","listOperation","addImage","oldBlock","oldLabel","imageOperationShow","cancelOperation","dropImageFile","arguments","imageBase64","directives","rawName","expression","domProps","target","composing","$set","readImageFile","clearOperation","confirmOperation","props","default","methods","files","file","reader","nowblock","component","mathjaxOperationShow","cancalMathjax","mathjaxTexs","mathTex","getMathjaxBase64","styleMessageVisible","setStyleDisplay","marginTop","marginLeft","marginBottom","marginRight","setStyleMessageVisible","reduceMathjax","clearMathjax","confirmMathjax","watch","doms","components","mathjaxStyle","newVal","selectionchangeDebounce","endBlock","mousedown","mounted","destroyed","cache","path","originalEditorWidth","translationEditorWidth","needWatch","$route","pdfWidth","editorWidth","setRoute","query","watchRoute","paperId","replaceQuery","needReplace","isCallable","$String","$TypeError","TypeError","module","exports","argument","it","Prototype","TO_STRING_TAG_SUPPORT","classofRaw","wellKnownSymbol","TO_STRING_TAG","$Object","CORRECT_ARGUMENTS","tryGet","O","tag","result","undefined","callee","IndexSizeError","s","c","m","DOMStringSizeError","HierarchyRequestError","WrongDocumentError","InvalidCharacterError","NoDataAllowedError","NoModificationAllowedError","NotFoundError","NotSupportedError","InUseAttributeError","InvalidStateError","SyntaxError","InvalidModificationError","NamespaceError","InvalidAccessError","ValidationError","TypeMismatchError","SecurityError","NetworkError","AbortError","URLMismatchError","QuotaExceededError","TimeoutError","InvalidNodeTypeError","DataCloneError","uncurryThis","$Error","TEST","arg","stack","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","test","dropEntries","prepareStackTrace","isObject","setPrototypeOf","$this","dummy","Wrapper","NewTarget","NewTargetPrototype","toString","$default","anObject","aPossiblePrototype","setter","CORRECT_SETTER","getOwnPropertyDescriptor","set","proto","__proto__","classof","$","global","getBuiltIn","createPropertyDescriptor","defineProperty","hasOwn","anInstance","inheritIfRequired","normalizeStringArgument","DOMExceptionConstants","clearErrorStack","DESCRIPTORS","IS_PURE","DOM_EXCEPTION","NativeDOMException","$DOMException","DOMExceptionPrototype","argumentsLength","message","that","ERROR_HAS_STACK","DOM_EXCEPTION_HAS_STACK","descriptor","BUGGY_DESCRIPTOR","writable","configurable","FORCED_CONSTRUCTOR","forced","DOMException","PolyfilledDOMException","PolyfilledDOMExceptionPrototype","constant","constantName","now","self","process","hrtime","time","performance","Date","getTime","debounce","func","wait","immediate","timeout","args","timestamp","run","last","getNow","callNow"],"sourceRoot":""}