"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[819],{2819:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tree_container"},[t("tree",{attrs:{id:"example",data:e.data,selectNode:e.selectNode,drag:!0}})],1)},a=[],o=(n(7658),function(){var e=this,t=e._self._c;return t("div",{staticClass:"component-tree"},e._l(e.data,(function(n,d){return t("my-tree",{key:n.name,attrs:{id:e.id,content:e.content,children:e.children,indent:e.indent,startExpand:e.startExpand,dealNode:e.dealNode,data:n,lazyLoad:e.lazyLoad,selectNode:e.selectNode,memoryExpandState:e.memoryExpandState}})})),1)}),i=[],l=function(){var e=this,t=e._self._c;return t("div",{class:{"tree-node":!0}},[t("div",{class:{"tree-node-body-container":!0,"is-selected":e.isSelected}},[t("div",{class:{"tree-node-body":!0}},[t("div",{staticClass:"tree-node-icon"},[t("div",{class:{"tree-node-icon-expand":!0,"is-expand":e.isExpand,"is-show":e.getNodeChildren(e.data)&&(e.getNodeChildren(e.data).length>0||Object.keys(e.getNodeChildren(e.data)).length>0)||e.needLoad},on:{mousedown:e.handleExpandIconDown}},[e._v(" › ")])]),t("div",{staticClass:"tree-node-content",on:{click:function(t){return e.handleSelectNode(e.data)}}},[e._v(" "+e._s(e.getNodeContent(e.data))+" ")])])]),t("tree_transition",[e.getNodeChildren(e.data)&&e.isExpand?t("div",{staticClass:"tree-node-children"},e._l(e.getNodeChildren(e.data),(function(n,d){return t("my-tree-node",{key:n.name,attrs:{id:e.id,content:e.content,children:e.children,indent:e.indent,startExpand:e.startExpand,dealNode:e.dealNode,data:n,lazyLoad:e.lazyLoad,selectNode:e.selectNode,memoryExpandState:e.memoryExpandState}})})),1):e._e()])],1)},s=[];let r=".3s height ease-in-out";var c={name:"my-collapse-transition",functional:!0,render(e,{children:t}){const n={on:{beforeEnter:function(e){e.dataset||(e.dataset={}),e.style.transition=r,e.style.height="0"},enter:function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?e.style.height=e.scrollHeight+"px":e.style.height=null,e.style.overflow="hidden"},afterEnter:function(e){e.style.transition=null,e.style.height=null,e.style.overflow=e.dataset.oldOverflow},beforeLeave:function(e){e.dataset||(e.dataset={}),e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},leave:function(e){0!==e.scrollHeight&&(e.style.transition=r,e.style.height=0)},afterLeave:function(e){e.style.overflow=e.dataset.oldOverflow,e.style.transition=null,e.style.height=null}}};return e("transition",n,t)}};const h={};class u{getSelectedNode(){return this.selectedNode}setSelectedNode(e){this.selectedNode=e}setAccordion(e){return"boolean"===typeof e&&(this.isAccordion=e),this}getAccordion(){return this.isAccordion}}function p(e){return h[e]?h[e]:h[e]=new u}function f(e){return h[e]}var y={name:"my-tree-node",components:{tree_transition:c},data(){return{tree:f(this.id),isSelected:!1,isExpand:!this.lazyLoad&&this.startExpand,needLoad:!!this.lazyLoad}},props:{id:String,content:[String,Function],children:[String,Function],indent:Number,startExpand:Boolean,dealNode:[Object,Function],data:Object,selectNode:Function,lazyLoad:[Function,Object],memoryExpandState:[Boolean]},methods:{handleExpandIconDown(e){let t=this.getNodeChildren(this.data);this.needLoad&&!t?(t=this.lazyLoad(this.data),t&&(this.isExpand=!this.isExpand),this.needLoad=!1):this.isExpand=!this.isExpand,this.isExpand&&this.tree.getAccordion()&&t&&this.$parent.$children.forEach((e=>{e.isExpand&&e!==this&&(e.isExpand=!1)}))},handleSelectNode(e){let t=this.tree.getSelectedNode();t?(t.isSelected=!1,t===this?(this.tree.setSelectedNode(null),this.selectNode(null)):(this.isSelected=!0,this.tree.setSelectedNode(this),this.selectNode(e))):(this.isSelected=!0,this.tree.setSelectedNode(this),this.selectNode(e))},getNodeContent(e){if(e){if(this.dealNode)return this.dealNode(e).content;switch(typeof this.content){case"string":return e[this.content];case"function":return this.content(e);default:return null}}},getNodeChildren(e){if(e){if(this.dealNode)return this.dealNode(e).children;switch(typeof this.children){case"string":return e[this.children];case"function":return this.children(e);default:return null}}}}},m=y,N=n(1001),g=(0,N.Z)(m,l,s,!1,null,null,null),x=g.exports,v={components:{"my-tree":x},props:{id:String,dealNode:{type:[Object,Function],default:null},content:{type:[String,Function],default:"name"},children:{type:[String,Function],default:"children"},indent:{type:Number,default:8},startExpand:{type:Boolean,default:!1},memoryExpandState:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},accordion:{type:Boolean,default:!1},lazyLoad:{type:[Object,Function],default:null},selectNode:{type:Function,default:()=>{}}},methods:{},created(){p(this.id).setAccordion(this.accordion)}},E=v,S=(0,N.Z)(E,o,i,!1,null,null,null),w=S.exports,_={components:{tree:w},data(){return{data:null}},methods:{selectNode(e){console.log("node:",e)},lazyLoad(e){console.log("node:",e)}},created(){let e=[{name:"节点1",children:[{name:"节点1-1"},{name:"节点1-2"}]},{name:"节点2",children:[{name:"节点2-1"},{name:"节点2-2",children:[{name:"节点2-2-1"},{name:"节点2-2-2"}]},{name:"节点2-3"}]},{name:"节点3"}],t=e[0],n=[];e.forEach((t=>{t.parent={children:e},n.push(t)}));while(t=n.pop()){let e=t.children;e&&e.forEach((e=>{e.parent=t,n.push(e)}))}this.data=window.data=e}},C=_,L=(0,N.Z)(C,d,a,!1,null,null,null),b=L.exports}}]);
//# sourceMappingURL=819.54f5c924.js.map